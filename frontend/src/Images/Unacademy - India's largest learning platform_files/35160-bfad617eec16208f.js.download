(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35160,13494,84398,45034,71251,25300],{52663:function(g,c,a){"use strict";var h=a(81225),i=a(44168),j=a(73810),d=a(67294);a(86338);var k=a(86010),e=a(52543),l=a(93871),m=a(86924),n=a(32692),o=a(73637),b=a(43366),p=a(79895),q={enter:b.x9.enteringScreen,exit:b.x9.leavingScreen},f=d.forwardRef(function(a,B){var C=a.BackdropProps,D=a.children,b=a.classes,E=a.className,c=a.disableBackdropClick,e=void 0!==c&&c,f=a.disableEscapeKeyDown,g=a.fullScreen,j=a.fullWidth,r=a.maxWidth,T=a.onBackdropClick,F=a.onClose,G=a.onEnter,H=a.onEntered,I=a.onEntering,J=a.onEscapeKeyDown,K=a.onExit,L=a.onExited,M=a.onExiting,s=a.open,t=a.PaperComponent,N=void 0===t?p.Z:t,u=a.PaperProps,v=void 0===u?{}:u,w=a.scroll,x=void 0===w?"paper":w,y=a.TransitionComponent,O=void 0===y?o.Z:y,z=a.transitionDuration,A=void 0===z?q:z,P=a.TransitionProps,Q=a["aria-describedby"],R=a["aria-labelledby"],S=(0,i.Z)(a,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),U=d.useRef();return d.createElement(m.Z,(0,h.Z)({className:(0,k.default)(b.root,E),BackdropComponent:n.Z,BackdropProps:(0,h.Z)({transitionDuration:A},C),closeAfterTransition:!0},e?{disableBackdropClick:e}:{},{disableEscapeKeyDown:void 0!==f&&f,onEscapeKeyDown:J,onClose:F,open:s,ref:B},S),d.createElement(O,(0,h.Z)({appear:!0,in:s,timeout:A,onEnter:G,onEntering:I,onEntered:H,onExit:K,onExiting:M,onExited:L,role:"none presentation"},P),d.createElement("div",{className:(0,k.default)(b.container,b["scroll".concat((0,l.Z)(x))]),onMouseUp:function(a){a.target===a.currentTarget&&a.target===U.current&&(U.current=null,T&&T(a),!e&&F&&F(a,"backdropClick"))},onMouseDown:function(a){U.current=a.target}},d.createElement(N,(0,h.Z)({elevation:24,role:"dialog","aria-describedby":Q,"aria-labelledby":R},v,{className:(0,k.default)(b.paper,b["paperScroll".concat((0,l.Z)(x))],b["paperWidth".concat((0,l.Z)(String(void 0===r?"sm":r)))],v.className,void 0!==g&&g&&b.paperFullScreen,void 0!==j&&j&&b.paperFullWidth)}),D))))});c.Z=(0,e.Z)(function(a){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(a.breakpoints.values.xs,444),"&$paperScrollBody":(0,j.Z)({},a.breakpoints.down(Math.max(a.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:a.breakpoints.values.sm,"&$paperScrollBody":(0,j.Z)({},a.breakpoints.down(a.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:a.breakpoints.values.md,"&$paperScrollBody":(0,j.Z)({},a.breakpoints.down(a.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:a.breakpoints.values.lg,"&$paperScrollBody":(0,j.Z)({},a.breakpoints.down(a.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:a.breakpoints.values.xl,"&$paperScrollBody":(0,j.Z)({},a.breakpoints.down(a.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}},{name:"MuiDialog"})(f)},15736:function(e,a,b){"use strict";b.d(a,{Y:function(){return f}});var c=b(67294),d=c.createContext();function f(){return c.useContext(d)}a.Z=d},7397:function(f,b,a){"use strict";var g=a(81225),h=a(44168),c=a(67294);a(86338);var i=a(86010),j=a(22318),d=a(52543),k=a(15736),e=c.forwardRef(function(a,p){var e=a.children,b=a.classes,q=a.className,l=a.component,m=a.disablePointerEvents,n=a.disableTypography,r=a.position,o=a.variant,s=(0,h.Z)(a,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),d=(0,k.Y)()||{},f=o;return o&&d.variant,d&&!f&&(f=d.variant),c.createElement(k.Z.Provider,{value:null},c.createElement(void 0===l?"div":l,(0,g.Z)({className:(0,i.default)(b.root,q,"end"===r?b.positionEnd:b.positionStart,void 0!==m&&m&&b.disablePointerEvents,d.hiddenLabel&&b.hiddenLabel,"filled"===f&&b.filled,"dense"===d.margin&&b.marginDense),ref:p},s),"string"!=typeof e|| void 0!==n&&n?e:c.createElement(j.Z,{color:"textSecondary"},e)))});b.Z=(0,d.Z)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(e)},41120:function(c,b,a){"use strict";var d=a(81225),e=a(11719),f=a(99700);b.Z=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{};return(0,e.Z)(a,(0,d.Z)({defaultTheme:f.Z},b))}},58365:function(f,b,a){"use strict";var g=a(36350),h=a(94966),c=a(67294),i=a(86010);a(17702);var j=a(59693),d=a(52543),e=c.forwardRef(function(a,n){var e=a.animation,f=void 0===e?"pulse":e,b=a.classes,o=a.className,j=a.component,k=a.height,l=a.variant,m=a.width,d=(0,h.Z)(a,["animation","classes","className","component","height","variant","width"]),p=Boolean(d.children);return c.createElement(void 0===j?"span":j,(0,g.Z)({ref:n,className:(0,i.default)(b.root,b[void 0===l?"text":l],o,p&&[b.withChildren,!m&&b.fitContent,!k&&b.heightAuto],!1!==f&&b[f])},d,{style:(0,g.Z)({width:m,height:k},d.style)}))});b.Z=(0,d.Z)(function(a){return{root:{display:"block",backgroundColor:(0,j.Fq)(a.palette.text.primary,"light"===a.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:a.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(a.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}},{name:"MuiSkeleton"})(e)},51804:function(b,c,a){"use strict";var d=a(71416),e=a(17205),f=a(67191),g=a(5516),h=a(49981);(b.exports=function(a,c){var e,i,j,b,k;return arguments.length<2||"string"!=typeof a?(b=c,c=a,a=null):b=arguments[2],d(a)?(e=h.call(a,"c"),i=h.call(a,"e"),j=h.call(a,"w")):(e=j=!0,i=!1),k={value:c,configurable:e,enumerable:i,writable:j},b?f(g(b),k):k}).gs=function(c,b,a){var j,k,i,l;return"string"!=typeof c?(i=a,a=b,b=c,c=null):i=arguments[3],d(b)?e(b)?d(a)?e(a)||(i=a,a=void 0):a=void 0:(i=b,b=a=void 0):b=void 0,d(c)?(j=h.call(c,"c"),k=h.call(c,"e")):(j=!0,k=!1),l={get:b,set:a,configurable:j,enumerable:k},i?f(g(i),l):l}},84124:function(f,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=i(b(48370)),g=i(b(37519)),h=b(29999);function i(a){return a&&a.__esModule?a:{default:a}}class d{constructor({type:a,cfiRange:b,data:c,sectionIndex:d,cb:e,className:f,styles:g}){this.type=a,this.cfiRange=b,this.data=c,this.sectionIndex=d,this.mark=void 0,this.cb=e,this.className=f,this.styles=g}update(a){this.data=a}attach(b){let{cfiRange:c,data:d,type:e,mark:j,cb:f,className:g,styles:i}=this,a;return"highlight"===e?a=b.highlight(c,d,f,g,i):"underline"===e?a=b.underline(c,d,f,g,i):"mark"===e&&(a=b.mark(c,d,f)),this.mark=a,this.emit(h.EVENTS.ANNOTATION.ATTACH,a),a}detach(b){let{cfiRange:c,type:d}=this,a;return b&&("highlight"===d?a=b.unhighlight(c):"underline"===d?a=b.ununderline(c):"mark"===d&&(a=b.unmark(c))),this.mark=void 0,this.emit(h.EVENTS.ANNOTATION.DETACH,a),a}text(){}}(0,c.default)(d.prototype);var e=class{constructor(a){this.rendition=a,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,b,h,i,j,k){let c=encodeURI(b+e),a=new g.default(b).spinePos,f=new d({type:e,cfiRange:b,data:h,sectionIndex:a,cb:i,className:j,styles:k});return this._annotations[c]=f,a in this._annotationsBySectionIndex?this._annotationsBySectionIndex[a].push(c):this._annotationsBySectionIndex[a]=[c],this.rendition.views().forEach(a=>{f.sectionIndex===a.index&&f.attach(a)}),f}remove(c,a){let b=encodeURI(c+a);if(b in this._annotations){let d=this._annotations[b];if(a&&d.type!==a)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(d.sectionIndex,b),d.sectionIndex===a.index&&d.detach(a)}),delete this._annotations[b]}}_removeFromAnnotationBySectionIndex(a,b){this._annotationsBySectionIndex[a]=this._annotationsAt(a).filter(a=>a!==b)}_annotationsAt(a){return this._annotationsBySectionIndex[a]}highlight(a,b,c,d,e){return this.add("highlight",a,b,c,d,e)}underline(a,b,c,d,e){return this.add("underline",a,b,c,d,e)}mark(a,b,c){return this.add("mark",a,b,c)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(b){let a=b.index;a in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[a].forEach(a=>{this._annotations[a].attach(b)})}clear(b){let a=b.index;a in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[a].forEach(a=>{this._annotations[a].detach(b)})}show(){}hide(){}};a.default=e},63261:function(d,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var e=a(2838),f=j(a(19939)),g=j(a(73415)),h=j(a(71965)),i=j(a(22502));function j(a){return a&&a.__esModule?a:{default:a}}var c=class{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new i.default}catch(a){throw Error("JSZip lib not loaded")}}open(a,b){return this.zip.loadAsync(a,{base64:b})}openUrl(a,b){return(0,f.default)(a,"binary").then((function(a){return this.zip.loadAsync(a,{base64:b})}).bind(this))}request(a,b){var c,d=new e.defer,f=new h.default(a);return b||(b=f.extension),(c="blob"==b?this.getBlob(a):this.getText(a))?c.then((function(a){let c=this.handleResponse(a,b);d.resolve(c)}).bind(this)):d.reject({message:"File not found in the epub: "+a,stack:Error().stack}),d.promise}handleResponse(a,b){var c;return"json"==b?JSON.parse(a):(0,e.isXml)(b)?(0,e.parse)(a,"text/xml"):"xhtml"==b?(0,e.parse)(a,"application/xhtml+xml"):"html"==b||"htm"==b?(0,e.parse)(a,"text/html"):a}getBlob(c,b){var d=window.decodeURIComponent(c.substr(1)),a=this.zip.file(d);if(a)return b=b||g.default.lookup(a.name),a.async("uint8array").then(function(a){return new Blob([a],{type:b})})}getText(b,d){var c=window.decodeURIComponent(b.substr(1)),a=this.zip.file(c);if(a)return a.async("string").then(function(a){return a})}getBase64(c,b){var d=window.decodeURIComponent(c.substr(1)),a=this.zip.file(d);if(a)return b=b||g.default.lookup(a.name),a.async("base64").then(function(a){return"data:"+b+";base64,"+a})}createUrl(a,d){var g,b,c=new e.defer,h=window.URL||window.webkitURL||window.mozURL,f=d&&d.base64;return a in this.urlCache?(c.resolve(this.urlCache[a]),c.promise):(f?(b=this.getBase64(a))&&b.then((function(b){this.urlCache[a]=b,c.resolve(b)}).bind(this)):(b=this.getBlob(a))&&b.then((function(b){g=h.createObjectURL(b),this.urlCache[a]=g,c.resolve(g)}).bind(this)),b||c.reject({message:"File not found in the epub: "+a,stack:Error().stack}),c.promise)}revokeUrl(b){var c=window.URL||window.webkitURL||window.mozURL,a=this.urlCache[b];a&&c.revokeObjectURL(a)}destroy(){var a=window.URL||window.webkitURL||window.mozURL;for(let b in this.urlCache)a.revokeObjectURL(b);this.zip=void 0,this.urlCache={}}};b.default=c},33630:function(e,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=w(a(48370)),f=a(2838),g=w(a(35998)),h=w(a(71965)),i=w(a(34789)),j=w(a(43425)),k=w(a(38300)),l=w(a(94774)),m=w(a(43412)),n=w(a(49920)),o=w(a(12368)),p=w(a(2087)),q=w(a(63261)),r=w(a(19939)),s=w(a(37519)),t=w(a(36294)),u=w(a(48067)),v=a(29999);function w(a){return a&&a.__esModule?a:{default:a}}let x="META-INF/container.xml",y={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class c{constructor(a,b){void 0===b&&"string"!=typeof a&&a instanceof Blob== !1&&a instanceof ArrayBuffer== !1&&(b=a,a=void 0),this.settings=(0,f.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),(0,f.extend)(this.settings,b),this.opening=new f.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new f.defer,spine:new f.defer,metadata:new f.defer,cover:new f.defer,navigation:new f.defer,pageList:new f.defer,resources:new f.defer,displayOptions:new f.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||r.default,this.spine=new i.default,this.locations=new j.default(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),a&&this.open(a,this.settings.openAs).catch(c=>{var b=Error("Cannot load book at "+a);this.emit(v.EVENTS.BOOK.OPEN_FAILED,b)})}open(a,d){var b,c=d||this.determineType(a);return c===y.BINARY?(this.archived=!0,this.url=new g.default("/",""),b=this.openEpub(a)):c===y.BASE64?(this.archived=!0,this.url=new g.default("/",""),b=this.openEpub(a,c)):c===y.EPUB?(this.archived=!0,this.url=new g.default("/",""),b=this.request(a,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):c==y.OPF?(this.url=new g.default(a),b=this.openPackaging(this.url.Path.toString())):c==y.MANIFEST?(this.url=new g.default(a),b=this.openManifest(this.url.Path.toString())):(this.url=new g.default(a),b=this.openContainer(x).then(this.openPackaging.bind(this))),b}openEpub(a,b){return this.unarchive(a,b||this.settings.encoding).then(()=>this.openContainer(x)).then(a=>this.openPackaging(a))}openContainer(a){return this.load(a).then(a=>(this.container=new k.default(a),this.resolve(this.container.packagePath)))}openPackaging(a){return this.path=new h.default(a),this.load(a).then(a=>(this.packaging=new l.default(a),this.unpack(this.packaging)))}openManifest(a){return this.path=new h.default(a),this.load(a).then(a=>(this.packaging=new l.default,this.packaging.load(a),this.unpack(this.packaging)))}load(b){var a=this.resolve(b);return this.archived?this.archive.request(a):this.request(a,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(a,c){if(a){var b=a;return a.indexOf("://")> -1?a:(this.path&&(b=this.path.resolve(a)),!1!=c&&this.url&&(b=this.url.resolve(b)),b)}}canonical(a){var b=a;return a?this.settings.canonical?this.settings.canonical(a):this.resolve(a,!0):""}determineType(b){var c,d,a;return"base64"===this.settings.encoding?y.BASE64:"string"!=typeof b?y.BINARY:((a=new g.default(b).path().extension)&&(a=a.replace(/\?.*$/,"")),a)?"epub"===a?y.EPUB:"opf"===a?y.OPF:"json"===a?y.MANIFEST:void 0:y.DIRECTORY}unpack(a){this.package=a,""===this.packaging.metadata.layout?this.load(this.url.resolve("META-INF/com.apple.ibooks.display-options.xml")).then(a=>{this.displayOptions=new u.default(a),this.loading.displayOptions.resolve(this.displayOptions)}).catch(a=>{this.displayOptions=new u.default,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new u.default,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new n.default(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&"none"!=this.settings.replacements?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(a=>{console.error(a)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(a){let b=a.navPath||a.ncxPath,c=a.toc;return c?new Promise((b,d)=>{this.navigation=new m.default(c),a.pageList&&(this.pageList=new o.default(a.pageList)),b(this.navigation)}):b?this.load(b,"xml").then(a=>(this.navigation=new m.default(a),this.pageList=new o.default(a),this.navigation)):new Promise((a,b)=>{this.navigation=new m.default,this.pageList=new o.default,a(this.navigation)})}section(a){return this.spine.get(a)}renderTo(a,b){return this.rendition=new p.default(this,b),this.rendition.attachTo(a),this.rendition}setRequestCredentials(a){this.settings.requestCredentials=a}setRequestHeaders(a){this.settings.requestHeaders=a}unarchive(a,b){return this.archive=new q.default,this.archive.open(a,b)}store(a){let c=this.settings.replacements&&"none"!==this.settings.replacements,d=this.url,b=this.settings.requestMethod||r.default.bind(this);return this.storage=new t.default(a,b,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let a=(b,a)=>{a.output=this.resources.substitute(b,a.url)};this.resources.settings.replacements=c||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new g.default("/",""),this.spine.hooks.serialize.register(a)}),this.storage.on("online",()=>{this.url=d,this.spine.hooks.serialize.deregister(a)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((b,a)=>{a.output=this.resources.substitute(b,a.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(b){var c=new s.default(b),a=this.spine.get(c.spinePos),d=this.load.bind(this);return a?a.load(d).then(function(b){return c.toRange(a.document)}):new Promise((b,a)=>{a("CFI could not be found")})}key(a){return`epubjs:${v.EPUBJS_VERSION}:${a||this.packaging.metadata.identifier||this.url.filename}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}(0,d.default)(c.prototype),b.default=c},38300:function(e,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,f=(a=c(69294),a&&a.__esModule?a:{default:a}),g=c(2838),d=class{constructor(a){this.packagePath="",this.directory="",this.encoding="",a&&this.parse(a)}parse(a){var b;if(!a)throw Error("Container File Not Found");if(!(b=(0,g.qs)(a,"rootfile")))throw Error("No RootFile Found");this.packagePath=b.getAttribute("full-path"),this.directory=f.default.dirname(this.packagePath),this.encoding=a.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}};b.default=d},95490:function(g,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var e=m(a(48370)),h=a(2838),i=m(a(37519)),j=m(a(53191)),k=a(28577),l=a(29999);function m(a){return a&&a.__esModule?a:{default:a}}let c="undefined"!=typeof navigator,f=c&&/Chrome/.test(navigator.userAgent),n=c&&!f&&/AppleWebKit/.test(navigator.userAgent);class d{constructor(a,b,c,d){this.epubcfi=new i.default,this.document=a,this.documentElement=this.document.documentElement,this.content=b||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=d||0,this.cfiBase=c||"",this.epubReadingSystem("epub.js",l.EPUBJS_VERSION),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return l.DOM_EVENTS}width(a){var b=this.content;return a&&(0,h.isNumber)(a)&&(a+="px"),a&&(b.style.width=a),parseInt(this.window.getComputedStyle(b).width)}height(a){var b=this.content;return a&&(0,h.isNumber)(a)&&(a+="px"),a&&(b.style.height=a),parseInt(this.window.getComputedStyle(b).height)}contentWidth(a){var b=this.content||this.document.body;return a&&(0,h.isNumber)(a)&&(a+="px"),a&&(b.style.width=a),parseInt(this.window.getComputedStyle(b).width)}contentHeight(a){var b=this.content||this.document.body;return a&&(0,h.isNumber)(a)&&(a+="px"),a&&(b.style.height=a),parseInt(this.window.getComputedStyle(b).height)}textWidth(){let e,a,c=this.document.createRange(),d=this.content||this.document.body,b=(0,h.borders)(d);return c.selectNodeContents(d),a=c.getBoundingClientRect().width,b&&b.width&&(a+=b.width),Math.round(a)}textHeight(){let c,d,a=this.document.createRange(),b=this.content||this.document.body;return a.selectNodeContents(b),Math.round(a.getBoundingClientRect().bottom)}scrollWidth(){return this.documentElement.scrollWidth}scrollHeight(){return this.documentElement.scrollHeight}overflow(a){return a&&(this.documentElement.style.overflow=a),this.window.getComputedStyle(this.documentElement).overflow}overflowX(a){return a&&(this.documentElement.style.overflowX=a),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(a){return a&&(this.documentElement.style.overflowY=a),this.window.getComputedStyle(this.documentElement).overflowY}css(a,c,d){var b=this.content||this.document.body;return c?b.style.setProperty(a,c,d?"important":""):b.style.removeProperty(a),this.window.getComputedStyle(b)[a]}viewport(m){var c=this.document.querySelector("meta[name='viewport']"),d={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},b=[],a={};if(c&&c.hasAttribute("content")){let e=c.getAttribute("content"),f=e.match(/width\s*=\s*([^,]*)/),g=e.match(/height\s*=\s*([^,]*)/),i=e.match(/initial-scale\s*=\s*([^,]*)/),j=e.match(/minimum-scale\s*=\s*([^,]*)/),k=e.match(/maximum-scale\s*=\s*([^,]*)/),l=e.match(/user-scalable\s*=\s*([^,]*)/);f&&f.length&& void 0!==f[1]&&(d.width=f[1]),g&&g.length&& void 0!==g[1]&&(d.height=g[1]),i&&i.length&& void 0!==i[1]&&(d.scale=i[1]),j&&j.length&& void 0!==j[1]&&(d.minimum=j[1]),k&&k.length&& void 0!==k[1]&&(d.maximum=k[1]),l&&l.length&& void 0!==l[1]&&(d.scalable=l[1])}return a=(0,h.defaults)(m||{},d),m&&(a.width&&b.push("width="+a.width),a.height&&b.push("height="+a.height),a.scale&&b.push("initial-scale="+a.scale),"no"===a.scalable?(b.push("minimum-scale="+a.scale),b.push("maximum-scale="+a.scale),b.push("user-scalable="+a.scalable)):(a.scalable&&b.push("user-scalable="+a.scalable),a.minimum&&b.push("minimum-scale="+a.minimum),a.maximum&&b.push("minimum-scale="+a.maximum)),c||((c=this.document.createElement("meta")).setAttribute("name","viewport"),this.document.querySelector("head").appendChild(c)),c.setAttribute("content",b.join(", ")),this.window.scrollTo(0,0)),a}expand(){this.emit(l.EVENTS.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),"undefined"==typeof ResizeObserver?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let a=this.textWidth(),b=this.textHeight();(a!=this._size.width||b!=this._size.height)&&(this._size={width:a,height:b},this.onResize&&this.onResize(this._size),this.emit(l.EVENTS.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&& !1===this.active?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let a=this.content;a.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",a.style.transitionDuration="0.001ms",a.style.transitionTimingFunction="linear",a.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var a,d=this.document.styleSheets,e=(function(a){a.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),c=0;c<d.length;c+=1){try{a=d[c].cssRules}catch(f){return}if(!a)return;for(var b=0;b<a.length;b+=1)a[b].media&&this.window.matchMedia(a[b].media.mediaText).addListener(e)}}resizeObservers(){this.observer=new ResizeObserver(a=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(a=>{this.resizeCheck()}),this.observer.observe(this.document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}imageLoadListeners(){for(var a,c=this.document.querySelectorAll("img"),b=0;b<c.length;b++)void 0!==(a=c[b]).naturalWidth&&0===a.naturalWidth&&(a.onload=this.expand.bind(this))}fontLoadListeners(){this.document&&this.document.fonts&&this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(d,l){var b,e={left:0,top:0};if(!this.document)return e;if(this.epubcfi.isCfiString(d)){let a=new i.default(d).toRange(this.document,l);if(a){try{if(!a.endContainer||a.startContainer==a.endContainer&&a.startOffset==a.endOffset){let g=a.startContainer.textContent.indexOf(" ",a.startOffset);-1==g&&(g=a.startContainer.textContent.length),a.setEnd(a.startContainer,g)}}catch(m){console.error("setting end offset to start container length failed",m)}if(a.startContainer.nodeType===Node.ELEMENT_NODE)b=a.startContainer.getBoundingClientRect(),e.left=b.left,e.top=b.top;else if(n){let c=a.startContainer,f=new Range;try{1===c.nodeType?b=c.getBoundingClientRect():a.startOffset+2<c.length?(f.setStart(c,a.startOffset),f.setEnd(c,a.startOffset+2),b=f.getBoundingClientRect()):a.startOffset-2>0?(f.setStart(c,a.startOffset-2),f.setEnd(c,a.startOffset),b=f.getBoundingClientRect()):b=c.parentNode.getBoundingClientRect()}catch(j){console.error(j,j.stack)}}else b=a.getBoundingClientRect()}}else if("string"==typeof d&&d.indexOf("#")> -1){let o=d.substring(d.indexOf("#")+1),h=this.document.getElementById(o);if(h){if(n){let k=new Range;k.selectNode(h),b=k.getBoundingClientRect()}else b=h.getBoundingClientRect()}}return b&&(e.left=b.left,e.top=b.top),e}addStylesheet(a){return new Promise((function(c,d){var b,e=!1;if(!this.document){c(!1);return}if(b=this.document.querySelector("link[href='"+a+"']")){c(!0);return}(b=this.document.createElement("link")).type="text/css",b.rel="stylesheet",b.href=a,b.onload=b.onreadystatechange=function(){e||this.readyState&&"complete"!=this.readyState||(e=!0,setTimeout(()=>{c(!0)},1))},this.document.head.appendChild(b)}).bind(this))}_getStylesheetNode(a){var b;return a="epubjs-inserted-css-"+(a||""),!!this.document&&((b=this.document.getElementById(a))||((b=this.document.createElement("style")).id=a,this.document.head.appendChild(b)),b)}addStylesheetCss(a,b){var c;return!!this.document&&!!a&&(this._getStylesheetNode(b).innerHTML=a,!0)}addStylesheetRules(a,h){var e;if(this.document&&a&&0!==a.length){if(e=this._getStylesheetNode(h).sheet,"[object Array]"===Object.prototype.toString.call(a))for(var c=0,i=a.length;c<i;c++){var d=1,b=a[c],j=a[c][0],g="";"[object Array]"===Object.prototype.toString.call(b[1][0])&&(b=b[1],d=0);for(var k=b.length;d<k;d++){var f=b[d];g+=f[0]+":"+f[1]+(f[2]?" !important":"")+";\n"}e.insertRule(j+"{"+g+"}",e.cssRules.length)}else{let l=Object.keys(a);l.forEach(c=>{let b=a[c];if(Array.isArray(b))b.forEach(a=>{let b=Object.keys(a),d=b.map(b=>`${b}:${a[b]}`).join(";");e.insertRule(`${c}{${d}}`,e.cssRules.length)});else{let d=Object.keys(b),f=d.map(a=>`${a}:${b[a]}`).join(";");e.insertRule(`${c}{${f}}`,e.cssRules.length)}})}}}addScript(a){return new Promise((function(c,d){var b,e=!1;if(!this.document){c(!1);return}(b=this.document.createElement("script")).type="text/javascript",b.async=!0,b.src=a,b.onload=b.onreadystatechange=function(){e||this.readyState&&"complete"!=this.readyState||(e=!0,setTimeout(function(){c(!0)},1))},this.document.head.appendChild(b)}).bind(this))}addClass(b){var a;this.document&&(a=this.content||this.document.body)&&a.classList.add(b)}removeClass(b){var a;this.document&&(a=this.content||this.document.body)&&a.classList.remove(b)}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),l.DOM_EVENTS.forEach(function(a){this.document.addEventListener(a,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(l.DOM_EVENTS.forEach(function(a){this.document.removeEventListener(a,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(a){this.emit(a.type,a)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(a){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var a=this.window.getSelection();this.triggerSelectedEvent(a)}).bind(this),250)}triggerSelectedEvent(a){var b,c;a&&a.rangeCount>0&&!(b=a.getRangeAt(0)).collapsed&&(c=new i.default(b,this.cfiBase).toString(),this.emit(l.EVENTS.CONTENTS.SELECTED,c),this.emit(l.EVENTS.CONTENTS.SELECTED_RANGE,b))}range(a,b){return new i.default(a).toRange(this.document,b)}cfiFromRange(a,b){return new i.default(a,this.cfiBase,b).toString()}cfiFromNode(a,b){return new i.default(a,this.cfiBase,b).toString()}map(a){return new j.default(a).section()}size(a,b){var c={scale:1,scalable:"no"};this.layoutStyle("scrolling"),a>=0&&(this.width(a),c.width=a,this.css("padding","0 "+a/12+"px")),b>=0&&(this.height(b),c.height=b),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(c)}columns(b,c,g,a,d){let e=(0,h.prefixed)("column-axis"),i=(0,h.prefixed)("column-gap"),j=(0,h.prefixed)("column-width"),k=(0,h.prefixed)("column-fill"),l=this.writingMode(),f=0===l.indexOf("vertical")?"vertical":"horizontal";this.layoutStyle("paginated"),"rtl"===d&&"horizontal"===f&&this.direction(d),this.width(b),this.height(c),this.viewport({width:b,height:c,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),"vertical"===f?(this.css("padding-top",a/2+"px",!0),this.css("padding-bottom",a/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(e,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",a/2+"px",!0),this.css("padding-right",a/2+"px",!0),this.css(e,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(k,"auto"),this.css(i,a+"px"),this.css(j,g+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(d,a,b){var c="";this.css("transform-origin","top left"),(a>=0||b>=0)&&(c=" translate("+(a||0)+"px, "+(b||0)+"px )"),this.css("transform","scale("+d+")"+c)}fit(d,i,e){var f=this.viewport(),a=parseInt(f.width),c=parseInt(f.height),g=d/a,h=i/c,b=g<h?g:h;if(this.layoutStyle("paginated"),this.width(a),this.height(c),this.overflow("hidden"),this.scaler(b,0,0),this.css("background-size",a*b+"px "+c*b+"px"),this.css("background-color","transparent"),e&&e.properties.includes("page-spread-left")){var j=d-a*b;this.css("margin-left",j+"px")}}direction(a){this.documentElement&&(this.documentElement.style.direction=a)}mapPage(a,b,c,d,e){return new j.default(b,e).page(this,a,c,d)}linksHandler(){(0,k.replaceLinks)(this.content,a=>{this.emit(l.EVENTS.CONTENTS.LINK_CLICKED,a)})}writingMode(a){let b=(0,h.prefixed)("writing-mode");return a&&this.documentElement&&(this.documentElement.style[b]=a),this.window.getComputedStyle(this.documentElement)[b]||""}layoutStyle(a){return a&&(this._layoutStyle=a,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(a,b){return navigator.epubReadingSystem={name:a,version:b,layoutStyle:this.layoutStyle(),hasFeature:function(a){switch(a){case"dom-manipulation":case"layout-changes":case"touch-events":case"mouse-events":case"keyboard-events":return!0;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}(0,e.default)(d.prototype),b.default=d},48067:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=b(2838),c=class{constructor(a){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",a&&this.parse(a)}parse(a){if(!a)return this;let b=(0,e.qs)(a,"display_options");if(!b)return this;let c=(0,e.qsa)(b,"option");return c.forEach(b=>{let a="";switch(b.childNodes.length&&(a=b.childNodes[0].nodeValue),b.attributes.name.value){case"interactive":this.interactive=a;break;case"fixed-layout":this.fixedLayout=a;break;case"open-to-spread":this.openToSpread=a;break;case"orientation-lock":this.orientationLock=a}}),this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}};a.default=c},33889:function(k,c,a){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(33630)),g=d(a(2087)),h=d(a(37519)),i=d(a(95490)),j=function(a,f){if(!f&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=l(f);if(c&&c.has(a))return c.get(a);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in a)if("default"!==b&&Object.prototype.hasOwnProperty.call(a,b)){var e=g?Object.getOwnPropertyDescriptor(a,b):null;e&&(e.get||e.set)?Object.defineProperty(d,b,e):d[b]=a[b]}return d.default=a,c&&c.set(a,d),d}(a(2838)),e=a(29999);function l(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(l=function(a){return a?c:b})(a)}function d(a){return a&&a.__esModule?a:{default:a}}function b(a,b){return new f.default(a,b)}d(a(4711)),d(a(7977)),d(a(87276)),b.VERSION=e.EPUBJS_VERSION,void 0!==a.g&&(a.g.EPUBJS_VERSION=e.EPUBJS_VERSION),b.Book=f.default,b.Rendition=g.default,b.Contents=i.default,b.CFI=h.default,b.utils=j,c.default=b},37519:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=b(2838);class c{constructor(a,b,f){var d;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof c))return new c(a,b,f);if("string"==typeof b?this.base=this.parseComponent(b):"object"==typeof b&&b.steps&&(this.base=b),"string"===(d=this.checkType(a)))return this.str=a,(0,e.extend)(this,this.parse(a));if("range"===d)return(0,e.extend)(this,this.fromRange(a,this.base,f));if("node"===d)return(0,e.extend)(this,this.fromNode(a,this.base,f));else if("EpubCFI"===d&&a.path)return a;else if(!a)return this;else throw TypeError("not a valid argument for EpubCFI")}checkType(a){return this.isCfiString(a)?"string":a&&"object"==typeof a&&("Range"===(0,e.type)(a)|| void 0!==a.startContainer)?"range":a&&"object"==typeof a&& void 0!==a.nodeType?"node":!!a&&"object"==typeof a&&a instanceof c&&"EpubCFI"}parse(a){var d,e,c,b={spinePos:-1,range:!1,base:{},path:{},start:null,end:null};return"string"!=typeof a?{spinePos:-1}:(0===a.indexOf("epubcfi(")&&")"===a[a.length-1]&&(a=a.slice(8,a.length-1)),d=this.getChapterComponent(a))?(b.base=this.parseComponent(d),e=this.getPathComponent(a),b.path=this.parseComponent(e),(c=this.getRange(a))&&(b.range=!0,b.start=this.parseComponent(c[0]),b.end=this.parseComponent(c[1])),b.spinePos=b.base.steps[1].index,b):{spinePos:-1}}parseComponent(e){var d,a={steps:[],terminal:{offset:null,assertion:null}},b=e.split(":"),c=b[0].split("/");return b.length>1&&(d=b[1],a.terminal=this.parseTerminal(d)),""===c[0]&&c.shift(),a.steps=c.map((function(a){return this.parseStep(a)}).bind(this)),a}parseStep(e){var b,a,c,d,f;if((d=e.match(/\[(.*)\]/))&&d[1]&&(f=d[1]),!isNaN(a=parseInt(e)))return a%2==0?(b="element",c=a/2-1):(b="text",c=(a-1)/2),{type:b,index:c,id:f||null}}parseTerminal(b){var a,d,c=b.match(/\[(.*)\]/);return c&&c[1]?(a=parseInt(b.split("[")[0]),d=c[1]):a=parseInt(b),(0,e.isNumber)(a)||(a=null),{offset:a,assertion:d}}getChapterComponent(a){return a.split("!")[0]}getPathComponent(b){var a=b.split("!");if(a[1])return a[1].split(",")[0]}getRange(b){var a=b.split(",");return 3===a.length&&[a[1],a[2]]}getCharecterOffsetComponent(a){return a.split(":")[1]||""}joinSteps(a){return a?a.map(function(a){var b="";return"element"===a.type&&(b+=(a.index+1)*2),"text"===a.type&&(b+=1+2*a.index),a.id&&(b+="["+a.id+"]"),b}).join("/"):""}segmentString(a){var b="/";return b+=this.joinSteps(a.steps),a.terminal&&null!=a.terminal.offset&&(b+=":"+a.terminal.offset),a.terminal&&null!=a.terminal.assertion&&(b+="["+a.terminal.assertion+"]"),b}toString(){var a="epubcfi(";return a+=this.segmentString(this.base),a+="!",a+=this.segmentString(this.path),this.range&&this.start&&(a+=",",a+=this.segmentString(this.start)),this.range&&this.end&&(a+=",",a+=this.segmentString(this.end)),a+=")"}compare(a,b){if("string"==typeof a&&(a=new c(a)),"string"==typeof b&&(b=new c(b)),a.spinePos>b.spinePos)return 1;if(a.spinePos<b.spinePos)return -1;a.range?(e=a.path.steps.concat(a.start.steps),g=a.start.terminal):(e=a.path.steps,g=a.path.terminal),b.range?(f=b.path.steps.concat(b.start.steps),h=b.start.terminal):(f=b.path.steps,h=b.path.terminal);for(var e,f,g,h,d=0;d<e.length;d++){if(!e[d])return -1;if(!f[d]||e[d].index>f[d].index)return 1;if(e[d].index<f[d].index)return -1}return e.length<f.length?-1:g.offset>h.offset?1:g.offset<h.offset?-1:0}step(a){var b=3===a.nodeType?"text":"element";return{id:a.id,tagName:a.tagName,type:b,index:this.position(a)}}filteredStep(d,b){var c,a=this.filter(d,b);if(a)return c=3===a.nodeType?"text":"element",{id:a.id,tagName:a.tagName,type:c,index:this.filteredPosition(a,b)}}pathTo(f,c,d){for(var e,b={steps:[],terminal:{offset:null,assertion:null}},a=f;a&&a.parentNode&&9!=a.parentNode.nodeType;)(e=d?this.filteredStep(a,d):this.step(a))&&b.steps.unshift(e),a=a.parentNode;return null!=c&&c>=0&&(b.terminal.offset=c,"text"!=b.steps[b.steps.length-1].type&&b.steps.push({type:"text",index:0})),b}equalStep(a,b){return!!a&&!!b&&a.index===b.index&&a.id===b.id&&a.type===b.type}fromRange(e,g,b){var a={range:!1,base:{},path:{},start:null,end:null},f=e.startContainer,j=e.endContainer,d=e.startOffset,i=e.endOffset,h=!1;if(b&&(h=null!=f.ownerDocument.querySelector("."+b)),"string"==typeof g?(a.base=this.parseComponent(g),a.spinePos=a.base.steps[1].index):"object"==typeof g&&(a.base=g),e.collapsed)h&&(d=this.patchOffset(f,d,b)),a.path=this.pathTo(f,d,b);else{a.range=!0,h&&(d=this.patchOffset(f,d,b)),a.start=this.pathTo(f,d,b),h&&(i=this.patchOffset(j,i,b)),a.end=this.pathTo(j,i,b),a.path={steps:[],terminal:null};var c,k=a.start.steps.length;for(c=0;c<k;c++)if(this.equalStep(a.start.steps[c],a.end.steps[c]))c===k-1?a.start.terminal===a.end.terminal&&(a.path.steps.push(a.start.steps[c]),a.range=!1):a.path.steps.push(a.start.steps[c]);else break;a.start.steps=a.start.steps.slice(a.path.steps.length),a.end.steps=a.end.steps.slice(a.path.steps.length)}return a}fromNode(c,b,d){var a={range:!1,base:{},path:{},start:null,end:null};return"string"==typeof b?(a.base=this.parseComponent(b),a.spinePos=a.base.steps[1].index):"object"==typeof b&&(a.base=b),a.path=this.pathTo(c,null,d),a}filter(a,h){var b,c,g,d,e,f=!1;return(3===a.nodeType?(f=!0,g=a.parentNode,b=a.parentNode.classList.contains(h)):(f=!1,b=a.classList.contains(h)),b&&f)?(d=g.previousSibling,e=g.nextSibling,d&&3===d.nodeType?c=d:e&&3===e.nodeType&&(c=e),c)?c:a:(!b||!!f)&&a}patchOffset(b,e,d){if(3!=b.nodeType)throw Error("Anchor must be a text node");var a=b,c=e;for(b.parentNode.classList.contains(d)&&(a=b.parentNode);a.previousSibling;){if(1===a.previousSibling.nodeType){if(a.previousSibling.classList.contains(d))c+=a.previousSibling.textContent.length;else break}else c+=a.previousSibling.textContent.length;a=a.previousSibling}return c}normalizedMap(c,g,h){var b,f,a,d={},e=-1,i=c.length;for(a=0;a<i;a++)1===(b=c[a].nodeType)&&c[a].classList.contains(h)&&(b=3),a>0&&3===b&&3===f?d[a]=e:g===b&&(e+=1,d[a]=e),f=b;return d}position(a){var b,c;return 1===a.nodeType?((b=a.parentNode.children)||(b=(0,e.findChildren)(a.parentNode)),c=Array.prototype.indexOf.call(b,a)):c=(b=this.textNodes(a.parentNode)).indexOf(a),c}filteredPosition(a,c){var b,e,d;return 1===a.nodeType?(b=a.parentNode.children,d=this.normalizedMap(b,1,c)):(b=a.parentNode.childNodes,a.parentNode.classList.contains(c)&&(b=(a=a.parentNode).parentNode.childNodes),d=this.normalizedMap(b,3,c)),d[Array.prototype.indexOf.call(b,a)]}stepsToXpath(a){var b=[".","*"];return a.forEach(function(a){var c=a.index+1;a.id?b.push("*[position()="+c+" and @id='"+a.id+"']"):"text"===a.type?b.push("text()["+c+"]"):b.push("*["+c+"]")}),b.join("/")}stepsToQuerySelector(a){var b=["html"];return a.forEach(function(a){var c=a.index+1;a.id?b.push("#"+a.id):"text"===a.type||b.push("*:nth-child("+c+")")}),b.join(">")}textNodes(a,b){return Array.prototype.slice.call(a.childNodes).filter(function(a){return 3===a.nodeType||!!(b&&a.classList.contains(b))})}walkToNode(d,g,h){var j,b,c,f=g||document,a=f.documentElement,i=d.length;for(c=0;c<i&&("element"===(b=d[c]).type?a=b.id?f.getElementById(b.id):(a.children||(0,e.findChildren)(a))[b.index]:"text"===b.type&&(a=this.textNodes(a,h)[b.index]),a);c++);return a}findNode(b,f,c){var d,e,a=f||document;return c|| void 0===a.evaluate?d=c?this.walkToNode(b,a,c):this.walkToNode(b,a):(e=this.stepsToXpath(b),d=a.evaluate(e,a,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),d}fixMiss(b,c,j,g){var a,h,d=this.findNode(b.slice(0,-1),j,g),i=d.childNodes,e=this.normalizedMap(i,3,g),k=b[b.length-1].index;for(let f in e){if(!e.hasOwnProperty(f))return;if(e[f]===k){if(c>(h=(a=i[f]).textContent.length))c-=h;else{d=1===a.nodeType?a.childNodes[0]:a;break}}}return{container:d,offset:c}}toRange(m,c){var a,d,i,g,j,k,l,f,b=m||document,h=!!c&&null!=b.querySelector("."+c);if(a=void 0!==b.createRange?b.createRange():new e.RangeObject,this.range?(d=this.start,k=this.path.steps.concat(d.steps),g=this.findNode(k,b,h?c:null),i=this.end,l=this.path.steps.concat(i.steps),j=this.findNode(l,b,h?c:null)):(d=this.path,k=this.path.steps,g=this.findNode(this.path.steps,b,h?c:null)),!g)return console.log("No startContainer found for",this.toString()),null;try{null!=d.terminal.offset?a.setStart(g,d.terminal.offset):a.setStart(g,0)}catch(n){f=this.fixMiss(k,d.terminal.offset,b,h?c:null),a.setStart(f.container,f.offset)}if(j)try{null!=i.terminal.offset?a.setEnd(j,i.terminal.offset):a.setEnd(j,0)}catch(o){f=this.fixMiss(l,this.end.terminal.offset,b,h?c:null),a.setEnd(f.container,f.offset)}return a}isCfiString(a){return"string"==typeof a&&0===a.indexOf("epubcfi(")&&")"===a[a.length-1]}generateChapterComponent(c,d,b){var e=parseInt(d),a="/"+(c+1)*2+"/";return a+=(e+1)*2,b&&(a+="["+b+"]"),a}collapse(a){this.range&&(this.range=!1,a?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}a.default=c},97540:function(e,b,a){"use strict";b.ZP=void 0,f(a(33630)),f(a(37519)),f(a(2087)),f(a(95490)),f(a(55651));var c=f(a(33889));function f(a){return a&&a.__esModule?a:{default:a}}var d=c.default;b.ZP=d},55651:function(f,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,g=c(2838),h=c(29999),e=(a=c(48370),a&&a.__esModule?a:{default:a});class d{constructor(a){this.settings=a,this.name=a.layout||"reflowable",this._spread="none"!==a.spread,this._minSpreadWidth=a.minSpreadWidth||800,this._evenSpreads=a.evenSpreads||!1,"scrolled"===a.flow||"scrolled-continuous"===a.flow||"scrolled-doc"===a.flow?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(a){return void 0!==a&&("scrolled"===a||"scrolled-continuous"===a||"scrolled-doc"===a?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(a,b){return a&&(this._spread="none"!==a,this.update({spread:this._spread})),b>=0&&(this._minSpreadWidth=b),this._spread}calculate(k,l,i){var d,f,e,g,b=1,c=i||0,a=k,j=l,h=Math.floor(a/12);b=this._spread&&a>=this._minSpreadWidth?2:1,"reflowable"!==this.name||"paginated"!==this._flow||i>=0||(c=h%2==0?h:h-1),"pre-paginated"===this.name&&(c=0),b>1?e=(d=a/b-c)+c:(d=a,e=a),"pre-paginated"===this.name&&b>1&&(a=d),f=d*b+c,g=a,this.width=a,this.height=j,this.spreadWidth=f,this.pageWidth=e,this.delta=g,this.columnWidth=d,this.gap=c,this.divisor=b,this.update({width:a,height:j,spreadWidth:f,pageWidth:e,delta:g,columnWidth:d,gap:c,divisor:b})}format(a,c,b){var d;return"pre-paginated"===this.name?a.fit(this.columnWidth,this.height,c):"paginated"===this._flow?a.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):b&&"horizontal"===b?a.size(null,this.height):a.size(this.width,null)}count(d,a){let b,c;return"pre-paginated"===this.name?(b=1,c=1):c="paginated"===this._flow?(b=Math.ceil(d/(a=a||this.delta)))*this.divisor:b=Math.ceil(d/(a=a||this.height)),{spreads:b,pages:c}}update(a){if(Object.keys(a).forEach(b=>{this.props[b]===a[b]&&delete a[b]}),Object.keys(a).length>0){let b=(0,g.extend)(this.props,a);this.emit(h.EVENTS.LAYOUT.UPDATED,b,a)}}}(0,e.default)(d.prototype),b.default=d},43425:function(e,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=a(2838),g=j(a(29982)),h=j(a(37519)),i=a(29999),d=j(a(48370));function j(a){return a&&a.__esModule?a:{default:a}}class c{constructor(a,b,c){this.spine=a,this.request=b,this.pause=c||100,this.q=new g.default(this),this.epubcfi=new h.default,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(a){return a&&(this.break=a),this.q.pause(),this.spine.each((function(a){a.linear&&this.q.enqueue(this.process.bind(this),a)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(a){return a.load(this.request).then((function(b){var c=new f.defer,d=this.parse(b,a.cfiBase);return this._locations=this._locations.concat(d),a.unload(),this.processingTimeout=setTimeout(()=>c.resolve(d),this.pause),c.promise}).bind(this))}parse(d,e,g){var a,b,c=[],i=d.ownerDocument,j=(0,f.qs)(i,"body"),k=0,m=g||this.break;if((0,f.sprint)(j,(function(g){var i,f=g.length,d=0;if(0===g.textContent.trim().length)return!1;for(0==k&&((a=this.createRange()).startContainer=g,a.startOffset=0),(i=m-k)>f&&(k+=f,d=f);d<f;)if(i=m-k,0===k&&(d+=1,(a=this.createRange()).startContainer=g,a.startOffset=d),d+i>=f)k+=f-d,d=f;else{d+=i,a.endContainer=g,a.endOffset=d;let j=new h.default(a,e).toString();c.push(j),k=0}b=g}).bind(this)),a&&a.startContainer&&b){a.endContainer=b,a.endOffset=b.length;let l=new h.default(a,e).toString();c.push(l),k=0}return c}generateFromWords(a,b,c){var d=a?new h.default(a):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(a){a.linear&&(d?a.index>=d.spinePos&&this.q.enqueue(this.processWords.bind(this),a,b,d,c):this.q.enqueue(this.processWords.bind(this),a,b,d,c))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(b,c,d,a){return a&&this._locationsWords.length>=a?Promise.resolve():b.load(this.request).then((function(g){var h=new f.defer,e=this.parseWords(g,b,c,d),i=a-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(e.length>=a?e.slice(0,i):e),b.unload(),this.processingTimeout=setTimeout(()=>h.resolve(e),this.pause),h.promise}).bind(this))}countWords(a){return(a=(a=(a=a.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[ ]{2,}/gi," ")).replace(/\n /,"\n")).split(" ").length}parseWords(c,b,d,a){var k,e,l=b.cfiBase,g=[],i=c.ownerDocument,j=(0,f.qs)(i,"body"),m=d,n=!a||a.spinePos!==b.index;return a&&b.index===a.spinePos&&(e=a.findNode(a.range?a.path.steps.concat(a.start.steps):a.path.steps,c.ownerDocument)),(0,f.sprint)(j,(function(b){if(!n){if(b!==e)return!1;n=!0}if(b.textContent.length<10&&0===b.textContent.trim().length)return!1;var d,a=this.countWords(b.textContent),c=0;if(0===a)return!1;for((d=m-this._wordCounter)>a&&(this._wordCounter+=a,c=a);c<a;)if(c+(d=m-this._wordCounter)>=a)this._wordCounter+=a-c,c=a;else{c+=d;let f=new h.default(b,l);g.push({cfi:f.toString(),wordCount:this._wordCounter}),this._wordCounter=0}k=b}).bind(this)),g}locationFromCfi(a){let b;return(h.default.prototype.isCfiString(a)&&(a=new h.default(a)),0===this._locations.length)?-1:(b=(0,f.locationOf)(a,this._locations,this.epubcfi.compare))>this.total?this.total:b}percentageFromCfi(a){if(0===this._locations.length)return null;var b=this.locationFromCfi(a);return this.percentageFromLocation(b)}percentageFromLocation(a){return a&&this.total?a/this.total:0}cfiFromLocation(a){var b=-1;return"number"!=typeof a&&(a=parseInt(a)),a>=0&&a<this._locations.length&&(b=this._locations[a]),b}cfiFromPercentage(a){let b;if(a>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),a>=1){let c=new h.default(this._locations[this.total]);return c.collapse(),c.toString()}return b=Math.ceil(this.total*a),this.cfiFromLocation(b)}load(a){return"string"==typeof a?this._locations=JSON.parse(a):this._locations=a,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(a){var b;if("string"==typeof a)this._currentCfi=a;else{if("number"!=typeof a)return;this._current=a}0!==this._locations.length&&("string"==typeof a?(b=this.locationFromCfi(a),this._current=b):b=a,this.emit(i.EVENTS.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(b)}))}get currentLocation(){return this._current}set currentLocation(a){this.setCurrent(a)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}(0,d.default)(c.prototype),b.default=c},87276:function(e,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=a(2838),c=j(a(7977)),g=j(a(43670)),h=a(29999),i=j(a(23279));function j(a){return a&&a.__esModule?a:{default:a}}class d extends c.default{constructor(a){super(a),this.name="continuous",this.settings=(0,f.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),(0,f.extend)(this.settings,a.settings||{}),"undefined"!=a.settings.gap&&0===a.settings.gap&&(this.settings.gap=a.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(a,b){return c.default.prototype.display.call(this,a,b).then((function(){return this.fill()}).bind(this))}fill(a){var b=a||new f.defer;return this.q.enqueue(()=>this.check()).then(a=>{a?this.fill(b):b.resolve()}),b.promise}moveTo(a){var b=0,c=0;this.isPaginated?(b=Math.floor(a.left/this.layout.delta)*this.layout.delta,this.settings.offsetDelta):(c=a.top,a.top,this.settings.offsetDelta),(b>0||c>0)&&this.scrollBy(b,c,!0)}afterResized(a){this.emit(h.EVENTS.MANAGERS.RESIZE,a.section)}removeShownListeners(a){a.onDisplayed=function(){}}add(b){var a=this.createView(b);return this.views.append(a),a.on(h.EVENTS.VIEWS.RESIZED,b=>{a.expanded=!0}),a.on(h.EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),a.on(h.EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.display(this.request)}append(b){var a=this.createView(b);return a.on(h.EVENTS.VIEWS.RESIZED,b=>{a.expanded=!0}),a.on(h.EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),a.on(h.EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a}prepend(b){var a=this.createView(b);return a.on(h.EVENTS.VIEWS.RESIZED,b=>{this.counter(b),a.expanded=!0}),a.on(h.EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),a.on(h.EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),this.views.prepend(a),a.onDisplayed=this.afterDisplayed.bind(this),a}counter(a){"vertical"===this.settings.axis?this.scrollBy(0,a.heightDelta,!0):this.scrollBy(a.widthDelta,0,!0)}update(d){for(var m,a,i=this.bounds(),e=this.views.all(),j=e.length,k=[],g=void 0!==d?d:this.settings.offset||0,h=new f.defer,b=[],c=0;c<j;c++)if(a=e[c],!0===this.isVisible(a,g,g,i)){if(a.displayed)a.show();else{let l=a.display(this.request).then(function(a){a.show()},b=>{a.hide()});b.push(l)}k.push(a)}else this.q.enqueue(a.destroy.bind(a)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return b.length?Promise.all(b).catch(a=>{h.reject(a)}):(h.resolve(),h.promise)}check(g,h){var i=new f.defer,j=[],a="horizontal"===this.settings.axis,c=this.settings.offset||0;g&&a&&(c=g),h&&!a&&(c=h);var k=this._bounds;let b=a?this.scrollLeft:this.scrollTop,l=a?Math.floor(k.width):k.height,m=a?this.container.scrollWidth:this.container.scrollHeight,n=this.writingMode&&0===this.writingMode.indexOf("vertical")?"vertical":"horizontal",d=this.settings.rtlScrollType,e="rtl"===this.settings.direction;this.settings.fullsize?(a&&e&&"negative"===d|| !a&&e&&"default"===d)&&(b*=-1):(e&&"default"===d&&"horizontal"===n&&(b=m-l-b),e&&"negative"===d&&"horizontal"===n&&(b*=-1));let o=b+l+c,p=b-c;o>=m&&(()=>{let a=this.views.last(),b=a&&a.section.next();b&&j.push(this.append(b))})(),p<0&&(()=>{let a=this.views.first(),b=a&&a.section.prev();b&&j.push(this.prepend(b))})();let q=j.map(a=>a.display(this.request));return j.length?Promise.all(q).then(()=>this.check()).then(()=>this.update(c),a=>a):(this.q.enqueue((function(){this.update()}).bind(this)),i.resolve(!1),i.promise)}trim(){for(var e=new f.defer,a=this.views.displayed(),h=a[0],i=a[a.length-1],j=this.views.indexOf(h),k=this.views.indexOf(i),b=this.views.slice(0,j),g=this.views.slice(k+1),c=0;c<b.length-1;c++)this.erase(b[c],b);for(var d=1;d<g.length;d++)this.erase(g[d]);return e.resolve(),e.promise}erase(c,d){this.settings.fullsize?(e=window.scrollY,a=window.scrollX):(e=this.container.scrollTop,a=this.container.scrollLeft);var e,a,b=c.bounds();this.views.remove(c),d&&("vertical"===this.settings.axis?this.scrollTo(0,e-b.height,!0):"rtl"===this.settings.direction?this.settings.fullsize?this.scrollTo(a+Math.floor(b.width),0,!0):this.scrollTo(a,0,!0):this.scrollTo(a-Math.floor(b.width),0,!0))}addEventListeners(a){window.addEventListener("unload",(function(a){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new g.default(this,this.settings.snap&&"object"==typeof this.settings.snap&&this.settings.snap))}addScrollListeners(){var a;this.tick=f.requestAnimationFrame;let b="rtl"===this.settings.direction&&"default"===this.settings.rtlScrollType?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(a=window,this.scrollTop=window.scrollY*b,this.scrollLeft=window.scrollX*b):(a=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),a.addEventListener("scroll",this._onScroll),this._scrolled=(0,i.default)(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var a;(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let a,b,c="rtl"===this.settings.direction&&"default"===this.settings.rtlScrollType?-1:1;this.settings.fullsize?(a=window.scrollY*c,b=window.scrollX*c):(a=this.container.scrollTop,b=this.container.scrollLeft),this.scrollTop=a,this.scrollLeft=b,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(a-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(b-this.prevScrollLeft),this.prevScrollTop=a,this.prevScrollLeft=b,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(h.EVENTS.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){!(this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap())&&this.emit(h.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let a="pre-paginated"===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&"horizontal"===this.settings.axis?this.scrollBy(a,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let a="pre-paginated"===this.layout.props.name&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&"horizontal"===this.settings.axis?this.scrollBy(-a,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(a){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(a,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new g.default(this,this.settings.snap&&"object"==typeof this.settings.snap&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}b.default=d},7977:function(e,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=m(a(48370)),f=a(2838),g=m(a(57028)),h=m(a(53191)),i=m(a(29982)),j=m(a(65210)),k=m(a(74793)),l=a(29999);function m(a){return a&&a.__esModule?a:{default:a}}class c{constructor(a){this.name="default",this.optsSettings=a.settings,this.View=a.view,this.request=a.request,this.renditionQueue=a.queue,this.q=new i.default(this),this.settings=(0,f.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),(0,f.extend)(this.settings,a.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(c,a){let b=c.tagName;void 0===this.settings.fullsize&&b&&("body"==b.toLowerCase()||"html"==b.toLowerCase())&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=a,this.settings.rtlScrollType=(0,g.default)(),this.stage=new j.default({width:a.width,height:a.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(c),this.container=this.stage.getContainer(),this.views=new k.default(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var a;window.addEventListener("unload",(function(a){this.destroy()}).bind(this)),a=this.settings.fullsize?window:this.container,this._onScroll=this.onScroll.bind(this),a.addEventListener("scroll",this._onScroll)}removeEventListeners(){var a;(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(a){let{orientation:b}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(l.EVENTS.MANAGERS.ORIENTATION_CHANGE,b)}).bind(this),500)}onResized(a){this.resize()}resize(b,c,d){let a=this.stage.size(b,c);if(this.winBounds=(0,f.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}(!this._stageSize||this._stageSize.width!==a.width||this._stageSize.height!==a.height)&&(this._stageSize=a,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(l.EVENTS.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},d))}createView(a,b){return new this.View(a,(0,f.extend)(this.viewSettings,{forceRight:b}))}handleNextPrePaginated(c,b,d){let a;if("pre-paginated"===this.layout.name&&this.layout.divisor>1){if(c||0===b.index)return;if((a=b.next())&&!a.properties.includes("page-spread-left"))return d.call(this,a)}}display(a,b){var e=new f.defer,g=e.promise;(b===a.href||(0,f.isNumber)(b))&&(b=void 0);var c=this.views.find(a);if(c&&a&&"pre-paginated"!==this.layout.name){let d=c.offset();if("ltr"===this.settings.direction)this.scrollTo(d.left,d.top,!0);else{let i=c.width();this.scrollTo(d.left+i,d.top,!0)}if(b){let j=c.locationOf(b),k=c.width();this.moveTo(j,k)}return e.resolve(),g}this.clear();let h=!1;return"pre-paginated"===this.layout.name&&2===this.layout.divisor&&a.properties.includes("page-spread-right")&&(h=!0),this.add(a,h).then((function(a){if(b){let c=a.locationOf(b),d=a.width();this.moveTo(c,d)}}).bind(this),a=>{e.reject(a)}).then((function(){return this.handleNextPrePaginated(h,a,this.add)}).bind(this)).then((function(){this.views.show(),e.resolve()}).bind(this)),g}afterDisplayed(a){this.emit(l.EVENTS.MANAGERS.ADDED,a)}afterResized(a){this.emit(l.EVENTS.MANAGERS.RESIZE,a.section)}moveTo(c,d){var a=0,b=0;this.isPaginated?((a=Math.floor(c.left/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollWidth&&(a=this.container.scrollWidth-this.layout.delta),(b=Math.floor(c.top/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollHeight&&(b=this.container.scrollHeight-this.layout.delta)):b=c.top,"rtl"===this.settings.direction&&(a+=this.layout.delta,a-=d),this.scrollTo(a,b,!0)}add(b,c){var a=this.createView(b,c);return this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(l.EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),a.on(l.EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),a.display(this.request)}append(b,c){var a=this.createView(b,c);return this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(l.EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),a.on(l.EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),a.display(this.request)}prepend(b,c){var a=this.createView(b,c);return a.on(l.EVENTS.VIEWS.RESIZED,a=>{this.counter(a)}),this.views.prepend(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(l.EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),a.on(l.EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),a.display(this.request)}counter(a){"vertical"===this.settings.axis?this.scrollBy(0,a.heightDelta,!0):this.scrollBy(a.widthDelta,0,!0)}next(){var a,d;let b=this.settings.direction;if(this.views.length){if(this.isPaginated&&"horizontal"===this.settings.axis&&(!b||"ltr"===b))this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft+this.container.offsetWidth+this.layout.delta<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):a=this.views.last().section.next();else if(this.isPaginated&&"horizontal"===this.settings.axis&&"rtl"===b)this.scrollLeft=this.container.scrollLeft,"default"===this.settings.rtlScrollType?this.container.scrollLeft>0?this.scrollBy(this.layout.delta,0,!0):a=this.views.last().section.next():this.container.scrollLeft+ -1*this.layout.delta> -1*this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):a=this.views.last().section.next();else if(this.isPaginated&&"vertical"===this.settings.axis){this.scrollTop=this.container.scrollTop;this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):a=this.views.last().section.next()}else a=this.views.last().section.next();if(a){this.clear(),this.updateLayout();let c=!1;return"pre-paginated"===this.layout.name&&2===this.layout.divisor&&a.properties.includes("page-spread-right")&&(c=!0),this.append(a,c).then((function(){return this.handleNextPrePaginated(c,a,this.append)}).bind(this),a=>a).then((function(){this.isPaginated||"horizontal"!==this.settings.axis||"rtl"!==this.settings.direction||"default"!==this.settings.rtlScrollType||this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}}prev(){var a,d;let b=this.settings.direction;if(this.views.length){if(this.isPaginated&&"horizontal"===this.settings.axis&&(!b||"ltr"===b))this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft>0?this.scrollBy(-this.layout.delta,0,!0):a=this.views.first().section.prev();else if(this.isPaginated&&"horizontal"===this.settings.axis&&"rtl"===b)this.scrollLeft=this.container.scrollLeft,"default"===this.settings.rtlScrollType?this.container.scrollLeft+this.container.offsetWidth<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):a=this.views.first().section.prev():this.container.scrollLeft<0?this.scrollBy(-this.layout.delta,0,!0):a=this.views.first().section.prev();else if(this.isPaginated&&"vertical"===this.settings.axis){this.scrollTop=this.container.scrollTop;this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):a=this.views.first().section.prev()}else a=this.views.first().section.prev();if(a){this.clear(),this.updateLayout();let c=!1;return"pre-paginated"===this.layout.name&&2===this.layout.divisor&&"object"!=typeof a.prev()&&(c=!0),this.prepend(a,c).then((function(){var b;if("pre-paginated"===this.layout.name&&this.layout.divisor>1&&(b=a.prev()))return this.prepend(b)}).bind(this),a=>a).then((function(){this.isPaginated&&"horizontal"===this.settings.axis&&("rtl"===this.settings.direction?"default"===this.settings.rtlScrollType?this.scrollTo(0,0,!0):this.scrollTo(-1*this.container.scrollWidth+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}}current(){var a=this.visible();return a.length?a[a.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&"horizontal"===this.settings.axis?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let b=this.visible(),a=this.container.getBoundingClientRect(),e=a.height<window.innerHeight?a.height:window.innerHeight,f=a.width<window.innerWidth?a.width:window.innerWidth,c="vertical"===this.settings.axis;this.settings.direction;let d=0;return this.settings.fullsize&&(d=c?window.scrollY:window.scrollX),b.map(b=>{let{index:p,href:q}=b.section,o=b.position(),r=b.width(),s=b.height(),h,i,j,g;c?(i=(h=d+a.top-o.top+0)+e-0,g=this.layout.count(s,e).pages,j=e):(i=(h=d+a.left-o.left+0)+f-0,g=this.layout.count(r,f).pages,j=f);let k=Math.ceil(h/j),l=[],m=Math.ceil(i/j);if("rtl"===this.settings.direction&&!c){let t=k;k=g-m,m=g-t}l=[];for(var n=k;n<=m;n++){let u=n+1;l.push(u)}let v=this.mapping.page(b.contents,b.section.cfiBase,h,i);return{index:p,href:q,pages:l,totalPages:g,mapping:v}})}paginatedLocation(){let a=this.visible(),c=this.container.getBoundingClientRect(),b=0,d=0;return this.settings.fullsize&&(b=window.scrollX),a.map(a=>{let{index:o,href:p}=a.section,e,f=a.position(),q=a.width(),g,h,i;"rtl"===this.settings.direction?(i=Math.min(Math.abs((e=c.right-b)-f.left),this.layout.width)-d,h=f.width-(f.right-e)-d,g=h-i):(e=c.left+b,i=Math.min(f.right-e,this.layout.width)-d,g=e-f.left+d,h=g+i),d+=i;let r=this.mapping.page(a.contents,a.section.cfiBase,g,h),l=this.layout.count(q).pages,j=Math.floor(g/this.layout.pageWidth),n=[],k=Math.floor(h/this.layout.pageWidth);if(j<0&&(j=0,k+=1),"rtl"===this.settings.direction){let s=j;j=l-k,k=l-s}for(var m=j+1;m<=k;m++){let t=m;n.push(t)}return{index:o,href:p,pages:n,totalPages:l,mapping:r}})}isVisible(e,c,d,f){var a=e.position(),b=f||this.bounds();return"horizontal"===this.settings.axis&&a.right>b.left-c&&a.left<b.right+d||"vertical"===this.settings.axis&&!!(a.bottom>b.top-c)&&!!(a.top<b.bottom+d)}visible(){for(var g,a,e=this.bounds(),c=this.views.displayed(),f=c.length,d=[],b=0;b<f;b++)a=c[b],!0===this.isVisible(a,0,0,e)&&d.push(a);return d}scrollBy(a,b,d){let c="rtl"===this.settings.direction?-1:1;d&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(a*c,b*c):(a&&(this.container.scrollLeft+=a*c),b&&(this.container.scrollTop+=b)),this.scrolled=!0}scrollTo(a,b,c){c&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(a,b):(this.container.scrollLeft=a,this.container.scrollTop=b),this.scrolled=!0}onScroll(){let a,b;this.settings.fullsize?(a=window.scrollY,b=window.scrollX):(a=this.container.scrollTop,b=this.container.scrollLeft),this.scrollTop=a,this.scrollLeft=b,this.ignore?this.ignore=!1:(this.emit(l.EVENTS.MANAGERS.SCROLL,{top:a,left:b}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(l.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var a;return this.stage.bounds()}applyLayout(a){this.layout=a,this.updateLayout(),this.views&&this.views.length>0&&"pre-paginated"===this.layout.name&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(a){this.viewSettings.layout=a,this.mapping=new h.default(a.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(b){b&&b.setLayout(a)})}updateWritingMode(a){this.writingMode=a}updateAxis(a,b){(b||a!==this.settings.axis)&&(this.settings.axis=a,this.stage&&this.stage.axis(a),this.viewSettings.axis=a,this.mapping&&(this.mapping=new h.default(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&("vertical"===a?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(a,c="auto"){let b="paginated"===a||"auto"===a;this.isPaginated=b,"scrolled-doc"===a||"scrolled-continuous"===a||"scrolled"===a?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=a,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=b?"hidden":c,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var a=[];return this.views&&this.views.forEach(function(b){let c=b&&b.contents;c&&a.push(c)}),a}direction(a="ltr"){this.settings.direction=a,this.stage&&this.stage.direction(a),this.viewSettings.direction=a,this.updateLayout()}isRendered(){return this.rendered}}(0,d.default)(c.prototype),b.default=c},43670:function(f,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,g=c(2838),h=c(29999),e=(a=c(48370),a&&a.__esModule?a:{default:a});class d{constructor(a,b){this.settings=(0,g.extend)({duration:80,minVelocity:.2,minDistance:10,easing:function(a){return Math.pow(a,3)}},b||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(a)}setup(a){this.manager=a,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=2*this.settings.duration,this.isVertical="vertical"===this.manager.settings.axis,this.manager.isPaginated&&!this.isVertical&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(h.EVENTS.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(h.EVENTS.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(a){let b=a.contents;["touchstart","touchmove","touchend"].forEach(a=>{b.on(a,a=>this.triggerViewEvent(a,b))})}triggerViewEvent(a,b){this.emit(a.type,a,b)}onScroll(a){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(a){this.resizeCanceler=!0}onTouchStart(c){let{screenX:a,screenY:b}=c.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=a,this.startTouchY=b,this.startTime=this.now()),this.endTouchX=a,this.endTouchY=b,this.endTime=this.now()}onTouchMove(c){let{screenX:a,screenY:b}=c.touches[0],d=Math.abs(b-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&d<10&&(this.element.scrollLeft-=a-this.endTouchX),this.endTouchX=a,this.endTouchY=b,this.endTime=this.now()}onTouchEnd(b){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let a=this.wasSwiped();0!==a?this.snap(a):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,a=this.endTouchX-this.startTouchX,b=Math.abs(a),c=a/(this.endTime-this.startTime),d=this.settings.minVelocity;return b<=this.settings.minDistance||b>=e?0:c>d?-1:c< -d?1:void 0}needsSnap(){let a;return this.scrollLeft%(this.layout.pageWidth*this.layout.divisor)!=0}snap(b=0){let d=this.scrollLeft,a=this.layout.pageWidth*this.layout.divisor,c=Math.round(d/a)*a;return b&&(c+=b*a),this.smoothScrollTo(c)}smoothScrollTo(c){let a=new g.defer,d=this.scrollLeft,e=this.now(),f=this.settings.duration,h=this.settings.easing;function b(){let i=this.now(),g=Math.min(1,(i-e)/f);if(h(g),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,a.resolve();return}g<1?(window.requestAnimationFrame(b.bind(this)),this.scrollTo(d+(c-d)*g,0)):(this.scrollTo(c,0),this.snapping=!1,a.resolve())}return this.snapping=!0,b.call(this),a.promise}scrollTo(a=0,b=0){this.fullsize?window.scroll(a,b):(this.scroller.scrollLeft=a,this.scroller.scrollTop=b)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}(0,e.default)(d.prototype),b.default=d},65210:function(e,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,f=c(2838),g=(a=c(23493),a&&a.__esModule?a:{default:a}),d=class{constructor(a){this.settings=a||{},this.id="epubjs-container-"+(0,f.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(b){let e=b.height,g=b.width,c=b.overflow||!1,h=b.axis||"vertical",d=b.direction;(0,f.extend)(this.settings,b),b.height&&(0,f.isNumber)(b.height)&&(e=b.height+"px"),b.width&&(0,f.isNumber)(b.width)&&(g=b.width+"px");let a=document.createElement("div");return a.id=this.id,a.classList.add("epub-container"),a.style.wordSpacing="0",a.style.lineHeight="0",a.style.verticalAlign="top",a.style.position="relative","horizontal"===h&&(a.style.display="flex",a.style.flexDirection="row",a.style.flexWrap="nowrap"),g&&(a.style.width=g),e&&(a.style.height=e),c&&("scroll"===c&&"vertical"===h?(a.style["overflow-y"]=c,a.style["overflow-x"]="hidden"):"scroll"===c&&"horizontal"===h?(a.style["overflow-y"]="hidden",a.style["overflow-x"]=c):a.style.overflow=c),d&&(a.dir=d,a.style.direction=d),d&&this.settings.fullsize&&(document.body.style.direction=d),a}wrap(b){var a=document.createElement("div");return a.style.visibility="hidden",a.style.overflow="hidden",a.style.width="0",a.style.height="0",a.appendChild(b),a}getElement(a){var b;if((0,f.isElement)(a)?b=a:"string"==typeof a&&(b=document.getElementById(a)),!b)throw Error("Not an Element");return b}attachTo(c){var b,a=this.getElement(c);if(a)return b=this.settings.hidden?this.wrapper:this.container,a.appendChild(b),this.element=a,a}getContainer(){return this.container}onResize(a){(0,f.isNumber)(this.settings.width)&&(0,f.isNumber)(this.settings.height)||(this.resizeFunc=(0,g.default)(a,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(a){this.orientationChangeFunc=a,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(a,b){var c;let i=a||this.settings.width,g=b||this.settings.height;null===a?(c=this.element.getBoundingClientRect()).width&&(a=Math.floor(c.width),this.container.style.width=a+"px"):(0,f.isNumber)(a)?this.container.style.width=a+"px":this.container.style.width=a,null===b?(c=c||this.element.getBoundingClientRect()).height&&(b=c.height,this.container.style.height=b+"px"):(0,f.isNumber)(b)?this.container.style.height=b+"px":this.container.style.height=b,(0,f.isNumber)(a)||(a=this.container.clientWidth),(0,f.isNumber)(b)||(b=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let h=(0,f.windowBounds)(),d=window.getComputedStyle(document.body),e={left:parseFloat(d["padding-left"])||0,right:parseFloat(d["padding-right"])||0,top:parseFloat(d["padding-top"])||0,bottom:parseFloat(d["padding-bottom"])||0};return i||(a=h.width-e.left-e.right),(!this.settings.fullsize||g)&&g||(b=h.height-e.top-e.bottom),{width:a-this.containerPadding.left-this.containerPadding.right,height:b-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let a;return("visible"!==this.container.style.overflow&&(a=this.container&&this.container.getBoundingClientRect()),a&&a.width&&a.height)?a:(0,f.windowBounds)()}getSheet(){var a=document.createElement("style");return a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet}addStyleRules(a,b){var c="#"+this.id+" ",d="";this.sheet||(this.sheet=this.getSheet()),b.forEach(function(a){for(var b in a)a.hasOwnProperty(b)&&(d+=b+":"+a[b]+";")}),this.sheet.insertRule(c+a+" {"+d+"}",0)}axis(a){"horizontal"===a?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=a}direction(a){this.container&&(this.container.dir=a,this.container.style.direction=a),this.settings.fullsize&&(document.body.style.direction=a),this.settings.dir=a}overflow(a){this.container&&("scroll"===a&&"vertical"===this.settings.axis?(this.container.style["overflow-y"]=a,this.container.style["overflow-x"]="hidden"):"scroll"===a&&"horizontal"===this.settings.axis?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=a):this.container.style.overflow=a),this.settings.overflow=a}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}};b.default=d},74793:function(c,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var b=class{constructor(a){this.container=a,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(a){return this._views.indexOf(a)}slice(){return this._views.slice.apply(this._views,arguments)}get(a){return this._views[a]}append(a){return this._views.push(a),this.container&&this.container.appendChild(a.element),this.length++,a}prepend(a){return this._views.unshift(a),this.container&&this.container.insertBefore(a.element,this.container.firstChild),this.length++,a}insert(a,b){return this._views.splice(b,0,a),this.container&&(b<this.container.children.length?this.container.insertBefore(a.element,this.container.children[b]):this.container.appendChild(a.element)),this.length++,a}remove(a){var b=this._views.indexOf(a);b> -1&&this._views.splice(b,1),this.destroy(a),this.length--}destroy(a){a.displayed&&a.destroy(),this.container&&this.container.removeChild(a.element),a=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var b,c=this.length;if(this.length){for(var a=0;a<c;a++)b=this._views[a],this.destroy(b);this._views=[],this.length=0}}find(c){for(var a,d=this.length,b=0;b<d;b++)if((a=this._views[b]).displayed&&a.section.index==c.index)return a}displayed(){for(var b,c=[],d=this.length,a=0;a<d;a++)(b=this._views[a]).displayed&&c.push(b);return c}show(){for(var b,c=this.length,a=0;a<c;a++)(b=this._views[a]).displayed&&b.show();this.hidden=!1}hide(){for(var b,c=this.length,a=0;a<c;a++)(b=this._views[a]).displayed&&b.hide();this.hidden=!0}};a.default=b},4711:function(e,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=k(a(48370)),f=a(2838),g=k(a(37519)),h=k(a(95490)),i=a(29999),j=a(73476);function k(a){return a&&a.__esModule?a:{default:a}}class c{constructor(a,b){this.settings=(0,f.extend)({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},b||{}),this.id="epubjs-view-"+(0,f.uuid)(),this.section=a,this.index=a.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new g.default,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(b){var a=document.createElement("div");return a.classList.add("epub-view"),a.style.height="0px",a.style.width="0px",a.style.overflow="hidden",a.style.position="relative",a.style.display="block",b&&"horizontal"==b?a.style.flex="none":a.style.flex="initial",a}create(){return this.iframe||(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=(0,f.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write")),this.iframe}render(a,b){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(a)),this.sectionRender.then((function(a){return this.load(a)}).bind(this)).then((function(){let a=this.contents.writingMode(),b;return b="scrolled"===this.settings.flow?0===a.indexOf("vertical")?"horizontal":"vertical":0===a.indexOf("vertical")?"vertical":"horizontal",0===a.indexOf("vertical")&&"paginated"===this.settings.flow&&(this.layout.delta=this.layout.height),this.setAxis(b),this.emit(i.EVENTS.VIEWS.AXIS,b),this.setWritingMode(a),this.emit(i.EVENTS.VIEWS.WRITING_MODE,a),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((a,b)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),a()})}).bind(this),(function(a){return this.emit(i.EVENTS.VIEWS.LOAD_ERROR,a),new Promise((c,b)=>{b(a)})}).bind(this)).then((function(){this.emit(i.EVENTS.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(c,d){var a=c||this.settings.width,b=d||this.settings.height;"pre-paginated"===this.layout.name?this.lock("both",a,b):"horizontal"===this.settings.axis?this.lock("height",a,b):this.lock("width",a,b),this.settings.width=a,this.settings.height=b}lock(e,b,c){var a,d=(0,f.borders)(this.element);a=this.iframe?(0,f.borders)(this.iframe):{width:0,height:0},"width"==e&&(0,f.isNumber)(b)&&(this.lockedWidth=b-d.width-a.width),"height"==e&&(0,f.isNumber)(c)&&(this.lockedHeight=c-d.height-a.height),"both"===e&&(0,f.isNumber)(b)&&(0,f.isNumber)(c)&&(this.lockedWidth=b-d.width-a.width,this.lockedHeight=c-d.height-a.height),this.displayed&&this.iframe&&this.expand()}expand(d){var c,a=this.lockedWidth,b=this.lockedHeight;this.iframe&&!this._expanding&&(this._expanding=!0,"pre-paginated"===this.layout.name?(a=this.layout.columnWidth,b=this.layout.height):"horizontal"===this.settings.axis?((a=this.contents.textWidth())%this.layout.pageWidth>0&&(a=Math.ceil(a/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(c=a/this.layout.pageWidth,this.layout.divisor>1&&"reflowable"===this.layout.name&&c%2>0&&(a+=this.layout.pageWidth))):"vertical"===this.settings.axis&&(b=this.contents.textHeight(),"paginated"===this.settings.flow&&b%this.layout.height>0&&(b=Math.ceil(b/this.layout.height)*this.layout.height)),(this._needsReframe||a!=this._width||b!=this._height)&&this.reframe(a,b),this._expanding=!1)}reframe(a,b){var c;(0,f.isNumber)(a)&&(this.element.style.width=a+"px",this.iframe.style.width=a+"px",this._width=a),(0,f.isNumber)(b)&&(this.element.style.height=b+"px",this.iframe.style.height=b+"px",this._height=b);let d=this.prevBounds?a-this.prevBounds.width:a,e=this.prevBounds?b-this.prevBounds.height:b;c={width:a,height:b,widthDelta:d,heightDelta:e},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let b in this.marks)this.marks.hasOwnProperty(b)&&(a=this.marks[b],this.placeMark(a.element,a.range))}),this.onResize(this,c),this.emit(i.EVENTS.VIEWS.RESIZED,c),this.prevBounds=c,this.elementBounds=(0,f.bounds)(this.element)}load(a){var b=new f.defer,c=b.promise;if(!this.iframe)return b.reject(Error("No Iframe Available")),c;if(this.iframe.onload=(function(a){this.onLoad(a,b)}).bind(this),"blobUrl"===this.settings.method)this.blobUrl=(0,f.createBlobUrl)(a,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if("srcdoc"===this.settings.method)this.iframe.srcdoc=a,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return b.reject(Error("No Document Available")),c;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var d=this;MSApp.execUnsafeLocalFunction(function(){d.iframe.contentDocument.write(a)})}else this.iframe.contentDocument.write(a);this.iframe.contentDocument.close()}return c}onLoad(c,b){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new h.default(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var a=this.document.querySelector("link[rel='canonical']");a?a.setAttribute("href",this.section.canonical):((a=this.document.createElement("link")).setAttribute("rel","canonical"),a.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(a)),this.contents.on(i.EVENTS.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(i.EVENTS.CONTENTS.RESIZE,a=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),b.resolve(this.contents)}setLayout(a){this.layout=a,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(a){this.settings.axis=a,"horizontal"==a?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(a){this.writingMode=a}addListeners(){}removeListeners(a){}display(b){var a=new f.defer;return this.displayed?a.resolve(this):this.render(b).then((function(){this.emit(i.EVENTS.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,a.resolve(this)}).bind(this),function(b){a.reject(b,this)}),a.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(i.EVENTS.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(i.EVENTS.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(b){this.iframe.getBoundingClientRect();var a=this.contents.locationOf(b,this.settings.ignoreClass);return{left:a.left,top:a.top}}onDisplayed(a){}onResize(a,b){}bounds(a){return(a||!this.elementBounds)&&(this.elementBounds=(0,f.bounds)(this.element)),this.elementBounds}highlight(c,e={},b,f="epubjs-hl",g={}){if(!this.contents)return;let h=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},g),k=this.contents.range(c),d=()=>{this.emit(i.EVENTS.VIEWS.MARK_CLICKED,c,e)};e.epubcfi=c,this.pane||(this.pane=new j.Pane(this.iframe,this.element));let l=new j.Highlight(k,f,e,h),a=this.pane.addMark(l);return this.highlights[c]={mark:a,element:a.element,listeners:[d,b]},a.element.setAttribute("ref",f),a.element.addEventListener("click",d),a.element.addEventListener("touchstart",d),b&&(a.element.addEventListener("click",b),a.element.addEventListener("touchstart",b)),a}underline(c,e={},b,f="epubjs-ul",g={}){if(!this.contents)return;let h=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},g),k=this.contents.range(c),d=()=>{this.emit(i.EVENTS.VIEWS.MARK_CLICKED,c,e)};e.epubcfi=c,this.pane||(this.pane=new j.Pane(this.iframe,this.element));let l=new j.Underline(k,f,e,h),a=this.pane.addMark(l);return this.underlines[c]={mark:a,element:a.element,listeners:[d,b]},a.element.setAttribute("ref",f),a.element.addEventListener("click",d),a.element.addEventListener("touchstart",d),b&&(a.element.addEventListener("click",b),a.element.addEventListener("touchstart",b)),a}mark(c,g={},e){if(!this.contents)return;if(c in this.marks)return this.marks[c];let b=this.contents.range(c);if(!b)return;let d=b.commonAncestorContainer,h=1===d.nodeType?d:d.parentNode,f=a=>{this.emit(i.EVENTS.VIEWS.MARK_CLICKED,c,g)};b.collapsed&&1===d.nodeType?(b=new Range).selectNodeContents(d):b.collapsed&&(b=new Range).selectNodeContents(h);let a=this.document.createElement("a");return a.setAttribute("ref","epubjs-mk"),a.style.position="absolute",a.dataset.epubcfi=c,g&&Object.keys(g).forEach(b=>{a.dataset[b]=g[b]}),e&&(a.addEventListener("click",e),a.addEventListener("touchstart",e)),a.addEventListener("click",f),a.addEventListener("touchstart",f),this.placeMark(a,b),this.element.appendChild(a),this.marks[c]={element:a,range:b,listeners:[f,e]},h}placeMark(f,g){let b,c,d;if("pre-paginated"===this.layout.name||"horizontal"!==this.settings.axis){let h=g.getBoundingClientRect();b=h.top,c=h.right}else{let i=g.getClientRects(),a;for(var e=0;e!=i.length;e++)a=i[e],(!d||a.left<d)&&(c=Math.ceil((d=a.left)/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,b=a.top)}f.style.top=`${b}px`,f.style.left=`${c}px`}unhighlight(a){let b;a in this.highlights&&(b=this.highlights[a],this.pane.removeMark(b.mark),b.listeners.forEach(a=>{a&&(b.element.removeEventListener("click",a),b.element.removeEventListener("touchstart",a))}),delete this.highlights[a])}ununderline(a){let b;a in this.underlines&&(b=this.underlines[a],this.pane.removeMark(b.mark),b.listeners.forEach(a=>{a&&(b.element.removeEventListener("click",a),b.element.removeEventListener("touchstart",a))}),delete this.underlines[a])}unmark(a){let b;a in this.marks&&(b=this.marks[a],this.element.removeChild(b.element),b.listeners.forEach(a=>{a&&(b.element.removeEventListener("click",a),b.element.removeEventListener("touchstart",a))}),delete this.marks[a])}destroy(){for(let a in this.highlights)this.unhighlight(a);for(let b in this.underlines)this.ununderline(b);for(let c in this.marks)this.unmark(c);this.blobUrl&&(0,f.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}(0,d.default)(c.prototype),b.default=c},53191:function(e,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,f=(a=c(37519),a&&a.__esModule?a:{default:a}),g=c(2838),d=class{constructor(a,b,c,d=!1){this.layout=a,this.horizontal="horizontal"===c,this.direction=b||"ltr",this._dev=d}section(a){var b=this.findRanges(a);return this.rangeListToCfiList(a.section.cfiBase,b)}page(a,l,g,h){var b,d=!!a&&!!a.document&&a.document.body;if(d){if(b=this.rangePairToCfiPair(l,{start:this.findStart(d,g,h),end:this.findEnd(d,g,h)}),!0===this._dev){let c=a.document,i=new f.default(b.start).toRange(c),j=new f.default(b.end).toRange(c),k=c.defaultView.getSelection(),e=c.createRange();k.removeAllRanges(),e.setStart(i.startContainer,i.startOffset),e.setEnd(j.endContainer,j.endOffset),k.addRange(e)}return b}}walk(a,f){if(!a||a.nodeType!==Node.TEXT_NODE){var b,c,d={acceptNode:function(a){return a.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},e=d.acceptNode;e.acceptNode=d.acceptNode;for(var g=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,e,!1);(b=g.nextNode())&&!(c=f(b)););return c}}findRanges(b){for(var c,d,e=[],h=Math.ceil(b.contents.scrollWidth()/this.layout.spreadWidth)*this.layout.divisor,f=this.layout.columnWidth,g=this.layout.gap,a=0;a<h.pages;a++)c=(f+g)*a,d=f*(a+1)+g*a,e.push({start:this.findStart(b.document.body,c,d),end:this.findEnd(b.document.body,c,d)});return e}findStart(a,b,c){for(var d,e,f=[a],h=a;f.length;)if(d=f.shift(),e=this.walk(d,a=>{var e,i,j,k,d;if(d=(0,g.nodeBounds)(a),this.horizontal&&"ltr"===this.direction){if(e=this.horizontal?d.left:d.top,i=this.horizontal?d.right:d.bottom,e>=b&&e<=c)return a;if(i>b)return a;h=a,f.push(a)}else if(this.horizontal&&"rtl"===this.direction){if(e=d.left,i=d.right,i<=c&&i>=b)return a;if(e<c)return a;h=a,f.push(a)}else{if(j=d.top,k=d.bottom,j>=b&&j<=c)return a;if(k>b)return a;h=a,f.push(a)}}))return this.findTextStartRange(e,b,c);return this.findTextStartRange(h,b,c)}findEnd(a,b,c){for(var d,e,f=[a],h=a;f.length;)if(d=f.shift(),e=this.walk(d,a=>{var e,i,j,k,d;if(d=(0,g.nodeBounds)(a),this.horizontal&&"ltr"===this.direction){if(e=Math.round(d.left),i=Math.round(d.right),e>c&&h)return h;if(i>c)return a;h=a,f.push(a)}else if(this.horizontal&&"rtl"===this.direction){if(e=Math.round(this.horizontal?d.left:d.top),i=Math.round(this.horizontal?d.right:d.bottom),i<b&&h)return h;if(e<b)return a;h=a,f.push(a)}else{if(j=Math.round(d.top),k=Math.round(d.bottom),j>c&&h)return h;if(k>c)return a;h=a,f.push(a)}}))return this.findTextEndRange(e,b,c);return this.findTextEndRange(h,b,c)}findTextStartRange(f,e,g){for(var a,b,h,i,j,c=this.splitTextNodeIntoRanges(f),d=0;d<c.length;d++)if(b=(a=c[d]).getBoundingClientRect(),this.horizontal&&"ltr"===this.direction){if(b.left>=e)return a}else if(this.horizontal&&"rtl"===this.direction){if(b.right<=g)return a}else if(b.top>=e)return a;return c[0]}findTextEndRange(l,i,d){for(var a,c,b,e,f,j,k,g=this.splitTextNodeIntoRanges(l),h=0;h<g.length;h++){if(b=(c=g[h]).getBoundingClientRect(),this.horizontal&&"ltr"===this.direction){if(e=b.left,f=b.right,e>d&&a)return a;if(f>d)return c}else if(this.horizontal&&"rtl"===this.direction){if(e=b.left,f=b.right,f<i&&a)return a;if(e<i)return c}else{if(j=b.top,k=b.bottom,j>d&&a)return a;if(k>d)return c}a=c}return g[g.length-1]}splitTextNodeIntoRanges(b,h){var a,d=[],e=(b.textContent||"").trim(),f=b.ownerDocument,g=h||" ",c=e.indexOf(g);if(-1===c||b.nodeType!=Node.TEXT_NODE)return(a=f.createRange()).selectNodeContents(b),[a];for((a=f.createRange()).setStart(b,0),a.setEnd(b,c),d.push(a),a=!1;-1!=c;)(c=e.indexOf(g,c+1))>0&&(a&&(a.setEnd(b,c),d.push(a)),(a=f.createRange()).setStart(b,c+1));return a&&(a.setEnd(b,e.length),d.push(a)),d}rangePairToCfiPair(a,b){var c=b.start,d=b.end;c.collapse(!0),d.collapse(!1);let e=new f.default(c,a).toString(),g=new f.default(d,a).toString();return{start:e,end:g}}rangeListToCfiList(d,b){for(var e,c=[],a=0;a<b.length;a++)c.push(e=this.rangePairToCfiPair(d,b[a]));return c}axis(a){return a&&(this.horizontal="horizontal"===a),this.horizontal}};b.default=d},43412:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=b(2838),c=class{constructor(a){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,a&&this.parse(a)}parse(a){let b=a.nodeType,c,d;b&&(c=(0,e.qs)(a,"html"),d=(0,e.qs)(a,"ncx")),b?c?(this.toc=this.parseNav(a),this.landmarks=this.parseLandmarks(a)):d&&(this.toc=this.parseNcx(a)):this.toc=this.load(a),this.length=0,this.unpack(this.toc)}unpack(c){for(var a,b=0;b<c.length;b++)(a=c[b]).href&&(this.tocByHref[a.href]=b),a.id&&(this.tocById[a.id]=b),this.length++,a.subitems.length&&this.unpack(a.subitems)}get(a){var b;return a?(0===a.indexOf("#")?b=this.tocById[a.substring(1)]:a in this.tocByHref&&(b=this.tocByHref[a]),this.getByIndex(a,b,this.toc)):this.toc}getByIndex(c,e,a){if(0===a.length)return;let b=a[e];if(b&&(c===b.id||c===b.href))return b;{let f;for(let d=0;d<a.length&&!(f=this.getByIndex(c,e,a[d].subitems));++d);return f}}landmark(a){var b;return a?(b=this.landmarksByType[a],this.landmarks[b]):this.landmarks}parseNav(d){var b=(0,e.querySelectorByType)(d,"nav","toc"),a=[];if(!b)return a;let c=(0,e.filterChildren)(b,"ol",!0);return c?a=this.parseNavList(c):a}parseNavList(a,e){let b=[];if(!a||!a.children)return b;for(let c=0;c<a.children.length;c++){let d=this.navItem(a.children[c],e);d&&b.push(d)}return b}navItem(a,h){let b=a.getAttribute("id")||void 0,c=(0,e.filterChildren)(a,"a",!0)||(0,e.filterChildren)(a,"span",!0);if(!c)return;let d=c.getAttribute("href")||"";b||(b=d);let i=c.textContent||"",f=[],g=(0,e.filterChildren)(a,"ol",!0);return g&&(f=this.parseNavList(g,b)),{id:b,href:d,label:i,subitems:f,parent:h}}parseLandmarks(h){var a,b,f=(0,e.querySelectorByType)(h,"nav","landmarks"),c=f?(0,e.qsa)(f,"li"):[],g=c.length,d=[];if(!c||0===g)return d;for(a=0;a<g;++a)(b=this.landmarkItem(c[a]))&&(d.push(b),this.landmarksByType[b.type]=a);return d}landmarkItem(b){let a=(0,e.filterChildren)(b,"a",!0);if(!a)return;let c=a.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,d=a.getAttribute("href")||"",f=a.textContent||"";return{href:d,label:f,type:c}}parseNcx(h){var b,a,i,c=(0,e.qsa)(h,"navPoint"),f=c.length,g={},d=[];if(!c||0===f)return d;for(b=0;b<f;++b)g[(a=this.ncxItem(c[b])).id]=a,a.parent?(0,g[a.parent]).subitems.push(a):d.push(a);return d}ncxItem(a){var c,f=a.getAttribute("id")||!1,g=(0,e.qs)(a,"content").getAttribute("src"),d=(0,e.qs)(a,"navLabel"),h=d.textContent?d.textContent:"",b=a.parentNode;return b&&("navPoint"===b.nodeName||"navPoint"===b.nodeName.split(":").slice(-1)[0])&&(c=b.getAttribute("id")),{id:f,href:g,label:h,subitems:[],parent:c}}load(a){return a.map(a=>(a.label=a.title,a.subitems=a.children?this.load(a.children):[],a))}forEach(a){return this.toc.forEach(a)}};a.default=c},94774:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=b(2838),c=class{constructor(a){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},a&&this.parse(a)}parse(a){var d,c,b;if(!a)throw Error("Package File Not Found");if(!(d=(0,e.qs)(a,"metadata")))throw Error("No Metadata Found");if(!(c=(0,e.qs)(a,"manifest")))throw Error("No Manifest Found");if(!(b=(0,e.qs)(a,"spine")))throw Error("No Spine Found");return this.manifest=this.parseManifest(c),this.navPath=this.findNavPath(c),this.ncxPath=this.findNcxPath(c,b),this.coverPath=this.findCoverPath(a),this.spineNodeIndex=(0,e.indexOfElementNode)(b),this.spine=this.parseSpine(b,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(a),this.metadata=this.parseMetadata(d),this.metadata.direction=b.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(b){var a={};return a.title=this.getElementText(b,"title"),a.creator=this.getElementText(b,"creator"),a.description=this.getElementText(b,"description"),a.pubdate=this.getElementText(b,"date"),a.publisher=this.getElementText(b,"publisher"),a.identifier=this.getElementText(b,"identifier"),a.language=this.getElementText(b,"language"),a.rights=this.getElementText(b,"rights"),a.modified_date=this.getPropertyText(b,"dcterms:modified"),a.layout=this.getPropertyText(b,"rendition:layout"),a.orientation=this.getPropertyText(b,"rendition:orientation"),a.flow=this.getPropertyText(b,"rendition:flow"),a.viewport=this.getPropertyText(b,"rendition:viewport"),a.media_active_class=this.getPropertyText(b,"media:active-class"),a.spread=this.getPropertyText(b,"rendition:spread"),a}parseManifest(a){var b={},c=(0,e.qsa)(a,"item");return Array.prototype.slice.call(c).forEach(function(a){var d=a.getAttribute("id"),e=a.getAttribute("href")||"",f=a.getAttribute("media-type")||"",g=a.getAttribute("media-overlay")||"",c=a.getAttribute("properties")||"";b[d]={href:e,type:f,overlay:g,properties:c.length?c.split(" "):[]}}),b}parseSpine(a,d){var b=[],c=(0,e.qsa)(a,"itemref");return Array.prototype.slice.call(c).forEach(function(a,d){var e=a.getAttribute("idref"),c=a.getAttribute("properties")||"",f=c.length?c.split(" "):[],g={id:a.getAttribute("id"),idref:e,linear:a.getAttribute("linear")||"yes",properties:f,index:d};b.push(g)}),b}findUniqueIdentifier(b){var c=b.documentElement.getAttribute("unique-identifier");if(!c)return"";var a=b.getElementById(c);return a&&"identifier"===a.localName&&"http://purl.org/dc/elements/1.1/"===a.namespaceURI&&a.childNodes.length>0?a.childNodes[0].nodeValue.trim():""}findNavPath(b){var a=(0,e.qsp)(b,"item",{properties:"nav"});return!!a&&a.getAttribute("href")}findNcxPath(b,d){var c,a=(0,e.qsp)(b,"item",{"media-type":"application/x-dtbncx+xml"});return!a&&(c=d.getAttribute("toc"))&&(a=b.querySelector(`#${c}`)),!!a&&a.getAttribute("href")}findCoverPath(a){(0,e.qs)(a,"package").getAttribute("version");var b=(0,e.qsp)(a,"item",{properties:"cover-image"});if(b)return b.getAttribute("href");var c=(0,e.qsp)(a,"meta",{name:"cover"});if(!c)return!1;var f=c.getAttribute("content"),d=a.getElementById(f);return d?d.getAttribute("href"):""}getElementText(c,d){var b,a=c.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",d);return a&&0!==a.length&&(b=a[0]).childNodes.length?b.childNodes[0].nodeValue:""}getPropertyText(b,c){var a=(0,e.qsp)(b,"meta",{property:c});return a&&a.childNodes.length?a.childNodes[0].nodeValue:""}load(a){this.metadata=a.metadata;let b=a.readingOrder||a.spine;return this.spine=b.map((a,b)=>(a.index=b,a.linear=a.linear||"yes",a)),a.resources.forEach((a,b)=>{this.manifest[b]=a,a.rel&&"cover"===a.rel[0]&&(this.coverPath=a.href)}),this.spineNodeIndex=0,this.toc=a.toc.map((a,b)=>(a.label=a.title,a)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}};a.default=c},12368:function(e,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,f=(a=c(37519),a&&a.__esModule?a:{default:a}),g=c(2838),d=class{constructor(a){this.pages=[],this.locations=[],this.epubcfi=new f.default,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,a&&(this.pageList=this.parse(a)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(a){var b=(0,g.qs)(a,"html"),c=(0,g.qs)(a,"ncx");return b?this.parseNav(a):c?this.parseNcx(a):void 0}parseNav(f){var a,h,d=(0,g.querySelectorByType)(f,"nav","page-list"),b=d?(0,g.qsa)(d,"li"):[],e=b.length,c=[];if(!b||0===e)return c;for(a=0;a<e;++a)c.push(h=this.item(b[a]));return c}parseNcx(f){var h,d,a,c=[],b=0,e=0;if(!(d=(0,g.qs)(f,"pageList"))||(e=(a=(0,g.qsa)(d,"pageTarget")).length,!a||0===a.length))return c;for(b=0;b<e;++b)c.push(h=this.ncxItem(a[b]));return c}ncxItem(a){var b=(0,g.qs)(a,"navLabel"),c=(0,g.qs)(b,"text"),d=c.textContent,e=(0,g.qs)(a,"content"),f=e.getAttribute("src"),h=parseInt(d,10);return{href:f,page:h}}item(h){var b,c,d,e=(0,g.qs)(h,"a"),a=e.getAttribute("href")||"",f=parseInt(e.textContent||"");return -1!=a.indexOf("epubcfi")?(c=(b=a.split("#"))[0],d=b.length>1&&b[1],{cfi:d,href:a,packageUrl:c,page:f}):{href:a,page:f}}process(a){a.forEach(function(a){this.pages.push(a.page),a.cfi&&this.locations.push(a.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(c){var a=-1;if(0===this.locations.length)return -1;var b=(0,g.indexOfSorted)(c,this.locations,this.epubcfi.compare);return -1!=b?a=this.pages[b]:void 0!==(a=(b=(0,g.locationOf)(c,this.locations,this.epubcfi.compare))-1>=0?this.pages[b-1]:this.pages[0])||(a=-1),a}cfiFromPage(a){var b=-1;"number"!=typeof a&&(a=parseInt(a));var c=this.pages.indexOf(a);return -1!=c&&(b=this.locations[c]),b}pageFromPercentage(a){return Math.round(this.totalPages*a)}percentageFromPage(a){return Math.round(1e3*((a-this.firstPage)/this.totalPages))/1e3}percentageFromCfi(a){var b=this.pageFromCfi(a);return this.percentageFromPage(b)}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}};b.default=d},2087:function(e,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=q(a(48370)),f=a(2838),g=q(a(2478)),h=q(a(37519)),i=q(a(29982)),j=q(a(55651)),k=q(a(22048));q(a(95490));var l=q(a(84124)),m=a(29999),n=q(a(4711)),o=q(a(7977)),p=q(a(87276));function q(a){return a&&a.__esModule?a:{default:a}}class c{constructor(a,b){this.settings=(0,f.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),(0,f.extend)(this.settings,b),"object"==typeof this.settings.manager&&(this.manager=this.settings.manager),this.book=a,this.hooks={},this.hooks.display=new g.default(this),this.hooks.serialize=new g.default(this),this.hooks.content=new g.default(this),this.hooks.unloaded=new g.default(this),this.hooks.layout=new g.default(this),this.hooks.render=new g.default(this),this.hooks.show=new g.default(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new k.default(this),this.annotations=new l.default(this),this.epubcfi=new h.default,this.q=new i.default(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new f.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(a){this.manager=a}requireManager(a){var b;return"string"==typeof a&&"default"===a?o.default:"string"==typeof a&&"continuous"===a?p.default:a}requireView(a){var b;return"string"==typeof a&&"iframe"===a?n.default:a}start(){switch(this.settings.layout||"pre-paginated"!==this.book.package.metadata.layout&&"true"!==this.book.displayOptions.fixedLayout||(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(m.EVENTS.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(m.EVENTS.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(m.EVENTS.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(m.EVENTS.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(m.EVENTS.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(m.EVENTS.RENDITION.STARTED),this.starting.resolve()}attachTo(a){return this.q.enqueue((function(){this.manager.render(a,{width:this.settings.width,height:this.settings.height}),this.emit(m.EVENTS.RENDITION.ATTACHED)}).bind(this))}display(a){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,a)}_display(a){if(this.book){this.epubcfi.isCfiString(a);var c,b=new f.defer,d=b.promise;return(this.displaying=b,this.book.locations.length()&&(0,f.isFloat)(a)&&(a=this.book.locations.cfiFromPercentage(parseFloat(a))),c=this.book.spine.get(a))?(this.manager.display(c,a).then(()=>{b.resolve(c),this.displaying=void 0,this.emit(m.EVENTS.RENDITION.DISPLAYED,c),this.reportLocation()},a=>{this.emit(m.EVENTS.RENDITION.DISPLAY_ERROR,a)}),d):(b.reject(Error("No Section Found")),d)}}afterDisplayed(a){a.on(m.EVENTS.VIEWS.MARK_CLICKED,(b,c)=>this.triggerMarkEvent(b,c,a.contents)),this.hooks.render.trigger(a,this).then(()=>{a.contents?this.hooks.content.trigger(a.contents,this).then(()=>{this.emit(m.EVENTS.RENDITION.RENDERED,a.section,a)}):this.emit(m.EVENTS.RENDITION.RENDERED,a.section,a)})}afterRemoved(a){this.hooks.unloaded.trigger(a,this).then(()=>{this.emit(m.EVENTS.RENDITION.REMOVED,a.section,a)})}onResized(a,b){this.emit(m.EVENTS.RENDITION.RESIZED,{width:a.width,height:a.height},b),this.location&&this.location.start&&this.display(b||this.location.start.cfi)}onOrientationChange(a){this.emit(m.EVENTS.RENDITION.ORIENTATION_CHANGE,a)}moveTo(a){this.manager.moveTo(a)}resize(a,b,c){a&&(this.settings.width=a),b&&(this.settings.height=b),this.manager.resize(a,b,c)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(a){var b,c=this.settings.layout||a.layout||"reflowable",d=this.settings.spread||a.spread||"auto",e=this.settings.orientation||a.orientation||"auto",f=this.settings.flow||a.flow||"auto",g=a.viewport||"",h=this.settings.minSpreadWidth||a.minSpreadWidth||800,i=this.settings.direction||a.direction||"ltr";return(0===this.settings.width||this.settings.width>0)&&(0===this.settings.height||this.settings.height),b={layout:c,spread:d,orientation:e,flow:f,viewport:g,minSpreadWidth:h,direction:i}}flow(a){var b=a;("scrolled"===a||"scrolled-doc"===a||"scrolled-continuous"===a)&&(b="scrolled"),("auto"===a||"paginated"===a)&&(b="paginated"),this.settings.flow=a,this._layout&&this._layout.flow(b),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(b),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(a){return a&&(this._layout=new j.default(a),this._layout.spread(a.spread,this.settings.minSpreadWidth),this._layout.on(m.EVENTS.LAYOUT.UPDATED,(a,b)=>{this.emit(m.EVENTS.RENDITION.LAYOUT,a,b)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(b,a){this.settings.spread=b,a&&(this.settings.minSpreadWidth=a),this._layout&&this._layout.spread(b,a),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(a){this.settings.direction=a||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var a=this.manager.currentLocation();if(a&&a.then&&"function"==typeof a.then)a.then((function(b){let a=this.located(b);a&&a.start&&a.end&&(this.location=a,this.emit(m.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(m.EVENTS.RENDITION.RELOCATED,this.location))}).bind(this));else if(a){let b=this.located(a);if(!b||!b.start||!b.end)return;this.location=b,this.emit(m.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(m.EVENTS.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var a=this.manager.currentLocation();if(a&&a.then&&"function"==typeof a.then)a.then((function(a){return this.located(a)}).bind(this));else if(a)return this.located(a)}located(d){if(!d.length)return{};let c=d[0],b=d[d.length-1],a={start:{index:c.index,href:c.href,cfi:c.mapping.start,displayed:{page:c.pages[0]||1,total:c.totalPages}},end:{index:b.index,href:b.href,cfi:b.mapping.end,displayed:{page:b.pages[b.pages.length-1]||1,total:b.totalPages}}},e=this.book.locations.locationFromCfi(c.mapping.start),f=this.book.locations.locationFromCfi(b.mapping.end);null!=e&&(a.start.location=e,a.start.percentage=this.book.locations.percentageFromLocation(e)),null!=f&&(a.end.location=f,a.end.percentage=this.book.locations.percentageFromLocation(f));let g=this.book.pageList.pageFromCfi(c.mapping.start),h=this.book.pageList.pageFromCfi(b.mapping.end);return -1!=g&&(a.start.page=g),-1!=h&&(a.end.page=h),b.index===this.book.spine.last().index&&a.end.displayed.page>=a.end.displayed.total&&(a.atEnd=!0),c.index===this.book.spine.first().index&&1===a.start.displayed.page&&(a.atStart=!0),a}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(a){m.DOM_EVENTS.forEach(b=>{a.on(b,b=>this.triggerViewEvent(b,a))}),a.on(m.EVENTS.CONTENTS.SELECTED,b=>this.triggerSelectedEvent(b,a))}triggerViewEvent(a,b){this.emit(a.type,a,b)}triggerSelectedEvent(a,b){this.emit(m.EVENTS.RENDITION.SELECTED,a,b)}triggerMarkEvent(a,b,c){this.emit(m.EVENTS.RENDITION.MARK_CLICKED,a,b,c)}getRange(b,c){var d=new h.default(b),a=this.manager.visible().filter(function(a){if(d.spinePos===a.index)return!0});if(a.length)return a[0].contents.range(d,c)}adjustImages(a){if("pre-paginated"===this._layout.name)return new Promise(function(a){a()});let b=a.window.getComputedStyle(a.content,null),c=(a.content.offsetHeight-(parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)))*.95,d=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight);return a.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-d+"px":"100%")+"!important","max-height":c+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-d+"px":"100%")+"!important","max-height":c+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(a,b){setTimeout(function(){a()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(a){a&&a.on(m.EVENTS.CONTENTS.LINK_CLICKED,a=>{let b=this.book.path.relative(a);this.display(b)})}injectStylesheet(b,c){let a=b.createElement("link");a.setAttribute("type","text/css"),a.setAttribute("rel","stylesheet"),a.setAttribute("href",this.settings.stylesheet),b.getElementsByTagName("head")[0].appendChild(a)}injectScript(b,c){let a=b.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",this.settings.script),a.textContent=" ",b.getElementsByTagName("head")[0].appendChild(a)}injectIdentifier(b,d){let c=this.book.packaging.metadata.identifier,a=b.createElement("meta");a.setAttribute("name","dc.relation.ispartof"),c&&a.setAttribute("content",c),b.getElementsByTagName("head")[0].appendChild(a)}}(0,d.default)(c.prototype),b.default=c},49920:function(d,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var e=a(28577),f=a(2838),g=k(a(35998)),h=k(a(73415)),i=k(a(71965)),j=k(a(69294));function k(a){return a&&a.__esModule?a:{default:a}}var c=class{constructor(b,a){this.settings={replacements:a&&a.replacements||"base64",archive:a&&a.archive,resolver:a&&a.resolver,request:a&&a.request},this.process(b)}process(a){this.manifest=a,this.resources=Object.keys(a).map(function(b){return a[b]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(a){if("application/xhtml+xml"===a.type||"text/html"===a.type)return!0}),this.assets=this.resources.filter(function(a){if("application/xhtml+xml"!==a.type&&"text/html"!==a.type)return!0}),this.css=this.resources.filter(function(a){if("text/css"===a.type)return!0})}splitUrls(){this.urls=this.assets.map((function(a){return a.href}).bind(this)),this.cssUrls=this.css.map(function(a){return a.href})}createUrl(a){var b=new g.default(a),c=h.default.lookup(b.filename);return this.settings.archive?this.settings.archive.createUrl(a,{base64:"base64"===this.settings.replacements}):"base64"===this.settings.replacements?this.settings.request(a,"blob").then(a=>(0,f.blob2base64)(a)).then(a=>(0,f.createBase64Url)(a,c)):this.settings.request(a,"blob").then(a=>(0,f.createBlobUrl)(a,c))}replacements(){return"none"===this.settings.replacements?new Promise((function(a){a(this.urls)}).bind(this)):Promise.all(this.urls.map(a=>{var b=this.settings.resolver(a);return this.createUrl(b).catch(a=>(console.error(a),null))})).then(a=>(this.replacementUrls=a.filter(a=>"string"==typeof a),a))}replaceCss(a,b){var c=[];return a=a||this.settings.archive,b=b||this.settings.resolver,this.cssUrls.forEach((function(d){var e=this.createCssFile(d,a,b).then((function(b){var a=this.urls.indexOf(d);a> -1&&(this.replacementUrls[a]=b)}).bind(this));c.push(e)}).bind(this)),Promise.all(c)}createCssFile(b){if(j.default.isAbsolute(b))return new Promise(function(a){a()});var d,a,c=this.settings.resolver(b);a=this.settings.archive?this.settings.archive.getText(c):this.settings.request(c,"text");var g=this.urls.map(a=>{var b=this.settings.resolver(a);return new i.default(c).relative(b)});return a?a.then(a=>(a=(0,e.substitute)(a,g,this.replacementUrls),d="base64"===this.settings.replacements?(0,f.createBase64Url)(a,"text/css"):(0,f.createBlobUrl)(a,"text/css")),a=>new Promise(function(a){a()})):new Promise(function(a){a()})}relativeTo(b,a){return a=a||this.settings.resolver,this.urls.map((function(c){var d=a(c);return new i.default(b).relative(d)}).bind(this))}get(a){var b=this.urls.indexOf(a);return -1===b?void 0:this.replacementUrls.length?new Promise((function(a,c){a(this.replacementUrls[b])}).bind(this)):this.createUrl(a)}substitute(c,a){var b;return b=a?this.relativeTo(a):this.urls,(0,e.substitute)(c,b,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}};b.default=c},53689:function(d,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var e=a(2838),f=k(a(37519)),g=k(a(2478)),h=a(28577),i=k(a(19939)),j=a(3969);function k(a){return a&&a.__esModule?a:{default:a}}var c=class{constructor(a,b){this.idref=a.idref,this.linear="yes"===a.linear,this.properties=a.properties,this.index=a.index,this.href=a.href,this.url=a.url,this.canonical=a.canonical,this.next=a.next,this.prev=a.prev,this.cfiBase=a.cfiBase,b?this.hooks=b:(this.hooks={},this.hooks.serialize=new g.default(this),this.hooks.content=new g.default(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(b){var c=b||this.request||i.default,a=new e.defer,d=a.promise;return this.contents?a.resolve(this.contents):c(this.url).then((function(a){return this.document=a,this.contents=a.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){a.resolve(this.contents)}).bind(this)).catch(function(b){a.reject(b)}),d}base(){return(0,h.replaceBase)(this.document,this)}render(a){var b=new e.defer,c=b.promise;return this.output,this.load(a).then((function(a){var d,b=("undefined"!=typeof navigator&&navigator.userAgent||"").indexOf("Trident")>=0,c=new("undefined"==typeof XMLSerializer||b?j.DOMParser:XMLSerializer);return this.output=c.serializeToString(a),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){b.resolve(this.output)}).bind(this)).catch(function(a){b.reject(a)}),c}find(a){var b=this,c=[],d=a.toLowerCase(),f=function(e){for(var h,a,f,j=e.textContent.toLowerCase(),g=b.document.createRange(),i=-1;-1!=a;)-1!=(a=j.indexOf(d,i+1))&&((g=b.document.createRange()).setStart(e,a),g.setEnd(e,a+d.length),h=b.cfiFromRange(g),f=e.textContent.length<150?e.textContent:"..."+(f=e.textContent.substring(a-75,a+75))+"...",c.push({cfi:h,excerpt:f})),i=a};return(0,e.sprint)(b.document,function(a){f(a)}),c}search(c,b=5){if(void 0===document.createTreeWalker)return this.find(c);let f=[],g=this,i=c.toLowerCase(),d=function(a){let m=a.reduce((a,b)=>a+b.textContent,""),n=m.toLowerCase(),b=n.indexOf(i);if(-1!=b){let j=0,e=b+i.length,c=0,o=0;if(b<a[j].length){let k;for(;c<a.length-1&&!(e<=(o+=a[c].length));)c+=1;let p=a[j],q=a[c],h=g.document.createRange();h.setStart(p,b);let l=a.slice(0,c).reduce((a,b)=>a+b.textContent.length,0);h.setEnd(q,l>e?e:e-l),k=g.cfiFromRange(h);let d=a.slice(0,c+1).reduce((a,b)=>a+b.textContent,"");d.length>150&&(d="..."+(d=d.substring(b-75,b+75))+"..."),f.push({cfi:k,excerpt:d})}}},h=document.createTreeWalker(g.document,NodeFilter.SHOW_TEXT,null,!1),e,a=[];for(;e=h.nextNode();)a.push(e),a.length==b&&(d(a.slice(0,b)),a=a.slice(1,b));return a.length>0&&d(a),f}reconcileLayoutSettings(a){var b={layout:a.layout,spread:a.spread,orientation:a.orientation};return this.properties.forEach(function(f){var d,e,a=f.replace("rendition:",""),c=a.indexOf("-");-1!=c&&(d=a.slice(0,c),e=a.slice(c+1),b[d]=e)}),b}cfiFromRange(a){return new f.default(a,this.cfiBase).toString()}cfiFromElement(a){return new f.default(a,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}};b.default=c},34789:function(d,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var e=i(a(37519)),f=i(a(2478)),g=i(a(53689)),h=a(28577);function i(a){return a&&a.__esModule?a:{default:a}}var c=class{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new f.default,this.hooks.content=new f.default,this.hooks.content.register(h.replaceBase),this.hooks.content.register(h.replaceCanonical),this.hooks.content.register(h.replaceMeta),this.epubcfi=new e.default,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(a,b,c){this.items=a.spine,this.manifest=a.manifest,this.spineNodeIndex=a.spineNodeIndex,this.baseUrl=a.baseUrl||a.basePath||"",this.length=this.items.length,this.items.forEach((a,f)=>{var e,d=this.manifest[a.idref];a.index=f,a.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,a.index,a.id),a.href&&(a.url=b(a.href,!0),a.canonical=c(a.href)),d&&(a.href=d.href,a.url=b(a.href,!0),a.canonical=c(a.href),d.properties.length&&a.properties.push.apply(a.properties,d.properties)),"yes"===a.linear?(a.prev=(function(){let b=a.index;for(;b>0;){let c=this.get(b-1);if(c&&c.linear)return c;b-=1}}).bind(this),a.next=(function(){let b=a.index;for(;b<this.spineItems.length-1;){let c=this.get(b+1);if(c&&c.linear)return c;b+=1}}).bind(this)):(a.prev=function(){},a.next=function(){}),e=new g.default(a,this.hooks),this.append(e)}),this.loaded=!0}get(a){var b=0;if(void 0===a)for(;b<this.spineItems.length;){let c=this.spineItems[b];if(c&&c.linear)break;b+=1}else this.epubcfi.isCfiString(a)?b=new e.default(a).spinePos:"number"==typeof a|| !1===isNaN(a)?b=a:"string"==typeof a&&0===a.indexOf("#")?b=this.spineById[a.substring(1)]:"string"==typeof a&&(a=a.split("#")[0],b=this.spineByHref[a]||this.spineByHref[encodeURI(a)]);return this.spineItems[b]||null}append(a){var b=this.spineItems.length;return a.index=b,this.spineItems.push(a),this.spineByHref[decodeURI(a.href)]=b,this.spineByHref[encodeURI(a.href)]=b,this.spineByHref[a.href]=b,this.spineById[a.idref]=b,b}prepend(a){return this.spineByHref[a.href]=0,this.spineById[a.idref]=0,this.spineItems.forEach(function(a,b){a.index=b}),0}remove(a){var b=this.spineItems.indexOf(a);if(b> -1)return delete this.spineByHref[a.href],delete this.spineById[a.idref],this.spineItems.splice(b,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let a=0;do{let b=this.get(a);if(b&&b.linear)return b;a+=1}while(a<this.spineItems.length)}last(){let a=this.spineItems.length-1;do{let b=this.get(a);if(b&&b.linear)return b;a-=1}while(a>=0)}destroy(){this.each(a=>a.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}};b.default=c},36294:function(e,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var f=a(2838),g=k(a(19939)),h=k(a(73415)),i=k(a(71965)),d=k(a(48370)),j=k(a(69483));function k(a){return a&&a.__esModule?a:{default:a}}class c{constructor(a,b,c){this.urlCache={},this.storage=void 0,this.name=a,this.requester=b||g.default,this.resolver=c,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let a;void 0===j.default&&(a=j.default),this.storage=a.createInstance({name:this.name})}catch(b){throw Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(b){let a=navigator.onLine;this.online=a,a?this.emit("online",this):this.emit("offline",this)}add(a,b){return Promise.all(a.resources.map(a=>{let{href:c}=a,d=this.resolver(c),e=window.encodeURIComponent(d);return this.storage.getItem(e).then(a=>!a||b?this.requester(d,"binary").then(a=>this.storage.setItem(e,a)):a)}))}put(a,c,d){let b=window.encodeURIComponent(a);return this.storage.getItem(b).then(e=>e||this.requester(a,"binary",c,d).then(a=>this.storage.setItem(b,a)))}request(a,b,c,d){return this.online?this.requester(a,b,c,d).then(b=>(this.put(a),b)):this.retrieve(a,b)}retrieve(a,b){new f.defer;var d,c=new i.default(a);return b||(b=c.extension),("blob"==b?this.getBlob(a):this.getText(a)).then(d=>{var e,c=new f.defer;return d?(e=this.handleResponse(d,b),c.resolve(e)):c.reject({message:"File not found in storage: "+a,stack:Error().stack}),c.promise})}handleResponse(a,b){var c;return"json"==b?JSON.parse(a):(0,f.isXml)(b)?(0,f.parse)(a,"text/xml"):"xhtml"==b?(0,f.parse)(a,"application/xhtml+xml"):"html"==b||"htm"==b?(0,f.parse)(a,"text/html"):a}getBlob(a,c){let b=window.encodeURIComponent(a);return this.storage.getItem(b).then(function(b){if(b)return c=c||h.default.lookup(a),new Blob([b],{type:c})})}getText(a,b){let c=window.encodeURIComponent(a);return b=b||h.default.lookup(a),this.storage.getItem(c).then(function(a){var c,e=new f.defer,d=new FileReader;if(a)return c=new Blob([a],{type:b}),d.addEventListener("loadend",()=>{e.resolve(d.result)}),d.readAsText(c,b),e.promise})}getBase64(a,b){let c=window.encodeURIComponent(a);return b=b||h.default.lookup(a),this.storage.getItem(c).then(a=>{var c,e=new f.defer,d=new FileReader;if(a)return c=new Blob([a],{type:b}),d.addEventListener("loadend",()=>{e.resolve(d.result)}),d.readAsDataURL(c,b),e.promise})}createUrl(a,d){var g,b,c=new f.defer,h=window.URL||window.webkitURL||window.mozURL,e=d&&d.base64;return a in this.urlCache?(c.resolve(this.urlCache[a]),c.promise):(e?(b=this.getBase64(a))&&b.then((function(b){this.urlCache[a]=b,c.resolve(b)}).bind(this)):(b=this.getBlob(a))&&b.then((function(b){g=h.createObjectURL(b),this.urlCache[a]=g,c.resolve(g)}).bind(this)),b||c.reject({message:"File not found in storage: "+a,stack:Error().stack}),c.promise)}revokeUrl(b){var c=window.URL||window.webkitURL||window.mozURL,a=this.urlCache[b];a&&c.revokeObjectURL(a)}destroy(){var a=window.URL||window.webkitURL||window.mozURL;for(let b in this.urlCache)a.revokeObjectURL(b);this.urlCache={},this.removeListeners()}}(0,d.default)(c.prototype),b.default=c},22048:function(e,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,f=(a=c(35998),a&&a.__esModule?a:{default:a}),d=class{constructor(a){this.rendition=a,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){return 0===arguments.length?void 0:1===arguments.length&&"object"==typeof arguments[0]?this.registerThemes(arguments[0]):1===arguments.length&&"string"==typeof arguments[0]?this.default(arguments[0]):2===arguments.length&&"string"==typeof arguments[1]?this.registerUrl(arguments[0],arguments[1]):2===arguments.length&&"object"==typeof arguments[1]?this.registerRules(arguments[0],arguments[1]):void 0}default(a){return a?"string"==typeof a?this.registerUrl("default",a):"object"==typeof a?this.registerRules("default",a):void 0:void 0}registerThemes(b){for(var a in b)b.hasOwnProperty(a)&&("string"==typeof b[a]?this.registerUrl(a,b[a]):this.registerRules(a,b[a]))}registerCss(a,b){this._themes[a]={serialized:b},(this._injected[a]||"default"==a)&&this.update(a)}registerUrl(a,b){var c=new f.default(b);this._themes[a]={url:c.toString()},(this._injected[a]||"default"==a)&&this.update(a)}registerRules(a,b){this._themes[a]={rules:b},(this._injected[a]||"default"==a)&&this.update(a)}select(a){var b,c=this._current;this._current=a,this.update(a),this.rendition.getContents().forEach(b=>{b.removeClass(c),b.addClass(a)})}update(a){this.rendition.getContents().forEach(b=>{this.add(a,b)})}inject(d){var b,e=[],c=this._themes;for(var a in c)c.hasOwnProperty(a)&&(a===this._current||"default"===a)&&(((b=c[a]).rules&&Object.keys(b.rules).length>0||b.url&& -1===e.indexOf(b.url))&&this.add(a,d),this._injected.push(a));"default"!=this._current&&d.addClass(this._current)}add(c,b){var a=this._themes[c];a&&b&&(a.url?b.addStylesheet(a.url):a.serialized?(b.addStylesheetCss(a.serialized,c),a.injected=!0):a.rules&&(b.addStylesheetRules(a.rules,c),a.injected=!0))}override(a,b,c){var d=this.rendition.getContents();this._overrides[a]={value:b,priority:!0===c},d.forEach(b=>{b.css(a,this._overrides[a].value,this._overrides[a].priority)})}removeOverride(a){var b=this.rendition.getContents();delete this._overrides[a],b.forEach(b=>{b.css(a)})}overrides(c){var a=this._overrides;for(var b in a)a.hasOwnProperty(b)&&c.css(b,a[b].value,a[b].priority)}fontSize(a){this.override("font-size",a)}font(a){this.override("font-family",a,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}};b.default=d},29999:function(b,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.EVENTS=a.EPUBJS_VERSION=a.DOM_EVENTS=void 0,a.EPUBJS_VERSION="0.3",a.DOM_EVENTS=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],a.EVENTS={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}}},2838:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.RangeObject=void 0,a.blob2base64=function(a){return new Promise(function(c,d){var b=new FileReader;b.readAsDataURL(a),b.onloadend=function(){c(b.result)}})},a.borders=function(a){var d=window.getComputedStyle(a),b=0,c=0;return["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(function(a){b+=parseFloat(d[a])||0}),["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(function(a){c+=parseFloat(d[a])||0}),{height:c,width:b}},a.bounds=function(a){var d=window.getComputedStyle(a),b=0,c=0;return["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(function(a){b+=parseFloat(d[a])||0}),["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(function(a){c+=parseFloat(d[a])||0}),{height:c,width:b}},a.createBase64Url=function(a,b){var c,d;if("string"==typeof a)return"data:"+b+";base64,"+btoa(a)},a.createBlob=l,a.createBlobUrl=function(a,b){var d,c=l(a,b);return f.createObjectURL(c)},a.defaults=function(a){for(var b=1,e=arguments.length;b<e;b++){var d=arguments[b];for(var c in d)void 0===a[c]&&(a[c]=d[c])}return a},a.defer=function(){this.resolve=null,this.reject=null,this.id=g(),this.promise=new Promise((a,b)=>{this.resolve=a,this.reject=b}),Object.freeze(this)},a.documentHeight=function(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)},a.extend=function(a){var b=[].slice.call(arguments,1);return b.forEach(function(b){b&&Object.getOwnPropertyNames(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))})}),a},a.filterChildren=function(f,g,c){for(var d=[],e=f.childNodes,b=0;b<e.length;b++){let a=e[b];if(1===a.nodeType&&a.nodeName.toLowerCase()===g){if(c)return a;d.push(a)}}if(!c)return d},a.findChildren=function(e){for(var b=[],c=e.childNodes,a=0;a<c.length;a++){let d=c[a];1===d.nodeType&&b.push(d)}return b},a.getParentByTagName=function(b,c){let a;if(null!==b&&""!==c)for(a=b.parentNode;1===a.nodeType;){if(a.tagName.toLowerCase()===c)return a;a=a.parentNode}},a.indexOfElementNode=function(a){return k(a,1)},a.indexOfNode=k,a.indexOfSorted=j,a.indexOfTextNode=function(a){return k(a,3)},a.insert=function(a,b,d){var c=i(a,b,d);return b.splice(c,0,a),c},a.isElement=function(a){return!!(a&&1==a.nodeType)},a.isFloat=function(a){let b=parseFloat(a);return!1!==h(a)&&(!!("string"==typeof a&&a.indexOf(".")> -1)||Math.floor(b)!==b)},a.isNumber=h,a.isXml=function(a){return["xml","opf","ncx"].indexOf(a)> -1},a.locationOf=i,a.nodeBounds=function(a){let b,d=a.ownerDocument;if(a.nodeType==Node.TEXT_NODE){let c=d.createRange();c.selectNodeContents(a),b=c.getBoundingClientRect()}else b=a.getBoundingClientRect();return b},a.parents=p,a.parse=function(a,c,d){var f,b;return b="undefined"==typeof DOMParser||d?e.DOMParser:DOMParser,65279===a.charCodeAt(0)&&(a=a.slice(1)),new b().parseFromString(a,c)},a.prefixed=function(b){var d=["-webkit-","-webkit-","-moz-","-o-","-ms-"],c=b.toLowerCase();if("undefined"==typeof document|| void 0!==document.body.style[c])return b;for(var a=0;a<5;a++)if(void 0!==document.body.style[d[a]+c])return d[a]+c;return b},a.qs=function(a,b){var c;if(!a)throw Error("No Element Provided");return void 0!==a.querySelector?a.querySelector(b):(c=a.getElementsByTagName(b)).length?c[0]:void 0},a.qsa=m,a.qsp=function(b,a,c){var d,e;if(void 0!==b.querySelector){for(var f in a+="[",c)a+=f+"~='"+c[f]+"'";return a+="]",b.querySelector(a)}if(d=b.getElementsByTagName(a),e=Array.prototype.slice.call(d,0).filter(function(b){for(var a in c)if(b.getAttribute(a)===c[a])return!0;return!1}))return e[0]},a.querySelectorByType=function(c,e,d){var a;if(void 0!==c.querySelector&&(a=c.querySelector(`${e}[*|type="${d}"]`)),a&&0!==a.length)return a;a=m(c,e);for(var b=0;b<a.length;b++)if(a[b].getAttributeNS("http://www.idpf.org/2007/ops","type")===d||a[b].getAttribute("epub:type")===d)return a[b]},a.requestAnimationFrame=void 0,a.revokeBlobUrl=function(a){return f.revokeObjectURL(a)},a.sprint=function(a,b){void 0!==(a.ownerDocument||a).createTreeWalker?n(a,b,NodeFilter.SHOW_TEXT):o(a,function(a){a&&3===a.nodeType&&b(a)},!0)},a.treeWalker=n,a.type=function(a){return Object.prototype.toString.call(a).slice(8,-1)},a.uuid=g,a.walk=o,a.windowBounds=function(){var a=window.innerWidth,b=window.innerHeight;return{top:0,left:0,right:a,bottom:b,width:a,height:b}};var e=b(3969);let c="undefined"!=typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);a.requestAnimationFrame=c;let f="undefined"!=typeof URL?URL:"undefined"!=typeof window?window.URL||window.webkitURL||window.mozURL:void 0;function g(){var a=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var b=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==c?b:7&b|8).toString(16)})}function h(a){return!isNaN(parseFloat(a))&&isFinite(a)}function i(g,d,b,h,j){var e,c=h||0,f=j||d.length,a=parseInt(c+(f-c)/2);return(b||(b=function(a,b){return a>b?1:a<b?-1:a==b?0:void 0}),f-c<=0)?a:(e=b(d[a],g),f-c==1)?e>=0?a:a+1:0===e?a:-1===e?i(g,d,b,a,f):i(g,d,b,c,a)}function j(g,d,a,h,i){var e,b=h||0,f=i||d.length,c=parseInt(b+(f-b)/2);return(a||(a=function(a,b){return a>b?1:a<b?-1:a==b?0:void 0}),f-b<=0)?-1:(e=a(d[c],g),f-b==1)?0===e?c:-1:0===e?c:-1===e?j(g,d,a,c,f):j(g,d,a,b,c)}function k(b,f){for(var c,d=b.parentNode.childNodes,e=-1,a=0;a<d.length&&((c=d[a]).nodeType===f&&e++,c!=b);a++);return e}function l(a,b){return new Blob([a],{type:b})}function m(a,b){return void 0!==a.querySelector?a.querySelectorAll(b):a.getElementsByTagName(b)}function n(b,c,d){var e=document.createTreeWalker(b,d,null,!1);let a;for(;a=e.nextNode();)c(a)}function o(a,b){if(b(a))return!0;if(a=a.firstChild)do{if(o(a,b))return!0;a=a.nextSibling}while(a)}function p(a){for(var b=[a];a;a=a.parentNode)b.unshift(a);return b}a.RangeObject=class{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(a,b){this.startContainer=a,this.startOffset=b,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(a,b){this.endContainer=a,this.endOffset=b,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(a){this.collapsed=!0,a?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(b){let a=b.parentNode,c=Array.prototype.indexOf.call(a.childNodes,b);this.setStart(a,c),this.setEnd(a,c+1)}selectNodeContents(a){a.childNodes[a.childNodes-1];let b=3===a.nodeType?a.textContent.length:parent.childNodes.length;this.setStart(a,0),this.setEnd(a,b)}_commonAncestorContainer(d,e){var b=p(d||this.startContainer),c=p(e||this.endContainer);if(b[0]==c[0]){for(var a=0;a<b.length;a++)if(b[a]!=c[a])return b[a-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}},2478:function(c,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var b=class{constructor(a){this.context=a||this,this.hooks=[]}register(){for(var a=0;a<arguments.length;++a)if("function"==typeof arguments[a])this.hooks.push(arguments[a]);else for(var b=0;b<arguments[a].length;++b)this.hooks.push(arguments[a][b])}deregister(b){let c;for(let a=0;a<this.hooks.length;a++)if(this.hooks[a]===b){this.hooks.splice(a,1);break}}trigger(){var b=arguments,c=this.context,a=[];return this.hooks.forEach(function(e){try{var d=e.apply(c,b)}catch(f){console.log(f)}d&&"function"==typeof d.then&&a.push(d)}),Promise.all(a)}list(){return this.hooks}clear(){return this.hooks=[]}};a.default=b},73415:function(b,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},d=function(){var a,b,d,e,f={};for(a in c)if(c.hasOwnProperty(a)){for(b in c[a])if(c[a].hasOwnProperty(b)){if("string"==typeof(d=c[a][b]))f[d]=a+"/"+b;else for(e=0;e<d.length;e++)f[d[e]]=a+"/"+b}}return f}();a.default={lookup:function(a){return a&&d[a.split(".").pop().toLowerCase()]||"text/plain"}}},71965:function(e,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,f=(a=c(69294),a&&a.__esModule?a:{default:a}),d=class{constructor(a){var c,b;a.indexOf("://")> -1&&(a=new URL(a).pathname),b=this.parse(a),this.path=a,this.isDirectory(a)?this.directory=a:this.directory=b.dir+"/",this.filename=b.base,this.extension=b.ext.slice(1)}parse(a){return f.default.parse(a)}isAbsolute(a){return f.default.isAbsolute(a||this.path)}isDirectory(a){return"/"===a.charAt(a.length-1)}resolve(a){return f.default.resolve(this.directory,a)}relative(a){return a&&a.indexOf("://")> -1?a:f.default.relative(this.directory,a)}splitPath(a){return this.splitPathRe.exec(a).slice(1)}toString(){return this.path}};b.default=d},29982:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Task=void 0;var e=b(2838);a.Task=class{constructor(a,b,c){return function(){var b=arguments||[];return new Promise((d,e)=>{b.push(function(a,b){!a&&b?e(b):d(a)}),a.apply(c||this,b)})}}};var c=class{constructor(a){this._q=[],this.context=a,this.tick=e.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var c,d,a,b=[].shift.call(arguments),f=arguments;if(!b)throw Error("No Task Provided");return"function"==typeof b?(d=(c=new e.defer).promise,a={task:b,args:f,deferred:c,promise:d}):a={promise:b},this._q.push(a),!1!=this.paused||this.running||this.run(),a.promise}dequeue(){var a,c,b;return!this._q.length||this.paused?((a=new e.defer).deferred.resolve(),a.promise):(c=(a=this._q.shift()).task)?(b=c.apply(this.context,a.args))&&"function"==typeof b.then?b.then((function(){a.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){a.deferred.reject.apply(this.context,arguments)}).bind(this)):(a.deferred.resolve.apply(this.context,b),a.promise):a.promise?a.promise:void 0}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new e.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),!0==this.paused&&(this.paused=!1),this.defered.promise}flush(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running):void 0}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}};a.default=c},28577:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.replaceBase=function(d,f){var a,b,c=f.url,g=c.indexOf("://")> -1;d&&(b=(0,e.qs)(d,"head"),a=(0,e.qs)(b,"base"),a||(a=d.createElement("base"),b.insertBefore(a,b.firstChild)),!g&&window&&window.location&&(c=window.location.origin+c),a.setAttribute("href",c))},a.replaceCanonical=function(b,f){var c,a,d=f.canonical;b&&(c=(0,e.qs)(b,"head"),a=(0,e.qs)(c,"link[rel='canonical']"),a?a.setAttribute("href",d):((a=b.createElement("link")).setAttribute("rel","canonical"),a.setAttribute("href",d),c.appendChild(a)))},a.replaceLinks=function(c,h){var a=c.querySelectorAll("a[href]");if(a.length)for(var d=(0,e.qs)(c.ownerDocument,"base"),i=d?d.getAttribute("href"):void 0,g=(function(a){var c,b=a.getAttribute("href");if(0!==b.indexOf("mailto:")){if(b.indexOf("://")> -1)a.setAttribute("target","_blank");else{try{c=new f.default(b,i)}catch(d){}a.onclick=function(){return c&&c.hash?h(c.Path.path+c.hash):c?h(c.Path.path):h(b),!1}}}}).bind(this),b=0;b<a.length;b++)g(a[b])},a.replaceMeta=function(b,f){var c,a,d=f.idref;b&&(c=(0,e.qs)(b,"head"),a=(0,e.qs)(c,"link[property='dc.identifier']"),a?a.setAttribute("content",d):((a=b.createElement("meta")).setAttribute("name","dc.identifier"),a.setAttribute("content",d),c.appendChild(a)))},a.substitute=function(a,b,c){return b.forEach(function(b,d){b&&c[d]&&(b=b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),a=a.replace(RegExp(b,"g"),c[d]))}),a};var e=b(2838),f=c(b(35998));function c(a){return a&&a.__esModule?a:{default:a}}c(b(71965))},19939:function(d,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a,e=c(2838),f=(a=c(71965),a&&a.__esModule?a:{default:a});b.default=function(d,b,i,g){var c,j="undefined"!=typeof window&&window.URL,k=new e.defer,a=new XMLHttpRequest,h=XMLHttpRequest.prototype;for(c in"overrideMimeType"in h||Object.defineProperty(h,"overrideMimeType",{value:function(){}}),i&&(a.withCredentials=!0),a.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var c,a=!1;if((""===this.responseType||"document"===this.responseType)&&(a=this.responseXML),200===this.status||0===this.status||a){if(!this.response&&!a)return k.reject({status:this.status,message:"Empty Response",stack:Error().stack}),k.promise;if(403===this.status)return k.reject({status:this.status,response:this.response,message:"Forbidden",stack:Error().stack}),k.promise;c=a?this.responseXML:(0,e.isXml)(b)?(0,e.parse)(this.response,"text/xml"):"xhtml"==b?(0,e.parse)(this.response,"application/xhtml+xml"):"html"==b||"htm"==b?(0,e.parse)(this.response,"text/html"):"json"==b?JSON.parse(this.response):"blob"==b?j?this.response:new Blob([this.response]):this.response,k.resolve(c)}else k.reject({status:this.status,message:this.response,stack:Error().stack})}},a.onerror=function(a){k.reject(a)},a.open("GET",d,!0),g)a.setRequestHeader(c,g[c]);return"json"==b&&a.setRequestHeader("Accept","application/json"),b||(b=new f.default(d).extension),"blob"==b&&(a.responseType=j?"blob":"arraybuffer"),(0,e.isXml)(b)&&a.overrideMimeType("text/xml"),"binary"==b&&(a.responseType="arraybuffer"),a.send(),k.promise}},57028:function(c,a){"use strict";function b(){var a=document.createElement("div");a.dir="rtl",a.style.position="fixed",a.style.width="1px",a.style.height="1px",a.style.top="0px",a.style.left="0px",a.style.overflow="hidden";var b=document.createElement("div");b.style.width="2px";var c=document.createElement("span");c.style.width="1px",c.style.display="inline-block";var d=document.createElement("span");return d.style.width="1px",d.style.display="inline-block",b.appendChild(c),b.appendChild(d),a.appendChild(b),a}Object.defineProperty(a,"__esModule",{value:!0}),a.createDefiner=b,a.default=function(){var c="reverse",a=b();return document.body.appendChild(a),a.scrollLeft>0?c="default":"undefined"!=typeof Element&&Element.prototype.scrollIntoView?(a.children[0].children[1].scrollIntoView(),a.scrollLeft<0&&(c="negative")):(a.scrollLeft=1,0===a.scrollLeft&&(c="negative")),document.body.removeChild(a),c}},35998:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=g(b(71965)),f=g(b(69294));function g(a){return a&&a.__esModule?a:{default:a}}var c=class{constructor(a,c){var f,d=a.indexOf("://")> -1,b=a;if(this.Url=void 0,this.href=a,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=c,!d&& !1!==c&&"string"!=typeof c&&window&&window.location&&(this.base=window.location.href),d||this.base)try{this.base?this.Url=new URL(a,this.base):this.Url=new URL(a),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,b=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch(g){this.Url=void 0,this.base&&(b=new e.default(this.base).resolve(b))}this.Path=new e.default(b),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(a){var b;return a.indexOf("://")> -1?a:(b=f.default.resolve(this.directory,a),this.origin+b)}relative(a){return f.default.relative(a,this.directory)}toString(){return this.href}};a.default=c},70430:function(a){"use strict";a.exports=function(){}},67191:function(b,c,a){"use strict";b.exports=a(96560)()?Object.assign:a(47346)},96560:function(a){"use strict";a.exports=function(){var a,b=Object.assign;return"function"==typeof b&&(b(a={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},47346:function(b,c,a){"use strict";var d=a(45103),e=a(32745),f=Math.max;b.exports=function(b,c){var g,a,h,i=f(arguments.length,2);for(a=1,b=Object(e(b)),h=function(a){try{b[a]=c[a]}catch(d){g||(g=d)}};a<i;++a)c=arguments[a],d(c).forEach(h);if(void 0!==g)throw g;return b}},76914:function(a,c,b){"use strict";var d=b(70430)();a.exports=function(a){return a!==d&&null!==a}},45103:function(b,c,a){"use strict";b.exports=a(17446)()?Object.keys:a(96137)},17446:function(a){"use strict";a.exports=function(){try{return Object.keys("primitive"),!0}catch(a){return!1}}},96137:function(a,c,b){"use strict";var d=b(76914),e=Object.keys;a.exports=function(a){return e(d(a)?Object(a):a)}},5516:function(a,c,b){"use strict";var d=b(76914),e=Array.prototype.forEach,f=Object.create,g=function(b,c){var a;for(a in b)c[a]=b[a]};a.exports=function(b){var a=f(null);return e.call(arguments,function(b){d(b)&&g(Object(b),a)}),a}},31290:function(a){"use strict";a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function");return a}},32745:function(a,c,b){"use strict";var d=b(76914);a.exports=function(a){if(!d(a))throw TypeError("Cannot use null or undefined");return a}},49981:function(b,c,a){"use strict";b.exports=a(43591)()?String.prototype.contains:a(6042)},43591:function(a){"use strict";var b="razdwatrzy";a.exports=function(){return"function"==typeof b.contains&& !0===b.contains("dwa")&& !1===b.contains("foo")}},6042:function(a){"use strict";var b=String.prototype.indexOf;a.exports=function(a){return b.call(this,a,arguments[1])> -1}},48370:function(j,f,g){"use strict";var b,c,d,e,h,i,k,a=g(51804),m=g(31290),n=Function.prototype.apply,o=Function.prototype.call,p=Object.create,q=Object.defineProperty,l=Object.defineProperties,r=Object.prototype.hasOwnProperty,s={configurable:!0,enumerable:!1,writable:!0};b=function(b,c){var a;return m(c),r.call(this,"__ee__")?a=this.__ee__:(a=s.value=p(null),q(this,"__ee__",s),s.value=null),a[b]?"object"==typeof a[b]?a[b].push(c):a[b]=[a[b],c]:a[b]=c,this},c=function(e,a){var c,f;return m(a),f=this,b.call(this,e,c=function(){d.call(f,e,c),n.call(a,this,arguments)}),c.__eeOnceListener__=a,this},d=function(d,b){var e,a,f,c;if(m(b),!r.call(this,"__ee__")||!(e=this.__ee__)[d])return this;if("object"==typeof(a=e[d]))for(c=0;f=a[c];++c)(f===b||f.__eeOnceListener__===b)&&(2===a.length?e[d]=a[c?0:1]:a.splice(c,1));else(a===b||a.__eeOnceListener__===b)&&delete e[d];return this},e=function(f){var a,c,e,b,d;if(r.call(this,"__ee__")&&(b=this.__ee__[f])){if("object"==typeof b){for(a=1,c=arguments.length,d=Array(c-1);a<c;++a)d[a-1]=arguments[a];for(a=0,b=b.slice();e=b[a];++a)n.call(e,this,d)}else switch(arguments.length){case 1:o.call(b,this);break;case 2:o.call(b,this,arguments[1]);break;case 3:o.call(b,this,arguments[1],arguments[2]);break;default:for(a=1,c=arguments.length,d=Array(c-1);a<c;++a)d[a-1]=arguments[a];n.call(b,this,d)}}},h={on:b,once:c,off:d,emit:e},i={on:a(b),once:a(c),off:a(d),emit:a(e)},k=l({},i),j.exports=f=function(a){return null==a?p(k):l(Object(a),i)},f.methods=h},18552:function(b,f,a){var c=a(10852),d=a(55639),e=c(d,"DataView");b.exports=e},53818:function(b,f,a){var c=a(10852),d=a(55639),e=c(d,"Promise");b.exports=e},58525:function(b,f,a){var c=a(10852),d=a(55639),e=c(d,"Set");b.exports=e},88668:function(c,f,b){var g=b(83369),d=b(90619),e=b(72385);function a(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new g;++b<c;)this.add(a[b])}a.prototype.add=a.prototype.push=d,a.prototype.has=e,c.exports=a},70577:function(b,f,a){var c=a(10852),d=a(55639),e=c(d,"WeakMap");b.exports=e},77412:function(a){a.exports=function(a,c){for(var b=-1,d=null==a?0:a.length;++b<d&& !1!==c(a[b],b,a););return a}},34963:function(a){a.exports=function(a,e){for(var b=-1,f=null==a?0:a.length,g=0,c=[];++b<f;){var d=a[b];e(d,b,a)&&(c[g++]=d)}return c}},47443:function(a,c,b){var d=b(42118);a.exports=function(a,b){return!!(null==a?0:a.length)&&d(a,b,0)> -1}},1196:function(a){a.exports=function(a,c,d){for(var b=-1,e=null==a?0:a.length;++b<e;)if(d(c,a[b]))return!0;return!1}},62488:function(a){a.exports=function(a,c){for(var b=-1,d=c.length,e=a.length;++b<d;)a[e+b]=c[b];return a}},82908:function(a){a.exports=function(a,c){for(var b=-1,d=null==a?0:a.length;++b<d;)if(c(a[b],b,a))return!0;return!1}},89881:function(b,f,a){var c=a(47816),d=a(99291),e=d(c);b.exports=e},41848:function(a){a.exports=function(b,d,e,c){for(var f=b.length,a=e+(c?1:-1);c?a--:++a<f;)if(d(b[a],a,b))return a;return -1}},28483:function(a,d,b){var c=b(25063)();a.exports=c},47816:function(b,c,a){var d=a(28483),e=a(3674);b.exports=function(a,b){return a&&d(a,b,e)}},97786:function(b,c,a){var d=a(71811),e=a(40327);b.exports=function(a,b){b=d(b,a);for(var c=0,f=b.length;null!=a&&c<f;)a=a[e(b[c++])];return c&&c==f?a:void 0}},68866:function(b,c,a){var d=a(62488),e=a(1469);b.exports=function(a,c,f){var b=c(a);return e(a)?b:d(b,f(a))}},13:function(a){a.exports=function(a,b){return null!=a&&b in Object(a)}},42118:function(b,c,a){var d=a(41848),e=a(62722),f=a(42351);b.exports=function(b,a,c){return a==a?f(b,a,c):d(b,e,c)}},90939:function(b,d,a){var e=a(2492),f=a(37005);function c(a,b,d,g,h){return a===b||(null!=a&&null!=b&&(f(a)||f(b))?e(a,b,d,g,c,h):a!=a&&b!=b)}b.exports=c},2492:function(b,c,a){var d=a(46384),e=a(67114),f=a(18351),g=a(16096),h=a(64160),i=a(1469),j=a(44144),k=a(36719),l="[object Arguments]",m="[object Array]",n="[object Object]",o=Object.prototype.hasOwnProperty;b.exports=function(a,c,q,s,t,b){var u=i(a),z=i(c),p=u?m:h(a),r=z?m:h(c);p=p==l?n:p,r=r==l?n:r;var v=p==n,A=r==n,w=p==r;if(w&&j(a)){if(!j(c))return!1;u=!0,v=!1}if(w&&!v)return b||(b=new d),u||k(a)?e(a,c,q,s,t,b):f(a,c,p,q,s,t,b);if(!(1&q)){var x=v&&o.call(a,"__wrapped__"),y=A&&o.call(c,"__wrapped__");if(x||y){var B=x?a.value():a,C=y?c.value():c;return b||(b=new d),t(B,C,q,s,b)}}return!!w&&(b||(b=new d),g(a,c,q,s,t,b))}},2958:function(b,c,a){var d=a(46384),e=a(90939);b.exports=function(a,o,g,f){var c=g.length,j=c,k=!f;if(null==a)return!j;for(a=Object(a);c--;){var b=g[c];if(k&&b[2]?b[1]!==a[b[0]]:!(b[0]in a))return!1}for(;++c<j;){var h=(b=g[c])[0],i=a[h],l=b[1];if(k&&b[2]){if(void 0===i&&!(h in a))return!1}else{var m=new d;if(f)var n=f(i,l,h,a,o,m);if(!(void 0===n?e(l,i,3,f,m):n))return!1}}return!0}},62722:function(a){function b(a){return a!=a}a.exports=b},67206:function(b,c,a){var d=a(91573),e=a(16432),f=a(6557),g=a(1469),h=a(39601);b.exports=function(a){return"function"==typeof a?a:null==a?f:"object"==typeof a?g(a)?e(a[0],a[1]):d(a):h(a)}},280:function(b,c,a){var d=a(25726),e=a(86916),f=Object.prototype.hasOwnProperty;b.exports=function(a){if(!d(a))return e(a);var c=[];for(var b in Object(a))f.call(a,b)&&"constructor"!=b&&c.push(b);return c}},69199:function(b,c,a){var d=a(89881),e=a(98612);b.exports=function(a,c){var f=-1,b=e(a)?Array(a.length):[];return d(a,function(a,d,e){b[++f]=c(a,d,e)}),b}},91573:function(b,c,a){var d=a(2958),e=a(1499),f=a(42634);b.exports=function(b){var a=e(b);return 1==a.length&&a[0][2]?f(a[0][0],a[0][1]):function(c){return c===b||d(c,b,a)}}},16432:function(b,c,a){var d=a(90939),e=a(27361),f=a(79095),g=a(15403),h=a(89162),i=a(42634),j=a(40327);b.exports=function(a,b){return g(a)&&h(b)?i(j(a),b):function(g){var c=e(g,a);return void 0===c&&c===b?f(g,a):d(b,c,3)}}},82689:function(b,c,a){var d=a(29932),e=a(97786),f=a(67206),g=a(69199),h=a(71131),i=a(7518),j=a(85022),k=a(6557),l=a(1469);b.exports=function(b,a,m){a=a.length?d(a,function(a){return l(a)?function(b){return e(b,1===a.length?a[0]:a)}:a}):[k];var n=-1;a=d(a,i(f));var c=g(b,function(b,c,e){return{criteria:d(a,function(a){return a(b)}),index:++n,value:b}});return h(c,function(a,b){return j(a,b,m)})}},79152:function(a,c,b){var d=b(97786);a.exports=function(a){return function(b){return d(b,a)}}},71131:function(a){a.exports=function(a,c){var b=a.length;for(a.sort(c);b--;)a[b]=a[b].value;return a}},74757:function(a){a.exports=function(a,b){return a.has(b)}},71811:function(b,c,a){var d=a(1469),e=a(15403),f=a(55514),g=a(79833);b.exports=function(a,b){return d(a)?a:e(a,b)?[a]:f(g(a))}},26393:function(a,c,b){var d=b(33448);a.exports=function(a,b){if(a!==b){var h=void 0!==a,i=null===a,c=a==a,e=d(a),j=void 0!==b,k=null===b,f=b==b,g=d(b);if(!k&&!g&&!e&&a>b||e&&j&&f&&!k&&!g||i&&j&&f|| !h&&f||!c)return 1;if(!i&&!e&&!g&&a<b||g&&h&&c&&!i&&!e||k&&h&&c|| !j&&c||!f)return -1}return 0}},85022:function(a,c,b){var d=b(26393);a.exports=function(c,e,f){for(var a=-1,g=c.criteria,h=e.criteria,i=g.length,j=f.length;++a<i;){var b=d(g[a],h[a]);if(b){if(a>=j)return b;return b*("desc"==f[a]?-1:1)}}return c.index-e.index}},99291:function(a,c,b){var d=b(98612);a.exports=function(a,b){return function(c,f){if(null==c)return c;if(!d(c))return a(c,f);for(var g=c.length,e=b?g:-1,h=Object(c);(b?e--:++e<g)&& !1!==f(h[e],e,h););return c}}},25063:function(a){a.exports=function(a){return function(b,g,h){for(var i=-1,c=Object(b),d=h(b),e=d.length;e--;){var f=d[a?e:++i];if(!1===g(c[f],f,c))break}return b}}},67114:function(b,c,a){var d=a(88668),e=a(82908),f=a(74757);b.exports=function(b,a,l,h,s,c){var n=1&l,m=b.length,o=a.length;if(m!=o&&!(n&&o>m))return!1;var p=c.get(b),q=c.get(a);if(p&&q)return p==a&&q==b;var g=-1,i=!0,t=2&l?new d:void 0;for(c.set(b,a),c.set(a,b);++g<m;){var j=b[g],k=a[g];if(h)var r=n?h(k,j,g,a,b,c):h(j,k,g,b,a,c);if(void 0!==r){if(r)continue;i=!1;break}if(t){if(!e(a,function(a,b){if(!f(t,b)&&(j===a||s(j,a,l,h,c)))return t.push(b)})){i=!1;break}}else if(!(j===k||s(j,k,l,h,c))){i=!1;break}}return c.delete(b),c.delete(a),i}},18351:function(d,e,a){var b=a(62705),f=a(11149),g=a(77813),h=a(67114),i=a(68776),j=a(21814),k=1,c=b?b.prototype:void 0,l=c?c.valueOf:void 0;d.exports=function(a,b,o,e,p,m,c){switch(o){case"[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer,b=b.buffer;case"[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!m(new f(a),new f(b)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return g(+a,+b);case"[object Error]":return a.name==b.name&&a.message==b.message;case"[object RegExp]":case"[object String]":return a==b+"";case"[object Map]":var d=i;case"[object Set]":var q=e&k;if(d||(d=j),a.size!=b.size&&!q)break;var n=c.get(a);if(n)return n==b;e|=2,c.set(a,b);var r=h(d(a),d(b),e,p,m,c);return c.delete(a),r;case"[object Symbol]":if(l)return l.call(a)==l.call(b)}return!1}},16096:function(a,c,b){var d=b(58234),e=Object.prototype.hasOwnProperty;a.exports=function(b,a,r,g,v,c){var h=1&r,o=d(b),p=o.length,w=d(a).length;if(p!=w&&!h)return!1;for(var i=p;i--;){var f=o[i];if(!(h?f in a:e.call(a,f)))return!1}var s=c.get(b),t=c.get(a);if(s&&t)return s==a&&t==b;var j=!0;c.set(b,a),c.set(a,b);for(var q=h;++i<p;){var k=b[f=o[i]],l=a[f];if(g)var u=h?g(l,k,f,a,b,c):g(k,l,f,b,a,c);if(!(void 0===u?k===l||v(k,l,r,g,c):u)){j=!1;break}q||(q="constructor"==f)}if(j&&!q){var m=b.constructor,n=a.constructor;m!=n&&"constructor"in b&&"constructor"in a&&!("function"==typeof m&&m instanceof m&&"function"==typeof n&&n instanceof n)&&(j=!1)}return c.delete(b),c.delete(a),j}},58234:function(b,c,a){var d=a(68866),e=a(99551),f=a(3674);b.exports=function(a){return d(a,f,e)}},1499:function(b,c,a){var d=a(89162),e=a(3674);b.exports=function(c){for(var a=e(c),b=a.length;b--;){var f=a[b],g=c[f];a[b]=[f,g,d(g)]}return a}},99551:function(b,f,a){var g=a(34963),c=a(70479),h=Object.prototype.propertyIsEnumerable,d=Object.getOwnPropertySymbols,e=d?function(a){return null==a?[]:g(d(a=Object(a)),function(b){return h.call(a,b)})}:c;b.exports=e},64160:function(i,p,a){var d=a(18552),e=a(57071),f=a(53818),g=a(58525),h=a(70577),j=a(44239),c=a(80346),k="[object Map]",l="[object Promise]",m="[object Set]",n="[object WeakMap]",o="[object DataView]",q=c(d),r=c(e),s=c(f),t=c(g),u=c(h),b=j;(d&&b(new d(new ArrayBuffer(1)))!=o||e&&b(new e)!=k||f&&b(f.resolve())!=l||g&&b(new g)!=m||h&&b(new h)!=n)&&(b=function(a){var b=j(a),d="[object Object]"==b?a.constructor:void 0,e=d?c(d):"";if(e)switch(e){case q:return o;case r:return k;case s:return l;case t:return m;case u:return n}return b}),i.exports=b},222:function(b,c,a){var d=a(71811),e=a(35694),f=a(1469),g=a(65776),h=a(41780),i=a(40327);b.exports=function(a,c,m){c=d(c,a);for(var j=-1,b=c.length,k=!1;++j<b;){var l=i(c[j]);if(!(k=null!=a&&m(a,l)))break;a=a[l]}return k|| ++j!=b?k:!!(b=null==a?0:a.length)&&h(b)&&g(l,b)&&(f(a)||e(a))}},15403:function(b,c,a){var d=a(1469),e=a(33448),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;b.exports=function(a,c){if(d(a))return!1;var b=typeof a;return!!("number"==b||"symbol"==b||"boolean"==b||null==a||e(a))||g.test(a)||!f.test(a)||null!=c&&a in Object(c)}},89162:function(a,c,b){var d=b(13218);a.exports=function(a){return a==a&&!d(a)}},68776:function(a){a.exports=function(a){var c=-1,b=Array(a.size);return a.forEach(function(a,d){b[++c]=[d,a]}),b}},42634:function(a){a.exports=function(a,b){return function(c){return null!=c&&c[a]===b&&(void 0!==b||a in Object(c))}}},24523:function(a,c,b){var d=b(88306);a.exports=function(b){var a=d(b,function(a){return 500===c.size&&c.clear(),a}),c=a.cache;return a}},86916:function(a,d,b){var c=b(5569)(Object.keys,Object);a.exports=c},90619:function(a){a.exports=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this}},72385:function(a){a.exports=function(a){return this.__data__.has(a)}},21814:function(a){a.exports=function(a){var c=-1,b=Array(a.size);return a.forEach(function(a){b[++c]=a}),b}},42351:function(a){a.exports=function(b,c,d){for(var a=d-1,e=b.length;++a<e;)if(b[a]===c)return a;return -1}},55514:function(a,e,b){var c=b(24523),f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,d=c(function(a){var b=[];return 46===a.charCodeAt(0)&&b.push(""),a.replace(f,function(a,c,d,e){b.push(d?e.replace(g,"$1"):c||a)}),b});a.exports=d},40327:function(a,c,b){var d=b(33448),e=1/0;a.exports=function(a){if("string"==typeof a||d(a))return a;var b=a+"";return"0"==b&&1/a== -e?"-0":b}},23279:function(b,c,a){var d=a(13218),e=a(7771),f=a(14841),g=Math.max,h=Math.min;b.exports=function(l,b,a){var n,o,i,p,q,r,s=0,m=!1,j=!1,k=!0;if("function"!=typeof l)throw TypeError("Expected a function");function t(a){var b=n,c=o;return n=o=void 0,s=a,p=l.apply(c,b)}function u(a){var c=a-r,d=a-s;return void 0===r||c>=b||c<0||j&&d>=i}function v(){var d,f,g,a,c=e();if(u(c))return w(c);q=setTimeout(v,(f=(d=c)-r,g=d-s,a=b-f,j?h(a,i-g):a))}function w(a){return(q=void 0,k&&n)?t(a):(n=o=void 0,p)}function c(){var a,c=e(),d=u(c);if(n=arguments,o=this,r=c,d){if(void 0===q)return s=a=r,q=setTimeout(v,b),m?t(a):p;if(j)return clearTimeout(q),q=setTimeout(v,b),t(r)}return void 0===q&&(q=setTimeout(v,b)),p}return b=f(b)||0,d(a)&&(m=!!a.leading,j="maxWait"in a,i=j?g(f(a.maxWait)||0,b):i,k="trailing"in a?!!a.trailing:k),c.cancel=function(){void 0!==q&&clearTimeout(q),s=0,n=r=o=q=void 0},c.flush=function(){return void 0===q?p:w(e())},c}},27361:function(a,c,b){var d=b(97786);a.exports=function(a,c,e){var b=null==a?void 0:d(a,c);return void 0===b?e:b}},79095:function(b,c,a){var d=a(13),e=a(222);b.exports=function(a,b){return null!=a&&e(a,b,d)}},6557:function(a){function b(a){return a}a.exports=b},41609:function(b,c,a){var d=a(280),e=a(64160),f=a(35694),g=a(1469),h=a(98612),i=a(44144),j=a(25726),k=a(36719),l=Object.prototype.hasOwnProperty;b.exports=function(a){if(null==a)return!0;if(h(a)&&(g(a)||"string"==typeof a||"function"==typeof a.splice||i(a)||k(a)||f(a)))return!a.length;var b=e(a);if("[object Map]"==b||"[object Set]"==b)return!a.size;if(j(a))return!d(a).length;for(var c in a)if(l.call(a,c))return!1;return!0}},3674:function(b,c,a){var d=a(14636),e=a(280),f=a(98612);b.exports=function(a){return f(a)?d(a):e(a)}},88306:function(b,e,c){var d=c(83369);function a(e,b){if("function"!=typeof e||null!=b&&"function"!=typeof b)throw TypeError("Expected a function");var c=function(){var d=arguments,f=b?b.apply(this,d):d[0],a=c.cache;if(a.has(f))return a.get(f);var g=e.apply(this,d);return c.cache=a.set(f,g)||a,g};return c.cache=new(a.Cache||d),c}a.Cache=d,b.exports=a},7771:function(a,c,b){var d=b(55639);a.exports=function(){return d.Date.now()}},39601:function(b,c,a){var d=a(40371),e=a(79152),f=a(15403),g=a(40327);b.exports=function(a){return f(a)?d(g(a)):e(a)}},70479:function(a){a.exports=function(){return[]}},23493:function(b,c,a){var d=a(23279),e=a(13218);b.exports=function(f,g,a){var b=!0,c=!0;if("function"!=typeof f)throw TypeError("Expected a function");return e(a)&&(b="leading"in a?!!a.leading:b,c="trailing"in a?!!a.trailing:c),d(f,g,{leading:b,maxWait:g,trailing:c})}},79521:function(d,a){"use strict";function b(a,g){function h(b){for(var d=g.length-1;d>=0;d--){var f=g[d],h=b.clientX,i=b.clientY;if(b.touches&&b.touches.length&&(h=b.touches[0].clientX,i=b.touches[0].clientY),e(f,a,h,i)){f.dispatchEvent(c(b));break}}}if("iframe"===a.nodeName||"IFRAME"===a.nodeName)try{this.target=a.contentDocument}catch(i){this.target=a}else this.target=a;for(var d=["mouseup","mousedown","click","touchstart"],b=0;b<d.length;b++){var f=d[b];this.target.addEventListener(f,function(a){return h(a)},!1)}}function c(b){var a=Object.assign({},b,{bubbles:!1});try{return new MouseEvent(b.type,a)}catch(d){var c=document.createEvent("MouseEvents");return c.initMouseEvent(b.type,!1,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget),c}}function e(b,g,c,d){var i=g.getBoundingClientRect();function e(a,b,c){var d=a.top-i.top,e=a.left-i.left,f=d+a.height,g=e+a.width;return d<=c&&e<=b&&f>c&&g>b}if(!e(b.getBoundingClientRect(),c,d))return!1;for(var f=b.getClientRects(),a=0,h=f.length;a<h;a++)if(e(f[a],c,d))return!0;return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.proxyMouse=b,a.clone=c,a.default={proxyMouse:b}},73476:function(g,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Underline=a.Highlight=a.Mark=a.Pane=void 0;var h=function g(a,c,d){null===a&&(a=Function.prototype);var b=Object.getOwnPropertyDescriptor(a,c);if(void 0===b){var e=Object.getPrototypeOf(a);if(null===e)return;return g(e,c,d)}if("value"in b)return b.value;var f=b.get;if(void 0!==f)return f.call(d)},i=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),c=b(11777),j=l(c),d=b(79521),k=l(d);function l(a){return a&&a.__esModule?a:{default:a}}function m(b,a){if(!b)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}function n(b,a){if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}function o(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}a.Pane=function(){function a(b){var c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:document.body;o(this,a),this.target=b,this.element=j.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),k.default.proxyMouse(this.target,this.marks),this.container=c,this.container.appendChild(this.element),this.render()}return i(a,[{key:"addMark",value:function(a){var b=j.default.createElement("g");return this.element.appendChild(b),a.bind(b,this.container),this.marks.push(a),a.render(),a}},{key:"removeMark",value:function(a){var b=this.marks.indexOf(a);if(-1!==b){var c=a.unbind();this.element.removeChild(c),this.marks.splice(b,1)}}},{key:"render",value:function(){q(this.element,p(this.target,this.container));var a=!0,c=!1,d=void 0;try{for(var e,b=this.marks[Symbol.iterator]();!(a=(e=b.next()).done);a=!0)e.value.render()}catch(f){c=!0,d=f}finally{try{!a&&b.return&&b.return()}finally{if(c)throw d}}}}]),a}();var e=a.Mark=function(){function a(){o(this,a),this.element=null}return i(a,[{key:"bind",value:function(a,b){this.element=a,this.container=b}},{key:"unbind",value:function(){var a=this.element;return this.element=null,a}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(a){this.element&&this.element.dispatchEvent(a)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var b=[],a=this.element.firstChild;a;)b.push(a.getBoundingClientRect()),a=a.nextSibling;return b}},{key:"filteredRanges",value:function(){var a=Array.from(this.range.getClientRects());return a.filter(function(c){for(var b=0;b<a.length&&a[b]!==c;b++){if(r(a[b],c))return!1}return!0})}}]),a}(),f=a.Highlight=function(b){function a(c,d,e,f){o(this,a);var b=m(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return b.range=c,b.className=d,b.data=e||{},b.attributes=f||{},b}return n(a,b),i(a,[{key:"bind",value:function(c,d){for(var b in h(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"bind",this).call(this,c,d),this.data)this.data.hasOwnProperty(b)&&(this.element.dataset[b]=this.data[b]);for(var b in this.attributes)this.attributes.hasOwnProperty(b)&&this.element.setAttribute(b,this.attributes[b]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var d=this.element.ownerDocument.createDocumentFragment(),e=this.filteredRanges(),f=this.element.getBoundingClientRect(),g=this.container.getBoundingClientRect(),c=0,h=e.length;c<h;c++){var b=e[c],a=j.default.createElement("rect");a.setAttribute("x",b.left-f.left+g.left),a.setAttribute("y",b.top-f.top+g.top),a.setAttribute("height",b.height),a.setAttribute("width",b.width),d.appendChild(a)}this.element.appendChild(d)}}]),a}(e);function p(a,d){var b=d.getBoundingClientRect(),c=a.getBoundingClientRect();return{top:c.top-b.top,left:c.left-b.left,height:a.scrollHeight,width:a.scrollWidth}}function q(a,b){a.style.setProperty("top",b.top+"px","important"),a.style.setProperty("left",b.left+"px","important"),a.style.setProperty("height",b.height+"px","important"),a.style.setProperty("width",b.width+"px","important")}function r(a,b){return b.right<=a.right&&b.left>=a.left&&b.top>=a.top&&b.bottom<=a.bottom}a.Underline=function(b){function a(b,c,d,e){return o(this,a),m(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,c,d,e))}return n(a,b),i(a,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var f=this.element.ownerDocument.createDocumentFragment(),h=this.filteredRanges(),c=this.element.getBoundingClientRect(),d=this.container.getBoundingClientRect(),g=0,i=h.length;g<i;g++){var a=h[g],e=j.default.createElement("rect");e.setAttribute("x",a.left-c.left+d.left),e.setAttribute("y",a.top-c.top+d.top),e.setAttribute("height",a.height),e.setAttribute("width",a.width),e.setAttribute("fill","none");var b=j.default.createElement("line");b.setAttribute("x1",a.left-c.left+d.left),b.setAttribute("x2",a.left-c.left+d.left+a.width),b.setAttribute("y1",a.top-c.top+d.top+a.height-1),b.setAttribute("y2",a.top-c.top+d.top+a.height-1),b.setAttribute("stroke-width",1),b.setAttribute("stroke","black"),b.setAttribute("stroke-linecap","square"),f.appendChild(e),f.appendChild(b)}this.element.appendChild(f)}}]),a}(f)},11777:function(c,a){"use strict";function b(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}Object.defineProperty(a,"__esModule",{value:!0}),a.createElement=b,a.default={createElement:b}},89624:function(c,a,b){"use strict";function d(){return Array.prototype.slice.call(arguments).reduce(function(b,a){return"string"==typeof a||Array.isArray(a)?b.concat(a):b},[]).filter(Boolean).join(" ")}b.d(a,{Z:function(){return d}})},11987:function(a,b,c){!function(){var e={477:function(a){"use strict";a.exports=c(17673)}},f={};function b(a){var d=f[a];if(void 0!==d)return d.exports;var c=f[a]={exports:{}},g=!0;try{e[a](c,c.exports,b),g=!1}finally{g&&delete f[a]}return c.exports}b.ab="//";var d={};!function(){var a,c=d,j=(a=b(477))&&"object"==typeof a&&"default"in a?a.default:a,k=/https?|ftp|gopher|file/;function g(n){"string"==typeof n&&(n=i(n));var a,o,p,g,l,c,d,h,e,b,f,m=(a=n,o=j,p=k,g=a.auth,l=a.hostname,c=a.protocol||"",d=a.pathname||"",h=a.hash||"",e=a.query||"",b=!1,g=g?encodeURIComponent(g).replace(/%3A/i,":")+"@":"",a.host?b=g+a.host:l&&(b=g+(~l.indexOf(":")?"["+l+"]":l),a.port&&(b+=":"+a.port)),e&&"object"==typeof e&&(e=o.encode(e)),f=a.search||e&&"?"+e||"",c&&":"!==c.substr(-1)&&(c+=":"),a.slashes||(!c||p.test(c))&& !1!==b?(b="//"+(b||""),d&&"/"!==d[0]&&(d="/"+d)):b||(b=""),h&&"#"!==h[0]&&(h="#"+h),f&&"?"!==f[0]&&(f="?"+f),{protocol:c,host:b,pathname:d=d.replace(/[?#]/g,encodeURIComponent),search:f=f.replace("#","%23"),hash:h});return""+m.protocol+m.host+m.pathname+m.search+m.hash}var h="http://",l=h+"w.w",m=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,n=/https?|ftp|gopher|file/;function f(a,d){var f="string"==typeof a?i(a):a;a="object"==typeof a?g(a):a;var e=i(d),c="";f.protocol&&!f.slashes&&(c=f.protocol,a=a.replace(f.protocol,""),c+="/"===d[0]||"/"===a[0]?"/":""),c&&e.protocol&&(c="",e.slashes||(c=e.protocol,d=d.replace(e.protocol,"")));var j=a.match(m);j&&!e.protocol&&(a=a.substr((c=j[1]+(j[2]||"")).length),/^\/\/[^/]/.test(d)&&(c=c.slice(0,-1)));var o=new URL(a,l+"/"),b=new URL(d,o).toString().replace(l,""),k=e.protocol||f.protocol;return k+=f.slashes||e.slashes?"//":"",!c&&k?b=b.replace(h,k):c&&(b=b.replace(h,"")),n.test(b)|| ~d.indexOf(".")||"/"===a.slice(-1)||"/"===d.slice(-1)||"/"!==b.slice(-1)||(b=b.slice(0,-1)),c&&(b=c+("/"===b[0]?b.substr(1):b)),b}function e(){}e.prototype.parse=i,e.prototype.format=g,e.prototype.resolve=f,e.prototype.resolveObject=f;var o=/^https?|ftp|gopher|file/,p=/^(.*?)([#?].*)/,q=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,r=/^([a-z0-9.+-]*:)?\/\/\/*/i,s=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function i(b,m,n){if(void 0===m&&(m=!1),void 0===n&&(n=!1),b&&"object"==typeof b&&b instanceof e)return b;var h=(b=b.trim()).match(p);b=h?h[1].replace(/\\/g,"/")+h[2]:b.replace(/\\/g,"/"),s.test(b)&&"/"!==b.slice(-1)&&(b+="/");var c=!/(^javascript)/.test(b)&&b.match(q),u=r.test(b),f="";c&&(o.test(c[1])||(f=c[1].toLowerCase(),b=""+c[2]+c[3]),c[2]||(u=!1,o.test(c[1])?(f=c[1],b=""+c[3]):b="//"+c[3]),3!==c[2].length&&1!==c[2].length||(f=c[1],b="/"+c[3]));var d,v=(h?h[1]:b).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),i=v&&v[1],a=new e,t="",k="";try{d=new URL(b)}catch(x){t=x,f||n||!/^\/\//.test(b)||/^\/\/.+[@.]/.test(b)||(k="/",b=b.substr(1));try{d=new URL(b,l)}catch(z){return a.protocol=f,a.href=f,a}}a.slashes=u&&!k,a.host="w.w"===d.host?"":d.host,a.hostname="w.w"===d.hostname?"":d.hostname.replace(/(\[|\])/g,""),a.protocol=t?f||null:d.protocol,a.search=d.search.replace(/\\/g,"%5C"),a.hash=d.hash.replace(/\\/g,"%5C");var y,w=b.split("#");!a.search&& ~w[0].indexOf("?")&&(a.search="?"),a.hash||""!==w[1]||(a.hash="#"),a.query=m?j.decode(d.search.substr(1)):a.search.substr(1),a.pathname=k+(c?(y=d.pathname).replace(/['^|`]/g,function(a){return"%"+a.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(b,a){try{return decodeURIComponent(a).split("").map(function(a){var b=a.charCodeAt();return b>256||/^[a-z0-9]$/i.test(a)?a:"%"+b.toString(16).toUpperCase()}).join("")}catch(c){return a}}):d.pathname),"about:"===a.protocol&&"blank"===a.pathname&&(a.protocol="",a.pathname=""),t&&"/"!==b[0]&&(a.pathname=a.pathname.substr(1)),f&&!o.test(f)&&"/"!==b.slice(-1)&&"/"===a.pathname&&(a.pathname=""),a.path=a.pathname+a.search,a.auth=[d.username,d.password].map(decodeURIComponent).filter(Boolean).join(":"),a.port=d.port,i&&!a.host.endsWith(i)&&(a.host+=i,a.port=i.slice(1)),a.href=k?""+a.pathname+a.search+a.hash:g(a);var A=/^(file)/.test(a.href)?["host","hostname"]:[];return Object.keys(a).forEach(function(b){~A.indexOf(b)||(a[b]=a[b]||null)}),a}c.parse=i,c.format=g,c.resolve=f,c.resolveObject=function(a,b){return i(f(a,b))},c.Url=e}(),a.exports=d}()},69294:function(a){"use strict";if(!c)var c={cwd:function(){return"/"}};function d(a){if("string"!=typeof a)throw TypeError("Path must be a string. Received "+a)}function e(f,i){for(var g,a="",d=-1,c=0,b=0;b<=f.length;++b){if(b<f.length)g=f.charCodeAt(b);else if(47===g)break;else g=47;if(47===g){if(d===b-1||1===c);else if(d!==b-1&&2===c){if(a.length<2||46!==a.charCodeAt(a.length-1)||46!==a.charCodeAt(a.length-2)){if(a.length>2){for(var h=a.length-1,e=h;e>=0&&47!==a.charCodeAt(e);--e);if(e!==h){a=-1===e?"":a.slice(0,e),d=b,c=0;continue}}else if(2===a.length||1===a.length){a="",d=b,c=0;continue}}i&&(a.length>0?a+="/..":a="..")}else a.length>0?a+="/"+f.slice(d+1,b):a=f.slice(d+1,b);d=b,c=0}else 46===g&& -1!==c?++c:c=-1}return a}var b={resolve:function(){for(var h,b,a="",f=!1,g=arguments.length-1;g>= -1&&!f;g--)g>=0?b=arguments[g]:(void 0===h&&(h=c.cwd()),b=h),d(b),0!==b.length&&(a=b+"/"+a,f=47===b.charCodeAt(0));return(a=e(a,!f),f)?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(a){if(d(a),0===a.length)return".";var b=47===a.charCodeAt(0),c=47===a.charCodeAt(a.length-1);return(0!==(a=e(a,!b)).length||b||(a="."),a.length>0&&c&&(a+="/"),b)?"/"+a:a},isAbsolute:function(a){return d(a),a.length>0&&47===a.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var a,e=0;e<arguments.length;++e){var c=arguments[e];d(c),c.length>0&&(void 0===a?a=c:a+="/"+c)}return void 0===a?".":b.normalize(a)},relative:function(f,c){if(d(f),d(c),f===c||(f=b.resolve(f),c=b.resolve(c),f===c))return"";for(var g=1;g<f.length&&47===f.charCodeAt(g);++g);for(var k=f.length,l=k-g,e=1;e<c.length&&47===c.charCodeAt(e);++e);for(var m=c.length-e,j=l<m?l:m,h=-1,a=0;a<=j;++a){if(a===j){if(m>j){if(47===c.charCodeAt(e+a))return c.slice(e+a+1);if(0===a)return c.slice(e+a)}else l>j&&(47===f.charCodeAt(g+a)?h=a:0===a&&(h=0));break}var n=f.charCodeAt(g+a);if(n!==c.charCodeAt(e+a))break;47===n&&(h=a)}var i="";for(a=g+h+1;a<=k;++a)(a===k||47===f.charCodeAt(a))&&(0===i.length?i+="..":i+="/..");return i.length>0?i+c.slice(e+h):(e+=h,47===c.charCodeAt(e)&& ++e,c.slice(e))},_makeLong:function(a){return a},dirname:function(a){if(d(a),0===a.length)return".";for(var e=a.charCodeAt(0),f=47===e,b=-1,g=!0,c=a.length-1;c>=1;--c)if(47===(e=a.charCodeAt(c))){if(!g){b=c;break}}else g=!1;return -1===b?f?"/":".":f&&1===b?"//":a.slice(0,b)},basename:function(b,e){if(void 0!==e&&"string"!=typeof e)throw TypeError('"ext" argument must be a string');d(b);var a,f=0,c=-1,g=!0;if(void 0!==e&&e.length>0&&e.length<=b.length){if(e.length===b.length&&e===b)return"";var h=e.length-1,i=-1;for(a=b.length-1;a>=0;--a){var j=b.charCodeAt(a);if(47===j){if(!g){f=a+1;break}}else -1===i&&(g=!1,i=a+1),h>=0&&(j===e.charCodeAt(h)?-1== --h&&(c=a):(h=-1,c=i))}return f===c?c=i:-1===c&&(c=b.length),b.slice(f,c)}for(a=b.length-1;a>=0;--a)if(47===b.charCodeAt(a)){if(!g){f=a+1;break}}else -1===c&&(g=!1,c=a+1);return -1===c?"":b.slice(f,c)},extname:function(f){d(f);for(var a=-1,g=0,c=-1,h=!0,e=0,b=f.length-1;b>=0;--b){var i=f.charCodeAt(b);if(47===i){if(!h){g=b+1;break}continue}-1===c&&(h=!1,c=b+1),46===i?-1===a?a=b:1!==e&&(e=1):-1!==a&&(e=-1)}return -1===a|| -1===c||0===e||1===e&&a===c-1&&a===g+1?"":f.slice(a,c)},format:function(c){var e,a,b,d;if(null===c||"object"!=typeof c)throw TypeError('Parameter "pathObject" must be an object, not '+typeof c);return b=(a=c).dir||a.root,d=a.base||(a.name||"")+(a.ext||""),b?b===a.root?b+d:b+"/"+d:d},parse:function(b){d(b);var j,a={root:"",dir:"",base:"",ext:"",name:""};if(0===b.length)return a;var k=b.charCodeAt(0),i=47===k;i?(a.root="/",j=1):j=0;for(var e=-1,f=0,c=-1,l=!0,g=b.length-1,h=0;g>=j;--g){if(47===(k=b.charCodeAt(g))){if(!l){f=g+1;break}continue}-1===c&&(l=!1,c=g+1),46===k?-1===e?e=g:1!==h&&(h=1):-1!==e&&(h=-1)}return -1===e|| -1===c||0===h||1===h&&e===c-1&&e===f+1?-1!==c&&(0===f&&i?a.base=a.name=b.slice(1,c):a.base=a.name=b.slice(f,c)):(0===f&&i?(a.name=b.slice(1,e),a.base=b.slice(1,c)):(a.name=b.slice(f,e),a.base=b.slice(f,c)),a.ext=b.slice(e,c)),f>0?a.dir=b.slice(0,f-1):i&&(a.dir="/"),a},sep:"/",delimiter:":",posix:null};a.exports=b},62587:function(a){"use strict";function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}a.exports=function(d,h,i,j){h=h||"&",i=i||"=";var a={};if("string"!=typeof d||0===d.length)return a;var p=/\+/g;d=d.split(h);var e=1e3;j&&"number"==typeof j.maxKeys&&(e=j.maxKeys);var k=d.length;e>0&&k>e&&(k=e);for(var l=0;l<k;++l){var m,n,c,f,g=d[l].replace(p,"%20"),o=g.indexOf(i);o>=0?(m=g.substr(0,o),n=g.substr(o+1)):(m=g,n=""),c=decodeURIComponent(m),f=decodeURIComponent(n),b(a,c)?Array.isArray(a[c])?a[c].push(f):a[c]=[a[c],f]:a[c]=f}return a}},12361:function(a){"use strict";var b=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};a.exports=function(a,c,d,e){return(c=c||"&",d=d||"=",null===a&&(a=void 0),"object"==typeof a)?Object.keys(a).map(function(e){var f=encodeURIComponent(b(e))+d;return Array.isArray(a[e])?a[e].map(function(a){return f+encodeURIComponent(b(a))}).join(c):f+encodeURIComponent(b(a[e]))}).join(c):e?encodeURIComponent(b(e))+d+encodeURIComponent(b(a)):""}},17673:function(c,a,b){"use strict";a.decode=a.parse=b(62587),a.encode=a.stringify=b(12361)},90839:function(O,x,c){"use strict";c.d(x,{BB:function(){return t},T3:function(){return aJ},v0:function(){return g}});var P,g=c(78783),Q=c(87462),R=c(63366);function S(a,d){if(null==a)return{};var b,c,e=(0,R.Z)(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}function T(a){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function U(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function V(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function W(a,b,c){return b&&V(a.prototype,b),c&&V(a,c),a}var X=c(97326),Y=c(60136);function Z(b,a){return a&&("object"===T(a)||"function"==typeof a)?a:(0,X.Z)(b)}function $(a){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function _(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var b=c(67294),y=c(81861),a=c.n(y),o=["onKeyDown","onKeyPress","onKeyUp"],p=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],q=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],aa=[].concat(["onCopy","onCut","onPaste"],["onCompositionEnd","onCompositionStart","onCompositionUpdate"],o,["onFocus","onBlur"],["onChange","onInput","onInvalid","onReset","onSubmit"],["onError","onLoad"],p,["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],["onSelect"],q,["onScroll"],["onWheel"],["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],["onLoad","onError"],["onAnimationStart","onAnimationEnd","onAnimationIteration"],["onTransitionEnd"],["onToggle"]),ab=function(b,c){var a={};return aa.forEach(function(d){if(d in b){if(!c){a[d]=b[d];return}a[d]=function(a){return b[d](a,c(d))}}}),a};function ac(a){var b=!1;return{promise:new Promise(function(c,d){a.then(function(){return!b&&c.apply(void 0,arguments)}).catch(function(a){return!b&&d(a)})}),cancel:function(){b=!0}}}var ad=c(89624);function ae(a,b){if(!a)throw Error("Invariant failed")}var z=function(a,b){},af=(0,b.createContext)(null);function A(a){var c=a.children,d=a.type;return b.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(d)},c)}A.propTypes={children:a().node,type:a().oneOf(["error","loading","no-data"]).isRequired};var B=function(){function a(){U(this,a),this.externalLinkTarget=null,this.externalLinkRel=null}return W(a,[{key:"setDocument",value:function(a){this.pdfDocument=a}},{key:"setViewer",value:function(a){this.pdfViewer=a}},{key:"setExternalLinkRel",value:function(a){this.externalLinkRel=a}},{key:"setExternalLinkTarget",value:function(a){this.externalLinkTarget=a}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(a){this.pdfViewer.currentPageNumber=a}},{key:"rotation",get:function(){return 0},set:function(a){}},{key:"goToDestination",value:function(a){var b=this;new Promise(function(c){"string"==typeof a?b.pdfDocument.getDestination(a).then(c):Array.isArray(a)?c(a):a.then(c)}).then(function(c){ae(Array.isArray(c),'"'.concat(c,'" is not a valid destination array.'));var d=c[0];new Promise(function(a){d instanceof Object?b.pdfDocument.getPageIndex(d).then(function(b){a(b)}).catch(function(){ae(!1,'"'.concat(d,'" is not a valid page reference.'))}):"number"==typeof d?a(d):ae(!1,'"'.concat(d,'" is not a valid destination reference.'))}).then(function(d){var c=d+1;ae(c>=1&&c<=b.pagesCount,'"'.concat(c,'" is not a valid page number.')),b.pdfViewer.scrollPageIntoView({dest:a,pageIndex:d,pageNumber:c})})})}},{key:"navigateTo",value:function(a){this.goToDestination(a)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(a,b,c){a.href=b,a.rel=this.externalLinkRel||"noopener noreferrer nofollow",a.target=c?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),a}(),ag={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function ah(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=Array(a);b<a;b++)d[b]=c[b];return d}function ai(a,c){if(a){if("string"==typeof a)return ah(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(a);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return ah(a,c)}}function aj(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(d,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(d)){var a=[],b=!0,f=!1,g=void 0;try{for(var h,c=d[Symbol.iterator]();!(b=(h=c.next()).done)&&(a.push(h.value),!e||a.length!==e);b=!0);}catch(i){f=!0,g=i}finally{try{b||null==c.return||c.return()}finally{if(f)throw g}}return a}}(a,b)||ai(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C="undefined"!=typeof window,D=C&&"file:"===window.location.protocol;function ak(a){return void 0!==a}function al(a){return ak(a)&&null!==a}function am(a){var b;return"string"==typeof(b=a)&&/^data:/.test(a)}function an(a){ae(am(a),"Invalid data URI.");var b=aj(a.split(","),2),d=b[0],c=b[1],e=d.split(";");return -1!==e.indexOf("base64")?atob(c):unescape(c)}var E="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function ao(){z(!D,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(E))}function ap(a){a&&a.cancel&&a.cancel()}function aq(a,b){return Object.defineProperty(a,"width",{get:function(){return this.view[2]*b},configurable:!0}),Object.defineProperty(a,"height",{get:function(){return this.view[3]*b},configurable:!0}),Object.defineProperty(a,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(a,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),a}function ar(a){return"RenderingCancelledException"===a.name}function h(a){return function(a){if(Array.isArray(a))return ah(a)}(a)||function(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}(a)||ai(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r,i=(r={},[].concat(h(p),h(q),h(o)).forEach(function(b){r[b]=a().func}),r),j=[a().string,a().instanceOf(ArrayBuffer),a().shape({data:a().oneOfType([a().object,a().string]),httpHeaders:a().object,range:a().object,url:a().string,withCredentials:a().bool})];"undefined"!=typeof File&&j.push(a().instanceOf(File)),"undefined"!=typeof Blob&&j.push(a().instanceOf(Blob));var k=a().oneOfType([a().string,a().arrayOf(a().string)]),F=a().oneOfType(j),G=a().instanceOf(B);a().oneOf(["_self","_blank","_parent","_top"]);var e=a().shape({_transport:a().shape({fontLoader:a().object.isRequired}).isRequired,commonObjs:a().shape({_objs:a().object.isRequired}).isRequired,getAnnotations:a().func.isRequired,getTextContent:a().func.isRequired,getViewport:a().func.isRequired,render:a().func.isRequired}),l=a().oneOfType([a().shape({getDestination:a().func.isRequired,getOutline:a().func.isRequired,getPage:a().func.isRequired,numPages:a().number.isRequired}),a().bool]),f=a().oneOfType([a().func,a().shape({current:a().any})]),H=a().oneOf(["canvas","none","svg"]),d=a().oneOf([0,90,180,270]),as=["url"];function at(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function s(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?at(Object(b),!0).forEach(function(a){_(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):at(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}var au=g.PDFDataRangeTransport,t=function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var b;U(this,a);for(var d=arguments.length,e=Array(d),c=0;c<d;c++)e[c]=arguments[c];return b=f.call.apply(f,[this].concat(e)),_((0,X.Z)(b),"state",{pdf:null}),_((0,X.Z)(b),"viewer",{scrollPageIntoView:function(a){var g=a.dest,c=a.pageIndex,d=a.pageNumber,e=b.props.onItemClick;if(e){e({dest:g,pageIndex:c,pageNumber:d});return}var f=b.pages[c];if(f){f.scrollIntoView();return}z(!1,"An internal link leading to page ".concat(d," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}),_((0,X.Z)(b),"linkService",new B),_((0,X.Z)(b),"loadDocument",function(){ap(b.runningTask),b.loadingTask&&b.loadingTask.destroy();var a=ac(b.findDocumentSource());b.runningTask=a,a.promise.then(function(c){if(b.onSourceSuccess(),c){b.setState(function(a){return a.pdf?{pdf:null}:null});var a=b.props,f=a.options,d=a.onLoadProgress,h=a.onPassword;b.loadingTask=g.getDocument(s(s({},c),f)),b.loadingTask.onPassword=h,d&&(b.loadingTask.onProgress=d);var e=ac(b.loadingTask.promise);b.runningTask=e,e.promise.then(function(a){b.setState(function(b){return b.pdf&&b.pdf.fingerprint===a.fingerprint?null:{pdf:a}},b.onLoadSuccess)}).catch(function(a){b.onLoadError(a)})}}).catch(function(a){b.onSourceError(a)})}),_((0,X.Z)(b),"setupLinkService",function(){var a=b.props,c=a.externalLinkRel,d=a.externalLinkTarget;b.linkService.setViewer(b.viewer),b.linkService.setExternalLinkRel(c),b.linkService.setExternalLinkTarget(d)}),_((0,X.Z)(b),"onSourceSuccess",function(){var a=b.props.onSourceSuccess;a&&a()}),_((0,X.Z)(b),"onSourceError",function(a){z(a);var c=b.props.onSourceError;c&&c(a)}),_((0,X.Z)(b),"onLoadSuccess",function(){var c=b.props.onLoadSuccess,a=b.state.pdf;c&&c(a),b.pages=Array(a.numPages),b.linkService.setDocument(a)}),_((0,X.Z)(b),"onLoadError",function(a){b.setState({pdf:!1}),z(a);var c=b.props.onLoadError;c&&c(a)}),_((0,X.Z)(b),"findDocumentSource",function(){return new Promise(function(c){var f,d,e,g,a=b.props.file;if(a||c(null),"string"==typeof a){if(am(a)){var h=an(a);c({data:h})}ao(),c({url:a})}if(a instanceof au&&c({range:a}),(f=a)instanceof ArrayBuffer&&c({data:a}),C&&(d=a,ae(C,"isBlob can only be used in a browser environment"),d instanceof Blob||(e=a,ae(C,"isFile can only be used in a browser environment"),e instanceof File))){(g=a,new Promise(function(b,c){var a=new FileReader;return a.onload=function(){return b(new Uint8Array(a.result))},a.onerror=function(a){switch(a.target.error.code){case a.target.error.NOT_FOUND_ERR:return c(Error("Error while reading a file: File not found."));case a.target.error.NOT_READABLE_ERR:return c(Error("Error while reading a file: File not readable."));case a.target.error.SECURITY_ERR:return c(Error("Error while reading a file: Security error."));case a.target.error.ABORT_ERR:return c(Error("Error while reading a file: Aborted."));default:return c(Error("Error while reading a file."))}},a.readAsArrayBuffer(g),null})).then(function(a){c({data:a})});return}if(ae("object"===T(a),"Invalid parameter in file, need either Uint8Array, string or a parameter object"),ae(a.url||a.data||a.range,"Invalid parameter object: need either .data, .range or .url"),"string"==typeof a.url){if(am(a.url)){var i=a.url,j=S(a,as),k=an(i);c(s({data:k},j))}ao()}c(a)})}),_((0,X.Z)(b),"registerPage",function(a,c){b.pages[a]=c}),_((0,X.Z)(b),"unregisterPage",function(a){delete b.pages[a]}),b}return W(a,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(a){this.props.file!==a.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){ap(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var b=this.linkService,c=this.registerPage,d=this.unregisterPage,a=this.props,e=a.imageResourcesPath,f=a.renderMode,g=a.rotate,h=this.state.pdf;return{imageResourcesPath:e,linkService:b,pdf:h,registerPage:c,renderMode:f,rotate:g,unregisterPage:d}}},{key:"eventProps",get:function(){var a=this;return ab(this.props,function(){return a.state.pdf})}},{key:"renderChildren",value:function(){var a=this.props.children;return b.createElement(af.Provider,{value:this.childContext},a)}},{key:"renderContent",value:function(){var f=this.props.file,e=this.state.pdf;if(!f){var a=this.props.noData;return b.createElement(A,{type:"no-data"},"function"==typeof a?a():a)}if(null===e){var c=this.props.loading;return b.createElement(A,{type:"loading"},"function"==typeof c?c():c)}if(!1===e){var d=this.props.error;return b.createElement(A,{type:"error"},"function"==typeof d?d():d)}return this.renderChildren()}},{key:"render",value:function(){var a=this.props,c=a.className,d=a.inputRef;return b.createElement("div",(0,Q.Z)({className:(0,ad.Z)("react-pdf__Document",c),ref:d},this.eventProps),this.renderContent())}}]),a}(b.PureComponent);t.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF\u2026",noData:"No PDF file specified.",onPassword:function(a,b){switch(b){case ag.NEED_PASSWORD:a(prompt("Enter the password to open this PDF file."));break;case ag.INCORRECT_PASSWORD:a(prompt("Invalid password. Please try again."))}}};var m=a().oneOfType([a().func,a().node]);t.propTypes=s(s({},i),{},{children:a().node,className:k,error:m,externalLinkRel:a().string,externalLinkTarget:a().string,file:F,imageResourcesPath:a().string,inputRef:f,loading:m,noData:m,onItemClick:a().func,onLoadError:a().func,onLoadProgress:a().func,onLoadSuccess:a().func,onPassword:a().func,onSourceError:a().func,onSourceSuccess:a().func,rotate:a().number});var av=(0,b.createContext)(null),aw=function(){function a(b){var c=b.num,d=b.gen;U(this,a),this.num=c,this.gen=d}return W(a,[{key:"toString",value:function(){var a="".concat(this.num,"R");return 0!==this.gen&&(a+=this.gen),a}}]),a}(),ax=["item"],I=function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var b;U(this,a);for(var d=arguments.length,e=Array(d),c=0;c<d;c++)e[c]=arguments[c];return b=f.call.apply(f,[this].concat(e)),_((0,X.Z)(b),"getDestination",function(){return new Promise(function(c,e){var d=b.props,a=d.item,f=d.pdf;return ak(b.destination)||("string"==typeof a.dest?f.getDestination(a.dest).then(c).catch(e):c(a.dest)),b.destination}).then(function(a){return b.destination=a,a})}),_((0,X.Z)(b),"getPageIndex",function(){return new Promise(function(a,c){var d=b.props.pdf;ak(b.pageIndex)&&a(b.pageIndex),b.getDestination().then(function(b){if(b){var e=aj(b,1)[0];d.getPageIndex(new aw(e)).then(a).catch(c)}})}).then(function(a){return b.pageIndex=a,b.pageIndex})}),_((0,X.Z)(b),"getPageNumber",function(){return new Promise(function(a,c){ak(b.pageNumber)&&a(b.pageNumber),b.getPageIndex().then(function(b){a(b+1)}).catch(c)}).then(function(a){return b.pageNumber=a,a})}),_((0,X.Z)(b),"onClick",function(a){var c=b.props.onClick;return a.preventDefault(),!!c&&Promise.all([b.getDestination(),b.getPageIndex(),b.getPageNumber()]).then(function(b){var a=aj(b,3),d=a[0],e=a[1],f=a[2];c({dest:d,pageIndex:e,pageNumber:f})})}),b}return W(a,[{key:"renderSubitems",value:function(){var d=this.props,c=d.item,f=S(d,ax);if(!c.items||!c.items.length)return null;var e=c.items;return b.createElement("ul",null,e.map(function(c,d){return b.createElement(a,(0,Q.Z)({key:"string"==typeof c.destination?c.destination:d,item:c},f))}))}},{key:"render",value:function(){var a=this.props.item;return b.createElement("li",null,b.createElement("a",{href:"#",onClick:this.onClick},a.title),this.renderSubitems())}}]),a}(b.PureComponent),u=a().oneOfType([a().string,a().arrayOf(a().any)]);I.propTypes={item:a().shape({dest:u,items:a().arrayOf(a().shape({dest:u,title:a().string})),title:a().string}).isRequired,onClick:a().func,pdf:l.isRequired};var ay=function(a){return b.createElement(af.Consumer,null,function(c){return b.createElement(av.Consumer,null,function(d){return b.createElement(I,(0,Q.Z)({},c,d,a))})})};function az(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function aA(){for(var b=arguments.length,c=Array(b),a=0;a<b;a++)c[a]=arguments[a];var d=c.filter(Boolean);return d.length<=1?d[0]:function(a){d.forEach(function(b){"function"==typeof b?b(a):b.current=a})}}(function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var b;U(this,a);for(var d=arguments.length,e=Array(d),c=0;c<d;c++)e[c]=arguments[c];return b=f.call.apply(f,[this].concat(e)),_((0,X.Z)(b),"state",{outline:null}),_((0,X.Z)(b),"loadOutline",function(){var c=b.props.pdf;b.setState(function(a){return a.outline?{outline:null}:null});var a=ac(c.getOutline());b.runningTask=a,a.promise.then(function(a){b.setState({outline:a},b.onLoadSuccess)}).catch(function(a){b.onLoadError(a)})}),_((0,X.Z)(b),"onLoadSuccess",function(){var a=b.props.onLoadSuccess,c=b.state.outline;a&&a(c)}),_((0,X.Z)(b),"onLoadError",function(a){b.setState({outline:!1}),z(a);var c=b.props.onLoadError;c&&c(a)}),_((0,X.Z)(b),"onItemClick",function(a){var d=a.dest,e=a.pageIndex,f=a.pageNumber,c=b.props.onItemClick;c&&c({dest:d,pageIndex:e,pageNumber:f})}),b}return W(a,[{key:"componentDidMount",value:function(){ae(this.props.pdf,"Attempted to load an outline, but no document was specified."),this.loadOutline()}},{key:"componentDidUpdate",value:function(a){var b=this.props.pdf;a.pdf&&b!==a.pdf&&this.loadOutline()}},{key:"componentWillUnmount",value:function(){ap(this.runningTask)}},{key:"childContext",get:function(){return{onClick:this.onItemClick}}},{key:"eventProps",get:function(){var a=this;return ab(this.props,function(){return a.state.outline})}},{key:"renderOutline",value:function(){var a=this.state.outline;return b.createElement("ul",null,a.map(function(a,c){return b.createElement(ay,{key:"string"==typeof a.destination?a.destination:c,item:a})}))}},{key:"render",value:function(){var c=this.props.pdf,d=this.state.outline;if(!c||!d)return null;var a=this.props,e=a.className,f=a.inputRef;return b.createElement("div",(0,Q.Z)({className:(0,ad.Z)("react-pdf__Outline",e),ref:f},this.eventProps),b.createElement(av.Provider,{value:this.childContext},this.renderOutline()))}}]),a})(b.PureComponent).propTypes=function(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?az(Object(b),!0).forEach(function(a){_(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):az(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}({className:k,inputRef:f,onItemClick:a().func,onLoadError:a().func,onLoadSuccess:a().func,pdf:l},i);var aB=(0,b.createContext)(null),aC=g.AnnotationMode,J=function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var c;U(this,a);for(var e=arguments.length,g=Array(e),d=0;d<e;d++)g[d]=arguments[d];return c=f.call.apply(f,[this].concat(g)),_((0,X.Z)(c),"canvasElement",(0,b.createRef)()),_((0,X.Z)(c),"onRenderSuccess",function(){c.renderer=null;var a=c.props,b=a.onRenderSuccess,d=a.page,e=a.scale;b&&b(aq(d,e))}),_((0,X.Z)(c),"onRenderError",function(a){if(!ar(a)){z(a);var b=c.props.onRenderError;b&&b(a)}}),_((0,X.Z)(c),"drawPageOnCanvas",function(){var a=c.canvasElement.current;if(!a)return null;var e=(0,X.Z)(c),b=e.renderViewport,f=e.viewport,d=c.props,g=d.canvasBackground,i=d.page,j=d.renderForms;a.width=b.width,a.height=b.height,a.style.width="".concat(Math.floor(f.width),"px"),a.style.height="".concat(Math.floor(f.height),"px");var h={annotationMode:j?aC.ENABLE_FORMS:aC.ENABLE,get canvasContext(){return a.getContext("2d")},viewport:b};return g&&(h.background=g),c.cancelRenderingTask(),c.renderer=i.render(h),c.renderer.promise.then(c.onRenderSuccess).catch(c.onRenderError)}),c}return W(a,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(b){var a=this.props,c=a.canvasBackground,d=a.page,e=a.renderForms;(c!==b.canvasBackground||e!==b.renderForms)&&(d.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var a=this.canvasElement.current;a&&(a.width=0,a.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"renderViewport",get:function(){var a=this.props,b=a.page,c=a.rotate,d=a.scale,e=C&&window.devicePixelRatio||1;return b.getViewport({scale:d*e,rotation:c})}},{key:"viewport",get:function(){var a=this.props,b=a.page,c=a.rotate,d=a.scale;return b.getViewport({scale:d,rotation:c})}},{key:"render",value:function(){var a=this.props.canvasRef;return b.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:aA(a,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),a}(b.PureComponent);function aD(a){return b.createElement(aB.Consumer,null,function(c){return b.createElement(J,(0,Q.Z)({},c,a))})}J.propTypes={canvasBackground:a().string,canvasRef:f,onRenderError:a().func,onRenderSuccess:a().func,page:e.isRequired,renderForms:a().bool,rotate:d,scale:a().number.isRequired};var K=function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var b;U(this,a);for(var d=arguments.length,e=Array(d),c=0;c<d;c++)e[c]=arguments[c];return b=f.call.apply(f,[this].concat(e)),_((0,X.Z)(b),"state",{svg:null}),_((0,X.Z)(b),"onRenderSuccess",function(){b.renderer=null;var a=b.props,c=a.onRenderSuccess,d=a.page,e=a.scale;c&&c(aq(d,e))}),_((0,X.Z)(b),"onRenderError",function(a){if(!ar(a)){z(a);var c=b.props.onRenderError;c&&c(a)}}),_((0,X.Z)(b),"renderSVG",function(){var a=b.props.page;return b.renderer=a.getOperatorList(),b.renderer.then(function(c){var d=new g.SVGGraphics(a.commonObjs,a.objs);b.renderer=d.getSVG(c,b.viewport).then(function(a){b.setState({svg:a},b.onRenderSuccess)}).catch(b.onRenderError)}).catch(b.onRenderError)}),_((0,X.Z)(b),"drawPageOnContainer",function(c){var a=b.state.svg;if(c&&a){c.firstElementChild||c.appendChild(a);var d=b.viewport,e=d.width,f=d.height;a.setAttribute("width",e),a.setAttribute("height",f)}}),b}return W(a,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var a=this.props,b=a.page,c=a.rotate,d=a.scale;return b.getViewport({scale:d,rotation:c})}},{key:"render",value:function(){var e=this,a=this.viewport,c=a.width,d=a.height;return b.createElement("div",{className:"react-pdf__Page__svg",ref:function(a){return e.drawPageOnContainer(a)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:c,height:d,userSelect:"none"}})}}]),a}(b.PureComponent);function aE(a){return b.createElement(aB.Consumer,null,function(c){return b.createElement(K,(0,Q.Z)({},c,a))})}K.propTypes={onRenderError:a().func,onRenderSuccess:a().func,page:e.isRequired,rotate:d,scale:a().number.isRequired};var L=function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var c;U(this,a);for(var e=arguments.length,g=Array(e),d=0;d<e;d++)g[d]=arguments[d];return c=f.call.apply(f,[this].concat(g)),_((0,X.Z)(c),"itemElement",(0,b.createRef)()),_((0,X.Z)(c),"getElementWidth",function(a){var b=(0,X.Z)(c).sideways;return a.getBoundingClientRect()[b?"height":"width"]}),c}return W(a,[{key:"componentDidMount",value:function(){this.alignTextItem()}},{key:"componentDidUpdate",value:function(){this.alignTextItem()}},{key:"unrotatedViewport",get:function(){var a=this.props,b=a.page,c=a.scale;return b.getViewport({scale:c})}},{key:"rotate",get:function(){var a=this.props,b=a.page,c=a.rotate;return c-b.rotate}},{key:"sideways",get:function(){return this.rotate%180!=0}},{key:"defaultSideways",get:function(){return this.unrotatedViewport.rotation%180!=0}},{key:"fontSize",get:function(){var b=this.props.transform,c=this.defaultSideways,a=aj(b,2),d=a[0],e=a[1];return c?e:d}},{key:"top",get:function(){var c=this.props.transform,d=this.unrotatedViewport,e=this.defaultSideways,a=aj(c,6),f=a[2],g=a[3],h=a[4],i=a[5],b=aj(d.viewBox,4),j=b[1],k=b[3];return e?h+f+j:k-(i+g)}},{key:"left",get:function(){var c=this.props.transform,d=this.unrotatedViewport,e=this.defaultSideways,a=aj(c,6),f=a[4],g=a[5],h=aj(d.viewBox,1),b=h[0];return e?g-b:f-b}},{key:"getFontData",value:function(a){var b=this.props.page;return new Promise(function(c){b.commonObjs.get(a,c)})}},{key:"alignTextItem",value:function(){var d=this,a=this.itemElement.current;if(a){a.style.transform="";var b=this.props,c=b.fontName,e=b.scale,f=b.width;a.style.fontFamily="".concat(c,", sans-serif"),this.getFontData(c).then(function(b){var i=b?b.fallbackName:"sans-serif";a.style.fontFamily="".concat(c,", ").concat(i);var j=d.getElementWidth(a),g="scaleX(".concat(f*e/j,")"),h=b?b.ascent:0;h&&(g+=" translateY(".concat((1-h)*100,"%)")),a.style.transform=g,a.style.WebkitTransform=g})}}},{key:"render",value:function(){var e=this.fontSize,f=this.top,g=this.left,a=this.props,d=a.customTextRenderer,c=a.scale,h=a.str;return b.createElement("span",{ref:this.itemElement,style:{height:"1em",fontFamily:"sans-serif",fontSize:"".concat(e*c,"px"),position:"absolute",top:"".concat(f*c,"px"),left:"".concat(g*c,"px"),transformOrigin:"left bottom",whiteSpace:"pre",pointerEvents:"all"}},d?d(this.props):h)}}]),a}(b.PureComponent);function aF(a){return b.createElement(aB.Consumer,null,function(c){return b.createElement(L,(0,Q.Z)({},c,a))})}L.propTypes={customTextRenderer:a().func,fontName:a().string.isRequired,itemIndex:a().number.isRequired,page:e.isRequired,rotate:d,scale:a().number,str:a().string.isRequired,transform:a().arrayOf(a().number).isRequired,width:a().number.isRequired};var M=function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var b;U(this,a);for(var d=arguments.length,e=Array(d),c=0;c<d;c++)e[c]=arguments[c];return b=f.call.apply(f,[this].concat(e)),_((0,X.Z)(b),"state",{textItems:null}),_((0,X.Z)(b),"loadTextItems",function(){var a=ac(b.props.page.getTextContent());b.runningTask=a,a.promise.then(function(a){var c=a.items;b.setState({textItems:c},b.onLoadSuccess)}).catch(function(a){b.onLoadError(a)})}),_((0,X.Z)(b),"onLoadSuccess",function(){var a=b.props.onGetTextSuccess,c=b.state.textItems;a&&a(c)}),_((0,X.Z)(b),"onLoadError",function(a){b.setState({textItems:!1}),z(a);var c=b.props.onGetTextError;c&&c(a)}),b}return W(a,[{key:"componentDidMount",value:function(){ae(this.props.page,"Attempted to load page text content, but no page was specified."),this.loadTextItems()}},{key:"componentDidUpdate",value:function(a){var b=this.props.page;a.page&&b!==a.page&&this.loadTextItems()}},{key:"componentWillUnmount",value:function(){ap(this.runningTask)}},{key:"unrotatedViewport",get:function(){var a=this.props,b=a.page,c=a.scale;return b.getViewport({scale:c})}},{key:"rotate",get:function(){var a=this.props,b=a.page,c=a.rotate;return c-b.rotate}},{key:"renderTextItems",value:function(){var a=this.state.textItems;return a?a.map(function(c,a){return b.createElement(aF,(0,Q.Z)({key:a,itemIndex:a},c))}):null}},{key:"render",value:function(){var a=this.unrotatedViewport,c=this.rotate;return b.createElement("div",{className:"react-pdf__Page__textContent",style:{position:"absolute",top:"50%",left:"50%",width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),color:"transparent",transform:"translate(-50%, -50%) rotate(".concat(c,"deg)"),WebkitTransform:"translate(-50%, -50%) rotate(".concat(c,"deg)"),pointerEvents:"none"}},this.renderTextItems())}}]),a}(b.PureComponent);function aG(a){return b.createElement(aB.Consumer,null,function(c){return b.createElement(M,(0,Q.Z)({},c,a))})}M.propTypes={onGetTextError:a().func,onGetTextSuccess:a().func,page:e.isRequired,rotate:d,scale:a().number};var N=function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var c;U(this,a);for(var e=arguments.length,g=Array(e),d=0;d<e;d++)g[d]=arguments[d];return c=f.call.apply(f,[this].concat(g)),_((0,X.Z)(c),"state",{annotations:null}),_((0,X.Z)(c),"layerElement",(0,b.createRef)()),_((0,X.Z)(c),"loadAnnotations",function(){var a=ac(c.props.page.getAnnotations());c.runningTask=a,a.promise.then(function(a){c.setState({annotations:a},c.onLoadSuccess)}).catch(function(a){c.onLoadError(a)})}),_((0,X.Z)(c),"onLoadSuccess",function(){var a=c.props.onGetAnnotationsSuccess,b=c.state.annotations;a&&a(b)}),_((0,X.Z)(c),"onLoadError",function(a){c.setState({annotations:!1}),z(a);var b=c.props.onGetAnnotationsError;b&&b(a)}),_((0,X.Z)(c),"onRenderSuccess",function(){var a=c.props.onRenderAnnotationLayerSuccess;a&&a()}),_((0,X.Z)(c),"onRenderError",function(a){z(a);var b=c.props.onRenderAnnotationLayerError;b&&b(a)}),c}return W(a,[{key:"componentDidMount",value:function(){ae(this.props.page,"Attempted to load page annotations, but no page was specified."),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(a){var b=this.props,c=b.page,d=b.renderForms;(a.page&&c!==a.page||d!==a.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){ap(this.runningTask)}},{key:"viewport",get:function(){var a=this.props,b=a.page,c=a.rotate,d=a.scale;return b.getViewport({scale:d,rotation:c})}},{key:"renderAnnotationLayer",value:function(){var b=this.state.annotations;if(b){var a=this.props,c=a.imageResourcesPath,d=a.linkService,e=a.page,f=a.renderForms,h=this.viewport.clone({dontFlip:!0}),i={annotations:b,div:this.layerElement.current,imageResourcesPath:c,linkService:d,page:e,renderForms:f,viewport:h};this.layerElement.current.innerHTML="";try{g.AnnotationLayer.render(i),this.onRenderSuccess()}catch(j){this.onRenderError(j)}}}},{key:"render",value:function(){return b.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),a}(b.PureComponent);N.propTypes={imageResourcesPath:a().string,linkService:G.isRequired,onGetAnnotationsError:a().func,onGetAnnotationsSuccess:a().func,onRenderAnnotationLayerError:a().func,onRenderAnnotationLayerSuccess:a().func,page:e,renderForms:a().bool,rotate:d,scale:a().number};var aH=function(a){return b.createElement(af.Consumer,null,function(c){return b.createElement(aB.Consumer,null,function(d){return b.createElement(N,(0,Q.Z)({},c,d,a))})})};function aI(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function v(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?aI(Object(b),!0).forEach(function(a){_(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):aI(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}var w=function(c){(0,Y.Z)(a,c);var d,e,f=(d=a,e=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}(),function(){var a,b=$(d);if(e){var c=$(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return Z(this,a)});function a(){var c;U(this,a);for(var e=arguments.length,g=Array(e),d=0;d<e;d++)g[d]=arguments[d];return c=f.call.apply(f,[this].concat(g)),_((0,X.Z)(c),"state",{page:null}),_((0,X.Z)(c),"pageElement",(0,b.createRef)()),_((0,X.Z)(c),"onLoadSuccess",function(){var a=c.props,b=a.onLoadSuccess,d=a.registerPage,e=c.state.page;b&&b(aq(e,c.scale)),d&&d(c.pageIndex,c.pageElement.current)}),_((0,X.Z)(c),"onLoadError",function(a){c.setState({page:!1}),z(a);var b=c.props.onLoadError;b&&b(a)}),_((0,X.Z)(c),"loadPage",function(){var d=c.props.pdf,a=c.getPageNumber();if(a){c.setState(function(a){return a.page?{page:null}:null});var b=ac(d.getPage(a));c.runningTask=b,b.promise.then(function(a){c.setState({page:a},c.onLoadSuccess)}).catch(function(a){c.onLoadError(a)})}}),c}return W(a,[{key:"componentDidMount",value:function(){ae(this.props.pdf,"Attempted to load a page, but no document was specified."),this.loadPage()}},{key:"componentDidUpdate",value:function(a){var c=this.props.pdf;if(a.pdf&&c!==a.pdf||this.getPageNumber()!==this.getPageNumber(a)){var b=this.props.unregisterPage;b&&b(this.getPageIndex(a)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var a=this.props.unregisterPage;a&&a(this.pageIndex),ap(this.runningTask)}},{key:"childContext",get:function(){var b=this.state.page;if(!b)return{};var a=this.props,d=a.canvasBackground,e=a.customTextRenderer,f=a.onGetAnnotationsError,g=a.onGetAnnotationsSuccess,h=a.onGetTextError,i=a.onGetTextSuccess,j=a.onRenderAnnotationLayerError,k=a.onRenderAnnotationLayerSuccess,l=a.onRenderError,m=a.onRenderSuccess,c=a.renderForms,n=a.renderInteractiveForms;return{canvasBackground:d,customTextRenderer:e,onGetAnnotationsError:f,onGetAnnotationsSuccess:g,onGetTextError:h,onGetTextSuccess:i,onRenderAnnotationLayerError:j,onRenderAnnotationLayerSuccess:k,onRenderError:l,onRenderSuccess:m,page:b,renderForms:null!=c?c:n,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.props;return al(a.pageNumber)?a.pageNumber-1:al(a.pageIndex)?a.pageIndex:null}},{key:"getPageNumber",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.props;return al(a.pageNumber)?a.pageNumber:al(a.pageIndex)?a.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var a=this.props.rotate;if(al(a))return a;var b=this.state.page;return b?b.rotate:null}},{key:"scale",get:function(){var c=this.state.page;if(!c)return null;var a=this.props,d=a.scale,b=a.width,e=a.height,h=this.rotate,f=1;if(b||e){var g=c.getViewport({scale:1,rotation:h});f=b?b/g.width:e/g.height}return(null===d?1:d)*f}},{key:"eventProps",get:function(){var a=this;return ab(this.props,function(){var b=a.state.page;return b?aq(b,a.scale):b})}},{key:"pageKey",get:function(){var a=this.state.page;return"".concat(a.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){var a=this.state.page;return"".concat(a.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var a=this.props,c=a.canvasRef,d=a.renderMode;switch(d){case"none":return null;case"svg":return b.createElement(aE,{key:"".concat(this.pageKeyNoScale,"_svg")});default:return b.createElement(aD,{key:"".concat(this.pageKey,"_canvas"),canvasRef:c})}}},{key:"renderTextLayer",value:function(){return this.props.renderTextLayer?b.createElement(aG,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){return this.props.renderAnnotationLayer?b.createElement(aH,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var a=this.props.children;return b.createElement(aB.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),a)}},{key:"renderContent",value:function(){var g=this.pageNumber,e=this.props.pdf,f=this.state.page;if(!g){var a=this.props.noData;return b.createElement(A,{type:"no-data"},"function"==typeof a?a():a)}if(null===e||null===f){var c=this.props.loading;return b.createElement(A,{type:"loading"},"function"==typeof c?c():c)}if(!1===e|| !1===f){var d=this.props.error;return b.createElement(A,{type:"error"},"function"==typeof d?d():d)}return this.renderChildren()}},{key:"render",value:function(){var c=this.pageNumber,a=this.props,d=a.className,e=a.inputRef;return b.createElement("div",(0,Q.Z)({className:(0,ad.Z)("react-pdf__Page",d),"data-page-number":c,ref:aA(e,this.pageElement),style:{position:"relative"}},this.eventProps),this.renderContent())}}]),a}(b.PureComponent);w.defaultProps={error:"Failed to load the page.",loading:"Loading page\u2026",noData:"No page specified.",renderAnnotationLayer:!0,renderForms:!1,renderMode:"canvas",renderTextLayer:!0,scale:1};var n=a().oneOfType([a().func,a().node]);w.propTypes=v(v({},i),{},{canvasBackground:a().string,children:a().node,className:k,customTextRenderer:a().func,error:n,height:a().number,imageResourcesPath:a().string,inputRef:f,loading:n,noData:n,onGetTextError:a().func,onGetTextSuccess:a().func,onLoadError:a().func,onLoadSuccess:a().func,onRenderError:a().func,onRenderSuccess:a().func,pageIndex:function(c,a,d){var b=c[a],g=c.pageNumber,e=c.pdf;if(!ak(e))return null;if(ak(b)){if("number"!=typeof b)return Error("`".concat(a,"` of type `").concat(T(b),"` supplied to `").concat(d,"`, expected `number`."));if(b<0)return Error("Expected `".concat(a,"` to be greater or equal to 0."));var f=e.numPages;if(b+1>f)return Error("Expected `".concat(a,"` to be less or equal to ").concat(f-1,"."))}else if(!ak(g))return Error("`".concat(a,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(d,"`."));return null},pageNumber:function(c,a,d){var b=c[a],g=c.pageIndex,e=c.pdf;if(!ak(e))return null;if(ak(b)){if("number"!=typeof b)return Error("`".concat(a,"` of type `").concat(T(b),"` supplied to `").concat(d,"`, expected `number`."));if(b<1)return Error("Expected `".concat(a,"` to be greater or equal to 1."));var f=e.numPages;if(b>f)return Error("Expected `".concat(a,"` to be less or equal to ").concat(f,"."))}else if(!ak(g))return Error("`".concat(a,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(d,"`."));return null},pdf:l,registerPage:a().func,renderAnnotationLayer:a().bool,renderForms:a().bool,renderInteractiveForms:a().bool,renderMode:H,renderTextLayer:a().bool,rotate:d,scale:a().number,unregisterPage:a().func,width:a().number});var aJ=b.forwardRef(function(a,c){return b.createElement(af.Consumer,null,function(d){return b.createElement(w,(0,Q.Z)({ref:c},d,a))})});z(!D,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(E)),g.GlobalWorkerOptions.workerSrc="pdf.worker.js"},45501:function(a,e,b){"use strict";var f=b(23503);function c(){}function d(){}d.resetWarningCache=c,a.exports=function(){function a(c,d,e,g,h,b){if(b!==f){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function b(){return a}a.isRequired=a;var e={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:d,resetWarningCache:c};return e.PropTypes=e,e}},81861:function(a,c,b){a.exports=b(45501)()},23503:function(a){"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},40372:function(a,c,b){"use strict";var d=b(36060);a.exports=function(a){if("function"!=typeof a||!hasOwnProperty.call(a,"length"))return!1;try{if("number"!=typeof a.length||"function"!=typeof a.call||"function"!=typeof a.apply)return!1}catch(b){return!1}return!d(a)}},13940:function(a,c,b){"use strict";var d=b(71416),e={object:!0,function:!0,undefined:!0};a.exports=function(a){return!!d(a)&&hasOwnProperty.call(e,typeof a)}},17205:function(a,c,b){"use strict";var d=b(40372),e=/^\s*class[\s{/}]/,f=Function.prototype.toString;a.exports=function(a){return!(!d(a)||e.test(f.call(a)))}},36060:function(a,c,b){"use strict";var d=b(13940);a.exports=function(a){if(!d(a))return!1;try{if(!a.constructor)return!1;return a.constructor.prototype===a}catch(b){return!1}}},71416:function(a){"use strict";var b=void 0;a.exports=function(a){return a!==b&&null!==a}}}])
//# sourceMappingURL=35160-bfad617eec16208f.js.map